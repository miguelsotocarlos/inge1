

----STARTUP---- (12 June 2022 10:08:40) as C:\Users\Dani\Desktop\Cursada\Inge 1\Cuis\Tuslibros\CuisUniversity-5096.image!


----End fileIn of C:\Users\Dani\Desktop\Cursada\Inge 1\Cuis\Tuslibros\TusLibros.st----!
!Cart methodsFor: 'total' stamp: 'DW 6/12/2022 10:11:49' prior: 50474555!
total

	^ items sum: [ :anItem | catalog at: anItem ]! !
!SalesInterface methodsFor: 'interface' stamp: 'DW 6/12/2022 10:13:31' prior: 50474835!
listCartWithCartId: cartId 
	^ (carts at: cartId) books asOrderedCollection.! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'DW 6/12/2022 10:13:34'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'DW 6/12/2022 10:13:34'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'DW 6/12/2022 10:13:34'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'DW 6/12/2022 10:13:34'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'DW 6/12/2022 10:13:34'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'DW 6/12/2022 10:13:34'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'DW 6/12/2022 10:13:34'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'DW 6/12/2022 10:13:34'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'DW 6/12/2022 10:13:34'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'DW 6/12/2022 10:13:34'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'DW 6/12/2022 10:13:34'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'DW 6/12/2022 10:13:34'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'DW 6/12/2022 10:13:34'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'DW 6/12/2022 10:13:34'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'DW 6/12/2022 10:13:34'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'DW 6/12/2022 10:13:34'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'DW 6/12/2022 10:13:34'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'DW 6/12/2022 10:13:34'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'DW 6/12/2022 10:13:34'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'DW 6/12/2022 10:13:34'!
PASSED!
!Cart methodsFor: 'initialization' stamp: 'DW 6/12/2022 10:17:26' prior: 50474534!
initializeAcceptingItemsOf: aCatalog

	catalog := aCatalog.
	items := Bag new.! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'DW 6/12/2022 10:17:27'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'DW 6/12/2022 10:17:27'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'DW 6/12/2022 10:17:27'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'DW 6/12/2022 10:17:27'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'DW 6/12/2022 10:17:27'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'DW 6/12/2022 10:17:27'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'DW 6/12/2022 10:17:27'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'DW 6/12/2022 10:17:27'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'DW 6/12/2022 10:17:27'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'DW 6/12/2022 10:17:27'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'DW 6/12/2022 10:17:27'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'DW 6/12/2022 10:17:27'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'DW 6/12/2022 10:17:27'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'DW 6/12/2022 10:17:27'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'DW 6/12/2022 10:17:27'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'DW 6/12/2022 10:17:28'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'DW 6/12/2022 10:17:28'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'DW 6/12/2022 10:17:28'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'DW 6/12/2022 10:17:28'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'DW 6/12/2022 10:17:28'!
PASSED!
!Cart methodsFor: 'adding' stamp: 'DW 6/12/2022 10:20:31' prior: 50474563!
add: aQuantity of: anItem
	self assertIsValidQuantity: aQuantity.
	self assertIsValidItem: anItem.

	items add: anItem withOccurrences: aQuantity.! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'DW 6/12/2022 10:20:37'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'DW 6/12/2022 10:20:37'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'DW 6/12/2022 10:20:37'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'DW 6/12/2022 10:20:37'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'DW 6/12/2022 10:20:37'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'DW 6/12/2022 10:20:37'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'DW 6/12/2022 10:20:37'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'DW 6/12/2022 10:20:37'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'DW 6/12/2022 10:20:37'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'DW 6/12/2022 10:20:37'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'DW 6/12/2022 10:20:37'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'DW 6/12/2022 10:20:37'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'DW 6/12/2022 10:20:37'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'DW 6/12/2022 10:20:37'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'DW 6/12/2022 10:20:37'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'DW 6/12/2022 10:20:37'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'DW 6/12/2022 10:20:37'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'DW 6/12/2022 10:20:37'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'DW 6/12/2022 10:20:37'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'DW 6/12/2022 10:20:37'!
PASSED!
!Cart methodsFor: 'adding' stamp: 'DW 6/12/2022 10:20:46' prior: 50474559!
add: anItem
	^ self add: 1 of: anItem ! !
!Cart methodsFor: 'queries' stamp: 'DW 6/12/2022 10:25:13' prior: 50474539!
books
	^items ! !
!Cart methodsFor: 'queries' stamp: 'DW 6/12/2022 10:25:22' prior: 50474542!
occurrencesOf: anItem

	^items occurrencesOf: anItem  ! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 10:25:46' prior: 50474397!
test01ListCartOfNewlyCreatedCartIsEmpty
	| id salesInterface |
	salesInterface := SalesInterface withAuthenticator: (self permissiveAuthenticator) withCatalog: testObjectsFactory defaultCatalog.
	id := salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser.
	self assert: Bag new equals: (salesInterface listCartWithCartId: id).! !

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'DW 6/12/2022 10:25:49'!
FAILURE!
!SalesInterface methodsFor: 'interface' stamp: 'DW 6/12/2022 10:25:58' prior: 50474929!
listCartWithCartId: cartId 
	^ (carts at: cartId) books.! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'DW 6/12/2022 10:26:00'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'DW 6/12/2022 10:26:00'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'DW 6/12/2022 10:26:00'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'DW 6/12/2022 10:26:00'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'DW 6/12/2022 10:26:00'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'DW 6/12/2022 10:26:00'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'DW 6/12/2022 10:26:00'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'DW 6/12/2022 10:26:00'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'DW 6/12/2022 10:26:00'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'DW 6/12/2022 10:26:00'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'DW 6/12/2022 10:26:00'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'DW 6/12/2022 10:26:00'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'DW 6/12/2022 10:26:00'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'DW 6/12/2022 10:26:00'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'DW 6/12/2022 10:26:00'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'DW 6/12/2022 10:26:00'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'DW 6/12/2022 10:26:00'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'DW 6/12/2022 10:26:00'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'DW 6/12/2022 10:26:00'!
FAILURE!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'DW 6/12/2022 10:26:00'!
FAILURE!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'DW 6/12/2022 10:26:11'!
PASSED!
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 10:26:23' prior: 50474459!
test05ListCartReflectsAddToCart
	| salesInterface id |
	salesInterface := SalesInterface withAuthenticator: (self permissiveAuthenticator) withCatalog: testObjectsFactory defaultCatalog.
	
	id := salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser.
	salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 	1.
	self assert: (Bag with: testObjectsFactory itemSellByTheStore) equals: (salesInterface listCartWithCartId: id).
	! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 10:26:30' prior: 50474478!
test06AddToCartDoesntAffectOtherCarts
	| salesInterface id1 id2 |
	salesInterface := SalesInterface withAuthenticator: (self permissiveAuthenticator) withCatalog: testObjectsFactory defaultCatalog.
	
	id1 := salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser.
	id2 := salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser.
	
	salesInterface addToCartWithCartId: id1 bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 	1.
	
	self assert: (Bag new) equals: (salesInterface listCartWithCartId: id2).
	! !

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'DW 6/12/2022 10:26:31'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'DW 6/12/2022 10:26:32'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'DW 6/12/2022 10:26:32'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'DW 6/12/2022 10:26:32'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'DW 6/12/2022 10:26:32'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'DW 6/12/2022 10:26:32'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'DW 6/12/2022 10:26:32'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'DW 6/12/2022 10:26:32'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'DW 6/12/2022 10:26:32'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'DW 6/12/2022 10:26:32'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'DW 6/12/2022 10:26:32'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'DW 6/12/2022 10:26:32'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'DW 6/12/2022 10:26:32'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'DW 6/12/2022 10:26:32'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'DW 6/12/2022 10:26:32'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'DW 6/12/2022 10:26:32'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'DW 6/12/2022 10:26:32'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'DW 6/12/2022 10:26:32'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'DW 6/12/2022 10:26:32'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'DW 6/12/2022 10:26:32'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'DW 6/12/2022 10:26:32'!
PASSED!
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 10:30:38' prior: 50474412!
test02NewCartGenreatesUniqueIds
	| salesInterface id1 id2 |
	salesInterface := SalesInterface withAuthenticator: (self authenticatorWithSingleRegisteredUser ) withCatalog: testObjectsFactory defaultCatalog.
	id1 := salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser.
	id2 := salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser.
	self deny: (id1 = id2).! !

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'DW 6/12/2022 10:30:39'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'DW 6/12/2022 10:30:39'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'DW 6/12/2022 10:30:39'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'DW 6/12/2022 10:30:39'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'DW 6/12/2022 10:30:39'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'DW 6/12/2022 10:30:39'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'DW 6/12/2022 10:30:39'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'DW 6/12/2022 10:30:39'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'DW 6/12/2022 10:30:39'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'DW 6/12/2022 10:30:39'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'DW 6/12/2022 10:30:39'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'DW 6/12/2022 10:30:39'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'DW 6/12/2022 10:30:39'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'DW 6/12/2022 10:30:39'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'DW 6/12/2022 10:30:39'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'DW 6/12/2022 10:30:39'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'DW 6/12/2022 10:30:39'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'DW 6/12/2022 10:30:39'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'DW 6/12/2022 10:30:39'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'DW 6/12/2022 10:30:39'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'DW 6/12/2022 10:30:39'!
PASSED!
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 10:31:11' prior: 50475358!
test02NewCartGenreatesUniqueIds
	| salesInterface id1 id2 |
	salesInterface := SalesInterface withAuthenticator: (self authenticatorWithSingleRegisteredUser) withCatalog: testObjectsFactory defaultCatalog.
	id1 := salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser.
	id2 := salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser.
	self deny: (id1 = id2).! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 10:31:54' prior: 50475156!
test01ListCartOfNewlyCreatedCartIsEmpty
	| id salesInterface |
	salesInterface := SalesInterface withAuthenticator: (self authenticatorWithSingleRegisteredUser) withCatalog: testObjectsFactory defaultCatalog.
	id := salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser.
	self assert: Bag new equals: (salesInterface listCartWithCartId: id).! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 10:32:02' prior: 50475248!
test05ListCartReflectsAddToCart
	| salesInterface id |
	salesInterface := SalesInterface withAuthenticator: (self authenticatorWithSingleRegisteredUser) withCatalog: testObjectsFactory defaultCatalog.
	
	id := salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser.
	salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 	1.
	self assert: (Bag with: testObjectsFactory itemSellByTheStore) equals: (salesInterface listCartWithCartId: id).
	! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 10:32:05' prior: 50475267!
test06AddToCartDoesntAffectOtherCarts
	| salesInterface id1 id2 |
	salesInterface := SalesInterface withAuthenticator: (self authenticatorWithSingleRegisteredUser) withCatalog: testObjectsFactory defaultCatalog.
	
	id1 := salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser.
	id2 := salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser.
	
	salesInterface addToCartWithCartId: id1 bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 	1.
	
	self assert: (Bag new) equals: (salesInterface listCartWithCartId: id2).
	! !

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'DW 6/12/2022 10:32:07'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'DW 6/12/2022 10:32:07'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'DW 6/12/2022 10:32:07'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'DW 6/12/2022 10:32:07'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'DW 6/12/2022 10:32:07'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'DW 6/12/2022 10:32:07'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'DW 6/12/2022 10:32:07'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'DW 6/12/2022 10:32:07'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'DW 6/12/2022 10:32:07'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'DW 6/12/2022 10:32:07'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'DW 6/12/2022 10:32:07'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'DW 6/12/2022 10:32:07'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'DW 6/12/2022 10:32:07'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'DW 6/12/2022 10:32:07'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'DW 6/12/2022 10:32:08'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'DW 6/12/2022 10:32:08'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'DW 6/12/2022 10:32:08'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'DW 6/12/2022 10:32:08'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'DW 6/12/2022 10:32:08'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'DW 6/12/2022 10:32:08'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'DW 6/12/2022 10:32:08'!
PASSED!

!methodRemoval: SalesInterfaceTest #permissiveAuthenticator stamp: 'DW 6/12/2022 10:32:19'!
permissiveAuthenticator

	^ CredentialAuthenticatorDouble withAutheticationBehavior: [:u :p | true]!
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 10:38:15'!
test07CannotListCartWithInvalidCartId
	| salesInterface |
	
	salesInterface := SalesInterface withAuthenticator: (self authenticatorWithSingleRegisteredUser) withCatalog: testObjectsFactory defaultCatalog.
	
	self should: [salesInterface listCartWithCartId: nil]
		raise: Error - MessageNotUnderstood
		withMessageText: SalesInterface invalidCartIdErrorDescription.
	! !

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'DW 6/12/2022 10:38:19'!
ERROR!
!SalesInterface class methodsFor: 'error description' stamp: 'DW 6/12/2022 10:38:28'!
invalidCartIdErrorDescription
	self shouldBeImplemented.! !
!SalesInterface class methodsFor: 'error description' stamp: 'DW 6/12/2022 10:38:46' prior: 50475611!
invalidCartIdErrorDescription
	'cart id does not reference a cart in the system'.! !

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'DW 6/12/2022 10:38:49'!
FAILURE!
!SalesInterface class methodsFor: 'error description' stamp: 'DW 6/12/2022 10:39:19' prior: 50475617!
invalidCartIdErrorDescription
	^ 'cart id does not reference a cart in the system'.! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'DW 6/12/2022 10:39:21'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'DW 6/12/2022 10:39:21'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'DW 6/12/2022 10:39:21'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'DW 6/12/2022 10:39:21'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'DW 6/12/2022 10:39:21'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'DW 6/12/2022 10:39:21'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'DW 6/12/2022 10:39:21'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'DW 6/12/2022 10:39:21'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'DW 6/12/2022 10:39:21'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'DW 6/12/2022 10:39:21'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'DW 6/12/2022 10:39:21'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'DW 6/12/2022 10:39:21'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'DW 6/12/2022 10:39:21'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'DW 6/12/2022 10:39:21'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'DW 6/12/2022 10:39:21'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'DW 6/12/2022 10:39:21'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'DW 6/12/2022 10:39:21'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'DW 6/12/2022 10:39:21'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'DW 6/12/2022 10:39:21'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'DW 6/12/2022 10:39:21'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'DW 6/12/2022 10:39:21'!
FAILURE!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'DW 6/12/2022 10:39:21'!
FAILURE!
!SalesInterface methodsFor: 'interface' stamp: 'DW 6/12/2022 10:40:10' prior: 50475174!
listCartWithCartId: cartId 
	^ (carts at: cartId ifAbsent: [self error: self class invalidCartIdErrorDescription]) books.! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'DW 6/12/2022 10:40:11'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'DW 6/12/2022 10:40:11'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'DW 6/12/2022 10:40:11'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'DW 6/12/2022 10:40:11'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'DW 6/12/2022 10:40:11'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'DW 6/12/2022 10:40:11'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'DW 6/12/2022 10:40:11'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'DW 6/12/2022 10:40:11'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'DW 6/12/2022 10:40:11'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'DW 6/12/2022 10:40:11'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'DW 6/12/2022 10:40:11'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'DW 6/12/2022 10:40:11'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'DW 6/12/2022 10:40:11'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'DW 6/12/2022 10:40:11'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'DW 6/12/2022 10:40:11'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'DW 6/12/2022 10:40:11'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'DW 6/12/2022 10:40:11'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'DW 6/12/2022 10:40:11'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'DW 6/12/2022 10:40:11'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'DW 6/12/2022 10:40:11'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'DW 6/12/2022 10:40:11'!
PASSED!
!SalesInterface methodsFor: 'interface' stamp: 'DW 6/12/2022 10:40:27'!
getCartWithId: cartId

	^ carts at: cartId ifAbsent: [self error: self class invalidCartIdErrorDescription]! !
!SalesInterface methodsFor: 'interface' stamp: 'DW 6/12/2022 10:40:27' prior: 50475706!
listCartWithCartId: cartId 
	^ (self getCartWithId: cartId) books.! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 10:42:12'!
test07CannotAddToCartWithInvalidCartId
	| salesInterface |
	
	salesInterface := SalesInterface withAuthenticator: (self authenticatorWithSingleRegisteredUser) withCatalog: testObjectsFactory defaultCatalog.
	
	self should: [salesInterface addToCartWithCartId: nil bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 1]
		raise: Error - MessageNotUnderstood
		withMessageText: SalesInterface invalidCartIdErrorDescription.
	! !

!testRun: #SalesInterfaceTest #test07CannotAddToCartWithInvalidCartId stamp: 'DW 6/12/2022 10:42:13'!
FAILURE!
!SalesInterface methodsFor: 'interface' stamp: 'DW 6/12/2022 10:42:39' prior: 50474816!
addToCartWithCartId: cartId bookIsbn: bookIsbn bookQuantity: bookQuantity 
	(self getCartWithId: cartId) add: bookQuantity of: bookIsbn.! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'DW 6/12/2022 10:42:39'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'DW 6/12/2022 10:42:39'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'DW 6/12/2022 10:42:39'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'DW 6/12/2022 10:42:39'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'DW 6/12/2022 10:42:39'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'DW 6/12/2022 10:42:39'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'DW 6/12/2022 10:42:39'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'DW 6/12/2022 10:42:39'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'DW 6/12/2022 10:42:40'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'DW 6/12/2022 10:42:40'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'DW 6/12/2022 10:42:40'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'DW 6/12/2022 10:42:40'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'DW 6/12/2022 10:42:40'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'DW 6/12/2022 10:42:40'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'DW 6/12/2022 10:42:40'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'DW 6/12/2022 10:42:40'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'DW 6/12/2022 10:42:40'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'DW 6/12/2022 10:42:40'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'DW 6/12/2022 10:42:40'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'DW 6/12/2022 10:42:40'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotAddToCartWithInvalidCartId stamp: 'DW 6/12/2022 10:42:40'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'DW 6/12/2022 10:42:40'!
PASSED!
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 10:42:58'!
test08CannotListCartWithInvalidCartId
	| salesInterface |
	
	salesInterface := SalesInterface withAuthenticator: (self authenticatorWithSingleRegisteredUser) withCatalog: testObjectsFactory defaultCatalog.
	
	self should: [salesInterface listCartWithCartId: nil]
		raise: Error - MessageNotUnderstood
		withMessageText: SalesInterface invalidCartIdErrorDescription.
	! !

!methodRemoval: SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'DW 6/12/2022 10:42:58'!
test07CannotListCartWithInvalidCartId
	| salesInterface |
	
	salesInterface := SalesInterface withAuthenticator: (self authenticatorWithSingleRegisteredUser) withCatalog: testObjectsFactory defaultCatalog.
	
	self should: [salesInterface listCartWithCartId: nil]
		raise: Error - MessageNotUnderstood
		withMessageText: SalesInterface invalidCartIdErrorDescription.
	!
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 10:43:09'!
test08CannotAddToCartWithInvalidCartId
	| salesInterface |
	
	salesInterface := SalesInterface withAuthenticator: (self authenticatorWithSingleRegisteredUser) withCatalog: testObjectsFactory defaultCatalog.
	
	self should: [salesInterface addToCartWithCartId: nil bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 1]
		raise: Error - MessageNotUnderstood
		withMessageText: SalesInterface invalidCartIdErrorDescription.
	! !

!methodRemoval: SalesInterfaceTest #test07CannotAddToCartWithInvalidCartId stamp: 'DW 6/12/2022 10:43:09'!
test07CannotAddToCartWithInvalidCartId
	| salesInterface |
	
	salesInterface := SalesInterface withAuthenticator: (self authenticatorWithSingleRegisteredUser) withCatalog: testObjectsFactory defaultCatalog.
	
	self should: [salesInterface addToCartWithCartId: nil bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 1]
		raise: Error - MessageNotUnderstood
		withMessageText: SalesInterface invalidCartIdErrorDescription.
	!
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 10:43:17'!
test07CannotListCartWithInvalidCartId
	| salesInterface |
	
	salesInterface := SalesInterface withAuthenticator: (self authenticatorWithSingleRegisteredUser) withCatalog: testObjectsFactory defaultCatalog.
	
	self should: [salesInterface listCartWithCartId: nil]
		raise: Error - MessageNotUnderstood
		withMessageText: SalesInterface invalidCartIdErrorDescription.
	! !

!methodRemoval: SalesInterfaceTest #test08CannotListCartWithInvalidCartId stamp: 'DW 6/12/2022 10:43:17'!
test08CannotListCartWithInvalidCartId
	| salesInterface |
	
	salesInterface := SalesInterface withAuthenticator: (self authenticatorWithSingleRegisteredUser) withCatalog: testObjectsFactory defaultCatalog.
	
	self should: [salesInterface listCartWithCartId: nil]
		raise: Error - MessageNotUnderstood
		withMessageText: SalesInterface invalidCartIdErrorDescription.
	!
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 10:44:34'!
test09CannotAddToCartAnItemNotSoldByTheStore
	| salesInterface |
	
	salesInterface := SalesInterface withAuthenticator: (self authenticatorWithSingleRegisteredUser) withCatalog: testObjectsFactory defaultCatalog.
	
	self should: [salesInterface addToCartWithCartId: nil bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 1]
		raise: Error - MessageNotUnderstood
		withMessageText: SalesInterface invalidCartIdErrorDescription.
	! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 10:45:52' prior: 50475985!
test09CannotAddToCartAnItemNotSoldByTheStore
	| salesInterface id |
	
	salesInterface := SalesInterface withAuthenticator: (self authenticatorWithSingleRegisteredUser) withCatalog: testObjectsFactory defaultCatalog.
	
	id := salesInterface createCart.
	
	self should: [salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemNotSellByTheStore bookQuantity: 1]
		raise: Error - MessageNotUnderstood
		withMessageText: SalesInterface itemNotInCatalogErrorDescription.
	! !

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'DW 6/12/2022 10:45:56'!
ERROR!
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 10:47:12' prior: 50476002!
test09CannotAddToCartAnItemNotSoldByTheStore
	| salesInterface id |
	
	salesInterface := SalesInterface withAuthenticator: (self authenticatorWithSingleRegisteredUser) withCatalog: testObjectsFactory defaultCatalog.
	
	id := salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser.
	
	self should: [salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemNotSellByTheStore bookQuantity: 1]
		raise: Error - MessageNotUnderstood
		withMessageText: SalesInterface itemNotInCatalogErrorDescription.
	! !

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'DW 6/12/2022 10:47:13'!
ERROR!
!SalesInterface class methodsFor: 'error description' stamp: 'DW 6/12/2022 10:47:18'!
itemNotInCatalogErrorDescription
	self shouldBeImplemented.! !
!SalesInterface class methodsFor: 'error description' stamp: 'DW 6/12/2022 10:47:36' prior: 50476048!
itemNotInCatalogErrorDescription
	^ 'book not at sale'.! !

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'DW 6/12/2022 10:47:43'!
FAILURE!
!SalesInterface class methodsFor: 'error description' stamp: 'DW 6/12/2022 10:47:57' prior: 50476054!
itemNotInCatalogErrorDescription
	^ 'book not on sale'.! !
!SalesInterface methodsFor: 'interface' stamp: 'DW 6/12/2022 10:48:37' prior: 50475814!
addToCartWithCartId: cartId bookIsbn: bookIsbn bookQuantity: bookQuantity 

	(self getCartWithId: cartId) add: bookQuantity of: bookIsbn.! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'DW 6/12/2022 10:48:37'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'DW 6/12/2022 10:48:37'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'DW 6/12/2022 10:48:37'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'DW 6/12/2022 10:48:37'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'DW 6/12/2022 10:48:37'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'DW 6/12/2022 10:48:37'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'DW 6/12/2022 10:48:37'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'DW 6/12/2022 10:48:37'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'DW 6/12/2022 10:48:37'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'DW 6/12/2022 10:48:37'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'DW 6/12/2022 10:48:37'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'DW 6/12/2022 10:48:37'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'DW 6/12/2022 10:48:37'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'DW 6/12/2022 10:48:37'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'DW 6/12/2022 10:48:37'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'DW 6/12/2022 10:48:37'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'DW 6/12/2022 10:48:37'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'DW 6/12/2022 10:48:37'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'DW 6/12/2022 10:48:37'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'DW 6/12/2022 10:48:37'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'DW 6/12/2022 10:48:37'!
PASSED!

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'DW 6/12/2022 10:48:37'!
PASSED!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'DW 6/12/2022 10:48:37'!
FAILURE!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'DW 6/12/2022 10:48:37'!
FAILURE!
!SalesInterface methodsFor: 'interface' stamp: 'DW 6/12/2022 10:56:03' prior: 50476068!
addToCartWithCartId: cartId bookIsbn: bookIsbn bookQuantity: bookQuantity 

	(catalog includes: bookIsbn) ifFalse: [self error: self class itemNotInCatalogErrorDescription].
	
	(self getCartWithId: cartId) add: bookQuantity of: bookIsbn.! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'DW 6/12/2022 10:56:04'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'DW 6/12/2022 10:56:04'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'DW 6/12/2022 10:56:04'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'DW 6/12/2022 10:56:04'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'DW 6/12/2022 10:56:04'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'DW 6/12/2022 10:56:04'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'DW 6/12/2022 10:56:04'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'DW 6/12/2022 10:56:04'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'DW 6/12/2022 10:56:04'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'DW 6/12/2022 10:56:05'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'DW 6/12/2022 10:56:05'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'DW 6/12/2022 10:56:05'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'DW 6/12/2022 10:56:05'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'DW 6/12/2022 10:56:05'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'DW 6/12/2022 10:56:05'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'DW 6/12/2022 10:56:05'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'DW 6/12/2022 10:56:05'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'DW 6/12/2022 10:56:05'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'DW 6/12/2022 10:56:05'!
ERROR!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'DW 6/12/2022 10:56:05'!
ERROR!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'DW 6/12/2022 10:56:05'!
PASSED!

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'DW 6/12/2022 10:56:05'!
FAILURE!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'DW 6/12/2022 10:56:05'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'DW 6/12/2022 10:56:09'!
ERROR!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'DW 6/12/2022 10:56:26'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'DW 6/12/2022 10:56:43'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'DW 6/12/2022 10:56:44'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'DW 6/12/2022 10:56:45'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'DW 6/12/2022 10:56:46'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'DW 6/12/2022 10:56:47'!
ERROR!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'DW 6/12/2022 10:56:47'!
ERROR!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'DW 6/12/2022 10:56:59'!
ERROR!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'DW 6/12/2022 10:56:59'!
ERROR!
!SalesInterface methodsFor: 'interface' stamp: 'DW 6/12/2022 10:57:33' prior: 50476156!
addToCartWithCartId: cartId bookIsbn: bookIsbn bookQuantity: bookQuantity 

	self halt.

	(catalog includes: bookIsbn) ifFalse: [self error: self class itemNotInCatalogErrorDescription].
	
	(self getCartWithId: cartId) add: bookQuantity of: bookIsbn.! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'DW 6/12/2022 10:57:33'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'DW 6/12/2022 10:57:33'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'DW 6/12/2022 10:57:33'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'DW 6/12/2022 10:57:33'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'DW 6/12/2022 10:57:33'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'DW 6/12/2022 10:57:33'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'DW 6/12/2022 10:57:33'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'DW 6/12/2022 10:57:33'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'DW 6/12/2022 10:57:33'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'DW 6/12/2022 10:57:33'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'DW 6/12/2022 10:57:33'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'DW 6/12/2022 10:57:33'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'DW 6/12/2022 10:57:33'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'DW 6/12/2022 10:57:33'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'DW 6/12/2022 10:57:33'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'DW 6/12/2022 10:57:33'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'DW 6/12/2022 10:57:33'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'DW 6/12/2022 10:57:33'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'DW 6/12/2022 10:57:33'!
PASSED!

(catalog includes: bookIsbn)!
!SalesInterface methodsFor: 'interface' stamp: 'DW 6/12/2022 10:59:29' prior: 50476277!
addToCartWithCartId: cartId bookIsbn: bookIsbn bookQuantity: bookQuantity 

	self halt.

	(catalog includesKey: bookIsbn) ifFalse: [self error: self class itemNotInCatalogErrorDescription].
	
	(self getCartWithId: cartId) add: bookQuantity of: bookIsbn.! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'DW 6/12/2022 10:59:30'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'DW 6/12/2022 10:59:30'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'DW 6/12/2022 10:59:30'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'DW 6/12/2022 10:59:30'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'DW 6/12/2022 10:59:30'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'DW 6/12/2022 10:59:30'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'DW 6/12/2022 10:59:30'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'DW 6/12/2022 10:59:30'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'DW 6/12/2022 10:59:30'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'DW 6/12/2022 10:59:30'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'DW 6/12/2022 10:59:30'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'DW 6/12/2022 10:59:30'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'DW 6/12/2022 10:59:31'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'DW 6/12/2022 10:59:31'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'DW 6/12/2022 10:59:31'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'DW 6/12/2022 10:59:31'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'DW 6/12/2022 10:59:31'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'DW 6/12/2022 10:59:31'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'DW 6/12/2022 10:59:31'!
PASSED!
!SalesInterface methodsFor: 'interface' stamp: 'DW 6/12/2022 10:59:40' prior: 50476352!
addToCartWithCartId: cartId bookIsbn: bookIsbn bookQuantity: bookQuantity 

	(catalog includesKey: bookIsbn) ifFalse: [self error: self class itemNotInCatalogErrorDescription].
	
	(self getCartWithId: cartId) add: bookQuantity of: bookIsbn.! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'DW 6/12/2022 10:59:42'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'DW 6/12/2022 10:59:42'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'DW 6/12/2022 10:59:42'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'DW 6/12/2022 10:59:42'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'DW 6/12/2022 10:59:42'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'DW 6/12/2022 10:59:42'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'DW 6/12/2022 10:59:42'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'DW 6/12/2022 10:59:42'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'DW 6/12/2022 10:59:42'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'DW 6/12/2022 10:59:42'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'DW 6/12/2022 10:59:42'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'DW 6/12/2022 10:59:42'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'DW 6/12/2022 10:59:42'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'DW 6/12/2022 10:59:42'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'DW 6/12/2022 10:59:42'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'DW 6/12/2022 10:59:42'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'DW 6/12/2022 10:59:42'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'DW 6/12/2022 10:59:42'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'DW 6/12/2022 10:59:42'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'DW 6/12/2022 10:59:42'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'DW 6/12/2022 10:59:42'!
PASSED!

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'DW 6/12/2022 10:59:42'!
PASSED!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'DW 6/12/2022 10:59:42'!
PASSED!
!SalesInterface methodsFor: 'interface' stamp: 'DW 6/12/2022 11:00:05'!
assertBookInCatalog: bookIsbn

	^ (catalog includesKey: bookIsbn) ifFalse: [self error: self class itemNotInCatalogErrorDescription]! !
!SalesInterface methodsFor: 'interface' stamp: 'DW 6/12/2022 11:00:05' prior: 50476426!
addToCartWithCartId: cartId bookIsbn: bookIsbn bookQuantity: bookQuantity 

	self assertBookInCatalog: bookIsbn.
	
	(self getCartWithId: cartId) add: bookQuantity of: bookIsbn.! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 11:02:33'!
test10AddToCartQuantityMustBeANaturalNumber
	| salesInterface id |
	
	salesInterface := SalesInterface withAuthenticator: (self authenticatorWithSingleRegisteredUser) withCatalog: testObjectsFactory defaultCatalog.
	
	id := salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser.
	
	self should: [salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemNotSellByTheStore bookQuantity: 1]
		raise: Error - MessageNotUnderstood
		withMessageText: SalesInterface itemNotInCatalogErrorDescription.
	! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 11:12:02'!
test10AddToCartQuantityMustBeAPositiveNumber
	| salesInterface id |
	
	salesInterface := SalesInterface withAuthenticator: (self authenticatorWithSingleRegisteredUser) withCatalog: testObjectsFactory defaultCatalog.
	
	id := salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser.
	
	self should: [salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemNotSellByTheStore bookQuantity: -1]
		raise: Error - MessageNotUnderstood
		withMessageText: SalesInterface itemNotInCatalogErrorDescription.
	! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 11:12:34' prior: 50476548!
test10AddToCartQuantityMustBeAPositiveNumber
	| salesInterface id |
	
	salesInterface := SalesInterface withAuthenticator: (self authenticatorWithSingleRegisteredUser) withCatalog: testObjectsFactory defaultCatalog.
	
	id := salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser.
	
	self should: [salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemNotSellByTheStore bookQuantity: -1]
		raise: Error - MessageNotUnderstood
		withMessageText: SalesInterface quantityNotAPositiveIntegerErrorDescription.
	! !

!testRun: #SalesInterfaceTest #test10AddToCartQuantityMustBeAPositiveNumber stamp: 'DW 6/12/2022 11:12:38'!
ERROR!
!SalesInterface class methodsFor: 'error description' stamp: 'DW 6/12/2022 11:12:44'!
quantityNotAPositiveIntegerErrorDescription
	self shouldBeImplemented.! !
!SalesInterface class methodsFor: 'error description' stamp: 'DW 6/12/2022 11:13:09' prior: 50476592!
quantityNotAPositiveIntegerErrorDescription
	^ 'quantity to add to a cart of an item must be a positive integer'. ! !

!testRun: #SalesInterfaceTest #test10AddToCartQuantityMustBeAPositiveNumber stamp: 'DW 6/12/2022 11:13:11'!
FAILURE!
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 11:13:22' prior: 50476568!
test10AddToCartQuantityMustBeAPositiveNumber
	| salesInterface id |
	
	salesInterface := SalesInterface withAuthenticator: (self authenticatorWithSingleRegisteredUser) withCatalog: testObjectsFactory defaultCatalog.
	
	id := salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser.
	
	self should: [salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: -1]
		raise: Error - MessageNotUnderstood
		withMessageText: SalesInterface quantityNotAPositiveIntegerErrorDescription.
	! !

!testRun: #SalesInterfaceTest #test10AddToCartQuantityMustBeAPositiveNumber stamp: 'DW 6/12/2022 11:13:23'!
FAILURE!
!SalesInterface methodsFor: 'interface' stamp: 'DW 6/12/2022 11:14:15' prior: 50476520!
addToCartWithCartId: cartId bookIsbn: bookIsbn bookQuantity: bookQuantity 

	self assertBookInCatalog: bookIsbn.
	bookQuantity <= 0 ifTrue: [self error: self class quantityNotAPositiveIntegerErrorDescription].
	
	(self getCartWithId: cartId) add: bookQuantity of: bookIsbn.! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'DW 6/12/2022 11:14:16'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'DW 6/12/2022 11:14:16'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'DW 6/12/2022 11:14:16'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'DW 6/12/2022 11:14:16'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'DW 6/12/2022 11:14:16'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'DW 6/12/2022 11:14:16'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'DW 6/12/2022 11:14:16'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'DW 6/12/2022 11:14:16'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'DW 6/12/2022 11:14:16'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'DW 6/12/2022 11:14:16'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'DW 6/12/2022 11:14:16'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'DW 6/12/2022 11:14:16'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'DW 6/12/2022 11:14:16'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'DW 6/12/2022 11:14:16'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'DW 6/12/2022 11:14:16'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'DW 6/12/2022 11:14:16'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'DW 6/12/2022 11:14:16'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'DW 6/12/2022 11:14:16'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'DW 6/12/2022 11:14:16'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'DW 6/12/2022 11:14:16'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'DW 6/12/2022 11:14:16'!
PASSED!

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'DW 6/12/2022 11:14:16'!
PASSED!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'DW 6/12/2022 11:14:16'!
PASSED!

!testRun: #SalesInterfaceTest #test10AddToCartQuantityMustBeANaturalNumber stamp: 'DW 6/12/2022 11:14:16'!
PASSED!

!testRun: #SalesInterfaceTest #test10AddToCartQuantityMustBeAPositiveNumber stamp: 'DW 6/12/2022 11:14:16'!
PASSED!

!methodRemoval: SalesInterfaceTest #test10AddToCartQuantityMustBeANaturalNumber stamp: 'DW 6/12/2022 11:14:27'!
test10AddToCartQuantityMustBeANaturalNumber
	| salesInterface id |
	
	salesInterface := SalesInterface withAuthenticator: (self authenticatorWithSingleRegisteredUser) withCatalog: testObjectsFactory defaultCatalog.
	
	id := salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser.
	
	self should: [salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemNotSellByTheStore bookQuantity: 1]
		raise: Error - MessageNotUnderstood
		withMessageText: SalesInterface itemNotInCatalogErrorDescription.
	!
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 11:14:48'!
test11AddToCartQuantityMustBeAnInteger
	| salesInterface id |
	
	salesInterface := SalesInterface withAuthenticator: (self authenticatorWithSingleRegisteredUser) withCatalog: testObjectsFactory defaultCatalog.
	
	id := salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser.
	
	self should: [salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 1.5]
		raise: Error - MessageNotUnderstood
		withMessageText: SalesInterface quantityNotAPositiveIntegerErrorDescription.
	! !

!testRun: #SalesInterfaceTest #test11AddToCartQuantityMustBeAnInteger stamp: 'DW 6/12/2022 11:14:50'!
FAILURE!
!SalesInterface methodsFor: 'interface' stamp: 'DW 6/12/2022 11:16:48' prior: 50476633!
addToCartWithCartId: cartId bookIsbn: bookIsbn bookQuantity: bookQuantity 

	self assertBookInCatalog: bookIsbn.
	(bookQuantity <= 0 or: [(bookQuantity isKindOf: Integer) not]) ifTrue: [self error: self class quantityNotAPositiveIntegerErrorDescription].
	
	(self getCartWithId: cartId) add: bookQuantity of: bookIsbn.! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'DW 6/12/2022 11:16:50'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'DW 6/12/2022 11:16:50'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'DW 6/12/2022 11:16:50'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'DW 6/12/2022 11:16:50'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'DW 6/12/2022 11:16:50'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'DW 6/12/2022 11:16:50'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'DW 6/12/2022 11:16:50'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'DW 6/12/2022 11:16:50'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'DW 6/12/2022 11:16:50'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'DW 6/12/2022 11:16:50'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'DW 6/12/2022 11:16:50'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'DW 6/12/2022 11:16:50'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'DW 6/12/2022 11:16:50'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'DW 6/12/2022 11:16:50'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'DW 6/12/2022 11:16:50'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'DW 6/12/2022 11:16:50'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'DW 6/12/2022 11:16:50'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'DW 6/12/2022 11:16:50'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'DW 6/12/2022 11:16:50'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'DW 6/12/2022 11:16:50'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'DW 6/12/2022 11:16:50'!
PASSED!

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'DW 6/12/2022 11:16:50'!
PASSED!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'DW 6/12/2022 11:16:50'!
PASSED!

!testRun: #SalesInterfaceTest #test10AddToCartQuantityMustBeAPositiveNumber stamp: 'DW 6/12/2022 11:16:50'!
PASSED!

!testRun: #SalesInterfaceTest #test11AddToCartQuantityMustBeAnInteger stamp: 'DW 6/12/2022 11:16:50'!
PASSED!
!SalesInterface methodsFor: 'interface' stamp: 'DW 6/12/2022 11:17:10'!
assertQuantityIsAPositiveInteger: bookQuantity

	^ (bookQuantity <= 0 or: [(bookQuantity isKindOf: Integer) not]) ifTrue: [self error: self class quantityNotAPositiveIntegerErrorDescription]! !
!SalesInterface methodsFor: 'interface' stamp: 'DW 6/12/2022 11:17:10' prior: 50476773!
addToCartWithCartId: cartId bookIsbn: bookIsbn bookQuantity: bookQuantity 

	self assertBookInCatalog: bookIsbn.
	self assertQuantityIsAPositiveInteger: bookQuantity.
	
	(self getCartWithId: cartId) add: bookQuantity of: bookIsbn.! !
!SalesInterface methodsFor: 'interface' stamp: 'DW 6/12/2022 11:17:22' prior: 50476869!
assertQuantityIsAPositiveInteger: bookQuantity

	^ (bookQuantity <= 0 or: [(bookQuantity isKindOf: Integer) not]) ifTrue: [self error: self class quantityNotAPositiveIntegerErrorDescription].! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 11:18:18'!
test12ListPurchasesOfNewCartIsEmpty
	| salesInterface id |
	
	salesInterface := SalesInterface withAuthenticator: (self authenticatorWithSingleRegisteredUser) withCatalog: testObjectsFactory defaultCatalog.
	
	id := salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser.
	
	self should: [salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 1.5]
		raise: Error - MessageNotUnderstood
		withMessageText: SalesInterface quantityNotAPositiveIntegerErrorDescription.
	! !

----QUIT----(12 June 2022 11:18:33) CuisUniversity-5096.image priorSource: 4557982!

----STARTUP---- (12 June 2022 11:24:53) as /home/charles/uni/inge1/linux64/CuisUniversity-5096.image!

!SalesInterfaceTest methodsFor: 'tests' stamp: 'CMS 6/12/2022 11:30:22' prior: 50476898!
test12ListPurchasesOfNewCartIsEmpty
	| salesInterface |
	
	salesInterface := SalesInterface withAuthenticator: (self authenticatorWithSingleRegisteredUser) withCatalog: testObjectsFactory defaultCatalog.

	self assert: Bag new equals: (salesInterface listPurchasesWithClientId: self validUser password: self passwordOfValidUser).! !

!testRun: #SalesInterfaceTest #test12ListPurchasesOfNewCartIsEmpty stamp: 'CMS 6/12/2022 11:30:43'!
ERROR!
!SalesInterface methodsFor: 'interface' stamp: 'CMS 6/12/2022 11:30:51'!
listPurchasesWithClientId: aString password: aString2 
	self shouldBeImplemented.! !
!SalesInterface methodsFor: 'interface' stamp: 'CMS 6/12/2022 11:30:55' prior: 50476941!
listPurchasesWithClientId: aString password: aString2 
	^Bag new.! !

!testRun: #SalesInterfaceTest #test12ListPurchasesOfNewCartIsEmpty stamp: 'CMS 6/12/2022 11:31:21'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'CMS 6/12/2022 11:31:21'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'CMS 6/12/2022 11:31:21'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'CMS 6/12/2022 11:31:21'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'CMS 6/12/2022 11:31:21'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'CMS 6/12/2022 11:31:21'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'CMS 6/12/2022 11:31:21'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'CMS 6/12/2022 11:31:21'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'CMS 6/12/2022 11:31:21'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'CMS 6/12/2022 11:31:21'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'CMS 6/12/2022 11:31:21'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'CMS 6/12/2022 11:31:21'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'CMS 6/12/2022 11:31:21'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'CMS 6/12/2022 11:31:21'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'CMS 6/12/2022 11:31:21'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'CMS 6/12/2022 11:31:21'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'CMS 6/12/2022 11:31:21'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'CMS 6/12/2022 11:31:21'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'CMS 6/12/2022 11:31:21'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'CMS 6/12/2022 11:31:21'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'CMS 6/12/2022 11:31:21'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'CMS 6/12/2022 11:31:21'!
PASSED!

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'CMS 6/12/2022 11:31:21'!
PASSED!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'CMS 6/12/2022 11:31:21'!
PASSED!

!testRun: #SalesInterfaceTest #test10AddToCartQuantityMustBeAPositiveNumber stamp: 'CMS 6/12/2022 11:31:21'!
PASSED!

!testRun: #SalesInterfaceTest #test11AddToCartQuantityMustBeAnInteger stamp: 'CMS 6/12/2022 11:31:21'!
PASSED!

!testRun: #SalesInterfaceTest #test12ListPurchasesOfNewCartIsEmpty stamp: 'CMS 6/12/2022 11:31:21'!
PASSED!

!testRun: #SalesInterfaceTest #test12ListPurchasesOfNewCartIsEmpty stamp: 'CMS 6/12/2022 11:31:27'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'CMS 6/12/2022 11:31:27'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'CMS 6/12/2022 11:31:27'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'CMS 6/12/2022 11:31:27'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'CMS 6/12/2022 11:31:27'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'CMS 6/12/2022 11:31:27'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'CMS 6/12/2022 11:31:27'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'CMS 6/12/2022 11:31:27'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'CMS 6/12/2022 11:31:27'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'CMS 6/12/2022 11:31:27'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'CMS 6/12/2022 11:31:27'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'CMS 6/12/2022 11:31:27'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'CMS 6/12/2022 11:31:27'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'CMS 6/12/2022 11:31:27'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'CMS 6/12/2022 11:31:27'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'CMS 6/12/2022 11:31:27'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'CMS 6/12/2022 11:31:27'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'CMS 6/12/2022 11:31:27'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'CMS 6/12/2022 11:31:27'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'CMS 6/12/2022 11:31:27'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'CMS 6/12/2022 11:31:27'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'CMS 6/12/2022 11:31:27'!
PASSED!

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'CMS 6/12/2022 11:31:27'!
PASSED!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'CMS 6/12/2022 11:31:27'!
PASSED!

!testRun: #SalesInterfaceTest #test10AddToCartQuantityMustBeAPositiveNumber stamp: 'CMS 6/12/2022 11:31:27'!
PASSED!

!testRun: #SalesInterfaceTest #test11AddToCartQuantityMustBeAnInteger stamp: 'CMS 6/12/2022 11:31:27'!
PASSED!

!testRun: #SalesInterfaceTest #test12ListPurchasesOfNewCartIsEmpty stamp: 'CMS 6/12/2022 11:31:27'!
PASSED!

!testRun: #SalesInterfaceTest #test12ListPurchasesOfNewCartIsEmpty stamp: 'CMS 6/12/2022 11:31:33'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'CMS 6/12/2022 11:31:33'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'CMS 6/12/2022 11:31:33'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'CMS 6/12/2022 11:31:33'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'CMS 6/12/2022 11:31:33'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'CMS 6/12/2022 11:31:33'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'CMS 6/12/2022 11:31:33'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'CMS 6/12/2022 11:31:33'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'CMS 6/12/2022 11:31:33'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'CMS 6/12/2022 11:31:33'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'CMS 6/12/2022 11:31:33'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'CMS 6/12/2022 11:31:33'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'CMS 6/12/2022 11:31:33'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'CMS 6/12/2022 11:31:33'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'CMS 6/12/2022 11:31:33'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'CMS 6/12/2022 11:31:33'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'CMS 6/12/2022 11:31:33'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'CMS 6/12/2022 11:31:33'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'CMS 6/12/2022 11:31:33'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'CMS 6/12/2022 11:31:33'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'CMS 6/12/2022 11:31:33'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'CMS 6/12/2022 11:31:33'!
PASSED!

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'CMS 6/12/2022 11:31:33'!
PASSED!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'CMS 6/12/2022 11:31:33'!
PASSED!

!testRun: #SalesInterfaceTest #test10AddToCartQuantityMustBeAPositiveNumber stamp: 'CMS 6/12/2022 11:31:33'!
PASSED!

!testRun: #SalesInterfaceTest #test11AddToCartQuantityMustBeAnInteger stamp: 'CMS 6/12/2022 11:31:33'!
PASSED!

!testRun: #SalesInterfaceTest #test12ListPurchasesOfNewCartIsEmpty stamp: 'CMS 6/12/2022 11:31:33'!
PASSED!

!testRun: #SalesInterfaceTest #test12ListPurchasesOfNewCartIsEmpty stamp: 'CMS 6/12/2022 11:31:40'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'CMS 6/12/2022 11:31:40'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'CMS 6/12/2022 11:31:40'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'CMS 6/12/2022 11:31:40'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'CMS 6/12/2022 11:31:40'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'CMS 6/12/2022 11:31:40'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'CMS 6/12/2022 11:31:40'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'CMS 6/12/2022 11:31:40'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'CMS 6/12/2022 11:31:40'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'CMS 6/12/2022 11:31:40'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'CMS 6/12/2022 11:31:40'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'CMS 6/12/2022 11:31:40'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'CMS 6/12/2022 11:31:40'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'CMS 6/12/2022 11:31:40'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'CMS 6/12/2022 11:31:40'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'CMS 6/12/2022 11:31:40'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'CMS 6/12/2022 11:31:40'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'CMS 6/12/2022 11:31:40'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'CMS 6/12/2022 11:31:40'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'CMS 6/12/2022 11:31:40'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'CMS 6/12/2022 11:31:40'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'CMS 6/12/2022 11:31:40'!
PASSED!

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'CMS 6/12/2022 11:31:40'!
PASSED!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'CMS 6/12/2022 11:31:40'!
PASSED!

!testRun: #SalesInterfaceTest #test10AddToCartQuantityMustBeAPositiveNumber stamp: 'CMS 6/12/2022 11:31:40'!
PASSED!

!testRun: #SalesInterfaceTest #test11AddToCartQuantityMustBeAnInteger stamp: 'CMS 6/12/2022 11:31:40'!
PASSED!

!testRun: #SalesInterfaceTest #test12ListPurchasesOfNewCartIsEmpty stamp: 'CMS 6/12/2022 11:31:40'!
PASSED!
!SalesInterfaceTest methodsFor: 'tests' stamp: 'CMS 6/12/2022 11:32:53'!
test12ListPurchasesOfIvalidUserFails
	| salesInterface |
	
	salesInterface := SalesInterface withAuthenticator: (self authenticatorWithSingleRegisteredUser) withCatalog: testObjectsFactory defaultCatalog.

	self should: [salesInterface listPurchasesWithClientId: self validUser password: self invalidPasswordOfValidUser]
		raise: Error - MessageNotUnderstood 
		withMessageText: SalesInterface invalidCredentialsErrorDescription.! !

!testRun: #SalesInterfaceTest #test12ListPurchasesOfIvalidUserFails stamp: 'CMS 6/12/2022 11:32:54'!
FAILURE!
!SalesInterfaceTest methodsFor: 'tests' stamp: 'CMS 6/12/2022 11:33:03'!
test13ListPurchasesOfNewCartIsEmpty
	| salesInterface |
	
	salesInterface := SalesInterface withAuthenticator: (self authenticatorWithSingleRegisteredUser) withCatalog: testObjectsFactory defaultCatalog.

	self assert: Bag new equals: (salesInterface listPurchasesWithClientId: self validUser password: self passwordOfValidUser).! !

!methodRemoval: SalesInterfaceTest #test12ListPurchasesOfNewCartIsEmpty stamp: 'CMS 6/12/2022 11:33:03'!
test12ListPurchasesOfNewCartIsEmpty
	| salesInterface |
	
	salesInterface := SalesInterface withAuthenticator: (self authenticatorWithSingleRegisteredUser) withCatalog: testObjectsFactory defaultCatalog.

	self assert: Bag new equals: (salesInterface listPurchasesWithClientId: self validUser password: self passwordOfValidUser).!

!testRun: #SalesInterfaceTest #test13ListPurchasesOfNewCartIsEmpty stamp: 'CMS 6/12/2022 11:33:06'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'CMS 6/12/2022 11:33:06'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'CMS 6/12/2022 11:33:06'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'CMS 6/12/2022 11:33:06'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'CMS 6/12/2022 11:33:06'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'CMS 6/12/2022 11:33:06'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'CMS 6/12/2022 11:33:06'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'CMS 6/12/2022 11:33:06'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'CMS 6/12/2022 11:33:06'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'CMS 6/12/2022 11:33:06'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'CMS 6/12/2022 11:33:06'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'CMS 6/12/2022 11:33:06'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'CMS 6/12/2022 11:33:06'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'CMS 6/12/2022 11:33:06'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'CMS 6/12/2022 11:33:06'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'CMS 6/12/2022 11:33:06'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'CMS 6/12/2022 11:33:06'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'CMS 6/12/2022 11:33:06'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'CMS 6/12/2022 11:33:06'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'CMS 6/12/2022 11:33:06'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'CMS 6/12/2022 11:33:06'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'CMS 6/12/2022 11:33:06'!
PASSED!

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'CMS 6/12/2022 11:33:06'!
PASSED!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'CMS 6/12/2022 11:33:06'!
PASSED!

!testRun: #SalesInterfaceTest #test10AddToCartQuantityMustBeAPositiveNumber stamp: 'CMS 6/12/2022 11:33:06'!
PASSED!

!testRun: #SalesInterfaceTest #test11AddToCartQuantityMustBeAnInteger stamp: 'CMS 6/12/2022 11:33:06'!
PASSED!

!testRun: #SalesInterfaceTest #test12ListPurchasesOfIvalidUserFails stamp: 'CMS 6/12/2022 11:33:06'!
FAILURE!

!testRun: #SalesInterfaceTest #test13ListPurchasesOfNewCartIsEmpty stamp: 'CMS 6/12/2022 11:33:06'!
PASSED!

!testRun: #SalesInterfaceTest #test12ListPurchasesOfIvalidUserFails stamp: 'CMS 6/12/2022 11:33:06'!
FAILURE!
!SalesInterface methodsFor: 'interface' stamp: 'CMS 6/12/2022 11:33:36' prior: 50476947!
listPurchasesWithClientId: aString password: aString2
	^Bag new.! !
!SalesInterface methodsFor: 'interface' stamp: 'CMS 6/12/2022 11:34:00' prior: 50477461!
listPurchasesWithClientId: clientId password: password
	(credentialAuthenticator password: password isValidForClientId: clientId) ifFalse: [self error: self class invalidCredentialsErrorDescription].
	^Bag new.! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'CMS 6/12/2022 11:34:01'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'CMS 6/12/2022 11:34:01'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'CMS 6/12/2022 11:34:01'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'CMS 6/12/2022 11:34:01'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'CMS 6/12/2022 11:34:01'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'CMS 6/12/2022 11:34:01'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'CMS 6/12/2022 11:34:01'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'CMS 6/12/2022 11:34:01'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'CMS 6/12/2022 11:34:01'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'CMS 6/12/2022 11:34:01'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'CMS 6/12/2022 11:34:01'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'CMS 6/12/2022 11:34:01'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'CMS 6/12/2022 11:34:01'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'CMS 6/12/2022 11:34:01'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'CMS 6/12/2022 11:34:01'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'CMS 6/12/2022 11:34:01'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'CMS 6/12/2022 11:34:01'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'CMS 6/12/2022 11:34:01'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'CMS 6/12/2022 11:34:01'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'CMS 6/12/2022 11:34:01'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'CMS 6/12/2022 11:34:01'!
PASSED!

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'CMS 6/12/2022 11:34:01'!
PASSED!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'CMS 6/12/2022 11:34:01'!
PASSED!

!testRun: #SalesInterfaceTest #test10AddToCartQuantityMustBeAPositiveNumber stamp: 'CMS 6/12/2022 11:34:01'!
PASSED!

!testRun: #SalesInterfaceTest #test11AddToCartQuantityMustBeAnInteger stamp: 'CMS 6/12/2022 11:34:01'!
PASSED!

!testRun: #SalesInterfaceTest #test12ListPurchasesOfIvalidUserFails stamp: 'CMS 6/12/2022 11:34:01'!
PASSED!

!testRun: #SalesInterfaceTest #test13ListPurchasesOfNewCartIsEmpty stamp: 'CMS 6/12/2022 11:34:01'!
PASSED!
!SalesInterface methodsFor: 'interface' stamp: 'CMS 6/12/2022 11:34:41'!
authenticateClientWithId: password andPassword: clientId

	^ (credentialAuthenticator password: password isValidForClientId: clientId) ifFalse: [self error: self class invalidCredentialsErrorDescription]! !
!SalesInterface methodsFor: 'interface' stamp: 'CMS 6/12/2022 11:34:41' prior: 50474823!
createCartWithClientId: clientId password: password 
	self authenticateClientWithId: password andPassword: clientId.
	lastId := lastId + 1.
	carts at: lastId put: (Cart acceptingItemsOf: catalog).
	^ lastId! !
!SalesInterface methodsFor: 'interface' stamp: 'CMS 6/12/2022 11:34:41' prior: 50477466!
listPurchasesWithClientId: clientId password: password
	self authenticateClientWithId: password andPassword: clientId.
	^Bag new.! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'CMS 6/12/2022 11:34:45'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'CMS 6/12/2022 11:34:45'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'CMS 6/12/2022 11:34:45'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'CMS 6/12/2022 11:34:45'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'CMS 6/12/2022 11:34:45'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'CMS 6/12/2022 11:34:45'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'CMS 6/12/2022 11:34:45'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'CMS 6/12/2022 11:34:45'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'CMS 6/12/2022 11:34:45'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'CMS 6/12/2022 11:34:45'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'CMS 6/12/2022 11:34:45'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'CMS 6/12/2022 11:34:45'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'CMS 6/12/2022 11:34:45'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'CMS 6/12/2022 11:34:45'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'CMS 6/12/2022 11:34:45'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'CMS 6/12/2022 11:34:45'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'CMS 6/12/2022 11:34:45'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'CMS 6/12/2022 11:34:45'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'CMS 6/12/2022 11:34:45'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'CMS 6/12/2022 11:34:45'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'CMS 6/12/2022 11:34:45'!
PASSED!

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'CMS 6/12/2022 11:34:45'!
PASSED!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'CMS 6/12/2022 11:34:45'!
PASSED!

!testRun: #SalesInterfaceTest #test10AddToCartQuantityMustBeAPositiveNumber stamp: 'CMS 6/12/2022 11:34:45'!
PASSED!

!testRun: #SalesInterfaceTest #test11AddToCartQuantityMustBeAnInteger stamp: 'CMS 6/12/2022 11:34:45'!
PASSED!

!testRun: #SalesInterfaceTest #test12ListPurchasesOfIvalidUserFails stamp: 'CMS 6/12/2022 11:34:45'!
PASSED!

!testRun: #SalesInterfaceTest #test13ListPurchasesOfNewCartIsEmpty stamp: 'CMS 6/12/2022 11:34:45'!
PASSED!
!SalesInterfaceTest methodsFor: 'tests' stamp: 'CMS 6/12/2022 11:36:42'!
test13ListPurchasesAffectedByCheckout
	| salesInterface id |
	
	salesInterface := SalesInterface withAuthenticator: (self authenticatorWithSingleRegisteredUser) withCatalog: testObjectsFactory defaultCatalog.
	
	id := salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser.

	self assert: Bag new equals: (salesInterface listPurchasesWithClientId: self validUser password: self passwordOfValidUser).! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'CMS 6/12/2022 11:43:41' prior: 50477684!
test13ListPurchasesAffectedByCheckout
	| salesInterface id |
	
	salesInterface := SalesInterface withAuthenticator: (self authenticatorWithSingleRegisteredUser) withCatalog: testObjectsFactory defaultCatalog.
	
	id := salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser.

	salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 1.
	
	salesInterface checkOutCartWithCartId: id ccn: '0123456789012345' cced: (GregorianMonthOfYear juneOf: 2024) cco: 'Carlos Miguel Soto'.! !

!testRun: #SalesInterfaceTest #test13ListPurchasesAffectedByCheckout stamp: 'CMS 6/12/2022 11:43:46'!
ERROR!
!SalesInterfaceTest methodsFor: 'tests' stamp: 'CMS 6/12/2022 11:44:59' prior: 50477701!
test13ListPurchasesAffectedByCheckout
	| salesInterface id |
	
	salesInterface := SalesInterface withAuthenticator: (self authenticatorWithSingleRegisteredUser) withCatalog: testObjectsFactory defaultCatalog.
	
	id := salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser.

	salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 1.
	
	salesInterface checkOutCartWithCartId: id ccn: '0123456789012345' cced: (GregorianMonthOfYear juneOf: 2024) cco: 'Carlos Miguel Soto'.
	
	self assert: (Bag with: testObjectsFactory itemSellByTheStore) equals: (salesInterface listPurchasesWithClientId: self validUser password: self passwordOfValidUser).! !

!testRun: #SalesInterfaceTest #test13ListPurchasesAffectedByCheckout stamp: 'CMS 6/12/2022 11:45:03'!
ERROR!
!SalesInterface methodsFor: 'interface' stamp: 'CMS 6/12/2022 11:45:14'!
checkOutCartWithCartId: aSmallInteger ccn: aString cced: aGregorianMonthOfYear cco: aString4 
	self shouldBeImplemented.! !
!SalesInterface methodsFor: 'interface' stamp: 'CMS 6/12/2022 11:47:17' prior: 50477754!
checkOutCartWithCartId: cartId ccn: creditCardNumber cced: expirationDate cco: ownerName! !

!testRun: #SalesInterfaceTest #test13ListPurchasesAffectedByCheckout stamp: 'CMS 6/12/2022 11:47:26'!
FAILURE!

!classDefinition: #SalesInterface category: 'TusLibros' stamp: 'CMS 6/12/2022 11:48:35'!
Object subclass: #SalesInterface
	instanceVariableNames: 'lastId credentialAuthenticator carts catalog purchases'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!SalesInterface methodsFor: 'interface' stamp: 'CMS 6/12/2022 11:48:34' prior: 50477586!
listPurchasesWithClientId: clientId password: password
	self authenticateClientWithId: password andPassword: clientId.
	^purchases at: clientId.! !
!SalesInterface methodsFor: 'initialize' stamp: 'CMS 6/12/2022 11:49:11' prior: 50474807!
initializeWithAuthenticator: aCredentialAuthenticator withCatalog: aCatalog 
	credentialAuthenticator := aCredentialAuthenticator.
	catalog := aCatalog.
	lastId := 0.
	carts := Dictionary new.
	purchases := Dictionary new.! !
!SalesInterface methodsFor: 'interface' stamp: 'CMS 6/12/2022 11:50:34' prior: 50477761!
checkOutCartWithCartId: cartId ccn: creditCardNumber cced: expirationDate cco: ownerName! !

!classDefinition: #SalesInterface category: 'TusLibros' stamp: 'CMS 6/12/2022 11:51:35'!
Object subclass: #SalesInterface
	instanceVariableNames: 'lastId credentialAuthenticator carts catalog purchases clientCart'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!SalesInterface methodsFor: 'interface' stamp: 'CMS 6/12/2022 11:51:27' prior: 50477779!
listPurchasesWithClientId: clientId password: password
	self authenticateClientWithId: password andPassword: clientId.
	^(clientCart at: clientId ifAbsent: [^Bag new]) books.! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'CMS 6/12/2022 11:51:47'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'CMS 6/12/2022 11:51:47'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'CMS 6/12/2022 11:51:47'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'CMS 6/12/2022 11:51:47'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'CMS 6/12/2022 11:51:47'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'CMS 6/12/2022 11:51:47'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'CMS 6/12/2022 11:51:47'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'CMS 6/12/2022 11:51:47'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'CMS 6/12/2022 11:51:47'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'CMS 6/12/2022 11:51:47'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'CMS 6/12/2022 11:51:47'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'CMS 6/12/2022 11:51:47'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'CMS 6/12/2022 11:51:47'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'CMS 6/12/2022 11:51:47'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'CMS 6/12/2022 11:51:47'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'CMS 6/12/2022 11:51:47'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'CMS 6/12/2022 11:51:47'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'CMS 6/12/2022 11:51:47'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'CMS 6/12/2022 11:51:47'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'CMS 6/12/2022 11:51:47'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'CMS 6/12/2022 11:51:47'!
PASSED!

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'CMS 6/12/2022 11:51:47'!
PASSED!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'CMS 6/12/2022 11:51:47'!
PASSED!

!testRun: #SalesInterfaceTest #test10AddToCartQuantityMustBeAPositiveNumber stamp: 'CMS 6/12/2022 11:51:47'!
PASSED!

!testRun: #SalesInterfaceTest #test11AddToCartQuantityMustBeAnInteger stamp: 'CMS 6/12/2022 11:51:47'!
PASSED!

!testRun: #SalesInterfaceTest #test12ListPurchasesOfIvalidUserFails stamp: 'CMS 6/12/2022 11:51:47'!
PASSED!

!testRun: #SalesInterfaceTest #test13ListPurchasesAffectedByCheckout stamp: 'CMS 6/12/2022 11:51:47'!
ERROR!

!testRun: #SalesInterfaceTest #test13ListPurchasesOfNewCartIsEmpty stamp: 'CMS 6/12/2022 11:51:47'!
ERROR!
!SalesInterface methodsFor: 'interface' stamp: 'CMS 6/12/2022 11:52:19' prior: 50477576!
createCartWithClientId: clientId password: password 
	self authenticateClientWithId: password andPassword: clientId.
	lastId := lastId + 1.
	carts at: lastId put: (Cart acceptingItemsOf: catalog).	clientCart at: clientId  put: (carts at: lastId )
	^ lastId! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'CMS 6/12/2022 11:52:20'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'CMS 6/12/2022 11:52:20'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'CMS 6/12/2022 11:52:20'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'CMS 6/12/2022 11:52:20'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'CMS 6/12/2022 11:52:20'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'CMS 6/12/2022 11:52:20'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'CMS 6/12/2022 11:52:20'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'CMS 6/12/2022 11:52:20'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'CMS 6/12/2022 11:52:20'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'CMS 6/12/2022 11:52:20'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'CMS 6/12/2022 11:52:20'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'CMS 6/12/2022 11:52:20'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'CMS 6/12/2022 11:52:20'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'CMS 6/12/2022 11:52:20'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'CMS 6/12/2022 11:52:20'!
ERROR!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'CMS 6/12/2022 11:52:20'!
ERROR!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'CMS 6/12/2022 11:52:20'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'CMS 6/12/2022 11:52:20'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'CMS 6/12/2022 11:52:20'!
ERROR!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'CMS 6/12/2022 11:52:20'!
ERROR!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'CMS 6/12/2022 11:52:20'!
PASSED!

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'CMS 6/12/2022 11:52:20'!
PASSED!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'CMS 6/12/2022 11:52:20'!
ERROR!

!testRun: #SalesInterfaceTest #test10AddToCartQuantityMustBeAPositiveNumber stamp: 'CMS 6/12/2022 11:52:20'!
ERROR!

!testRun: #SalesInterfaceTest #test11AddToCartQuantityMustBeAnInteger stamp: 'CMS 6/12/2022 11:52:20'!
ERROR!

!testRun: #SalesInterfaceTest #test12ListPurchasesOfIvalidUserFails stamp: 'CMS 6/12/2022 11:52:20'!
PASSED!

!testRun: #SalesInterfaceTest #test13ListPurchasesAffectedByCheckout stamp: 'CMS 6/12/2022 11:52:20'!
ERROR!

!testRun: #SalesInterfaceTest #test13ListPurchasesOfNewCartIsEmpty stamp: 'CMS 6/12/2022 11:52:20'!
ERROR!
!SalesInterface methodsFor: 'interface' stamp: 'CMS 6/12/2022 11:52:26' prior: 50477915!
createCartWithClientId: clientId password: password 
	self authenticateClientWithId: password andPassword: clientId.
	lastId := lastId + 1.
	carts at: lastId put: (Cart acceptingItemsOf: catalog).	clientCart at: clientId  put: (carts at: lastId ).
	^ lastId! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'CMS 6/12/2022 11:52:27'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'CMS 6/12/2022 11:52:27'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'CMS 6/12/2022 11:52:27'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'CMS 6/12/2022 11:52:27'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'CMS 6/12/2022 11:52:27'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'CMS 6/12/2022 11:52:27'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'CMS 6/12/2022 11:52:27'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'CMS 6/12/2022 11:52:27'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'CMS 6/12/2022 11:52:27'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'CMS 6/12/2022 11:52:27'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'CMS 6/12/2022 11:52:27'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'CMS 6/12/2022 11:52:27'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'CMS 6/12/2022 11:52:27'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'CMS 6/12/2022 11:52:27'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'CMS 6/12/2022 11:52:27'!
ERROR!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'CMS 6/12/2022 11:52:27'!
ERROR!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'CMS 6/12/2022 11:52:27'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'CMS 6/12/2022 11:52:27'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'CMS 6/12/2022 11:52:27'!
ERROR!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'CMS 6/12/2022 11:52:27'!
ERROR!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'CMS 6/12/2022 11:52:27'!
PASSED!

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'CMS 6/12/2022 11:52:27'!
PASSED!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'CMS 6/12/2022 11:52:27'!
ERROR!

!testRun: #SalesInterfaceTest #test10AddToCartQuantityMustBeAPositiveNumber stamp: 'CMS 6/12/2022 11:52:27'!
ERROR!

!testRun: #SalesInterfaceTest #test11AddToCartQuantityMustBeAnInteger stamp: 'CMS 6/12/2022 11:52:27'!
ERROR!

!testRun: #SalesInterfaceTest #test12ListPurchasesOfIvalidUserFails stamp: 'CMS 6/12/2022 11:52:27'!
PASSED!

!testRun: #SalesInterfaceTest #test13ListPurchasesAffectedByCheckout stamp: 'CMS 6/12/2022 11:52:27'!
ERROR!

!testRun: #SalesInterfaceTest #test13ListPurchasesOfNewCartIsEmpty stamp: 'CMS 6/12/2022 11:52:27'!
ERROR!
!SalesInterface methodsFor: 'interface' stamp: 'CMS 6/12/2022 11:52:31' prior: 50478021!
createCartWithClientId: clientId password: password 
	self authenticateClientWithId: password andPassword: clientId.
	lastId := lastId + 1.
	carts at: lastId put: (Cart acceptingItemsOf: catalog).	clientCart at: clientId  put: (carts at: lastId).
	^ lastId! !
!SalesInterface methodsFor: 'initialize' stamp: 'CMS 6/12/2022 11:52:40' prior: 50477787!
initializeWithAuthenticator: aCredentialAuthenticator withCatalog: aCatalog 
	credentialAuthenticator := aCredentialAuthenticator.
	catalog := aCatalog.
	lastId := 0.
	carts := Dictionary new.
	clientCart := Dictionary new.! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'CMS 6/12/2022 11:52:41'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'CMS 6/12/2022 11:52:41'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'CMS 6/12/2022 11:52:41'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'CMS 6/12/2022 11:52:41'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'CMS 6/12/2022 11:52:41'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'CMS 6/12/2022 11:52:41'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'CMS 6/12/2022 11:52:41'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'CMS 6/12/2022 11:52:41'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'CMS 6/12/2022 11:52:41'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'CMS 6/12/2022 11:52:41'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'CMS 6/12/2022 11:52:41'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'CMS 6/12/2022 11:52:41'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'CMS 6/12/2022 11:52:41'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'CMS 6/12/2022 11:52:41'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'CMS 6/12/2022 11:52:41'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'CMS 6/12/2022 11:52:41'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'CMS 6/12/2022 11:52:41'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'CMS 6/12/2022 11:52:41'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'CMS 6/12/2022 11:52:41'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'CMS 6/12/2022 11:52:41'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'CMS 6/12/2022 11:52:41'!
PASSED!

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'CMS 6/12/2022 11:52:41'!
PASSED!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'CMS 6/12/2022 11:52:41'!
PASSED!

!testRun: #SalesInterfaceTest #test10AddToCartQuantityMustBeAPositiveNumber stamp: 'CMS 6/12/2022 11:52:41'!
PASSED!

!testRun: #SalesInterfaceTest #test11AddToCartQuantityMustBeAnInteger stamp: 'CMS 6/12/2022 11:52:41'!
PASSED!

!testRun: #SalesInterfaceTest #test12ListPurchasesOfIvalidUserFails stamp: 'CMS 6/12/2022 11:52:41'!
PASSED!

!testRun: #SalesInterfaceTest #test13ListPurchasesAffectedByCheckout stamp: 'CMS 6/12/2022 11:52:41'!
PASSED!

!testRun: #SalesInterfaceTest #test13ListPurchasesOfNewCartIsEmpty stamp: 'CMS 6/12/2022 11:52:41'!
PASSED!

Object subclass: #SalesInterface
	instanceVariableNames: 'lastId credentialAuthenticator carts catalog clientCart'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #SalesInterface category: 'TusLibros' stamp: 'CMS 6/12/2022 11:52:51'!
Object subclass: #SalesInterface
	instanceVariableNames: 'lastId credentialAuthenticator carts catalog clientCart'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'CMS 6/12/2022 11:52:56'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'CMS 6/12/2022 11:52:56'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'CMS 6/12/2022 11:52:56'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'CMS 6/12/2022 11:52:56'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'CMS 6/12/2022 11:52:56'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'CMS 6/12/2022 11:52:56'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'CMS 6/12/2022 11:52:56'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'CMS 6/12/2022 11:52:56'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'CMS 6/12/2022 11:52:56'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'CMS 6/12/2022 11:52:56'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'CMS 6/12/2022 11:52:56'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'CMS 6/12/2022 11:52:56'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'CMS 6/12/2022 11:52:56'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'CMS 6/12/2022 11:52:56'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'CMS 6/12/2022 11:52:56'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'CMS 6/12/2022 11:52:56'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'CMS 6/12/2022 11:52:56'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'CMS 6/12/2022 11:52:56'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'CMS 6/12/2022 11:52:56'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'CMS 6/12/2022 11:52:56'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'CMS 6/12/2022 11:52:56'!
PASSED!

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'CMS 6/12/2022 11:52:56'!
PASSED!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'CMS 6/12/2022 11:52:56'!
PASSED!

!testRun: #SalesInterfaceTest #test10AddToCartQuantityMustBeAPositiveNumber stamp: 'CMS 6/12/2022 11:52:56'!
PASSED!

!testRun: #SalesInterfaceTest #test11AddToCartQuantityMustBeAnInteger stamp: 'CMS 6/12/2022 11:52:56'!
PASSED!

!testRun: #SalesInterfaceTest #test12ListPurchasesOfIvalidUserFails stamp: 'CMS 6/12/2022 11:52:56'!
PASSED!

!testRun: #SalesInterfaceTest #test13ListPurchasesAffectedByCheckout stamp: 'CMS 6/12/2022 11:52:56'!
PASSED!

!testRun: #SalesInterfaceTest #test13ListPurchasesOfNewCartIsEmpty stamp: 'CMS 6/12/2022 11:52:56'!
PASSED!
!SalesInterfaceTest methodsFor: 'tests' stamp: 'CMS 6/12/2022 11:54:14'!
test14ListPurchasesOfNewCartIsEmpty
	| salesInterface |
	
	salesInterface := SalesInterface withAuthenticator: (self authenticatorWithSingleRegisteredUser) withCatalog: testObjectsFactory defaultCatalog.

	self assert: Bag new equals: (salesInterface listPurchasesWithClientId: self validUser password: self passwordOfValidUser).! !

!methodRemoval: SalesInterfaceTest #test13ListPurchasesOfNewCartIsEmpty stamp: 'CMS 6/12/2022 11:54:14'!
test13ListPurchasesOfNewCartIsEmpty
	| salesInterface |
	
	salesInterface := SalesInterface withAuthenticator: (self authenticatorWithSingleRegisteredUser) withCatalog: testObjectsFactory defaultCatalog.

	self assert: Bag new equals: (salesInterface listPurchasesWithClientId: self validUser password: self passwordOfValidUser).!
!SalesInterfaceTest methodsFor: 'tests' stamp: 'CMS 6/12/2022 11:54:32'!
test13ListPurchasesOfNewCartIsEmpty
	| salesInterface |
	
	salesInterface := SalesInterface withAuthenticator: (self authenticatorWithSingleRegisteredUser) withCatalog: testObjectsFactory defaultCatalog.

	self assert: Bag new equals: (salesInterface listPurchasesWithClientId: self validUser password: self passwordOfValidUser).! !

!methodRemoval: SalesInterfaceTest #test14ListPurchasesOfNewCartIsEmpty stamp: 'CMS 6/12/2022 11:54:32'!
test14ListPurchasesOfNewCartIsEmpty
	| salesInterface |
	
	salesInterface := SalesInterface withAuthenticator: (self authenticatorWithSingleRegisteredUser) withCatalog: testObjectsFactory defaultCatalog.

	self assert: Bag new equals: (salesInterface listPurchasesWithClientId: self validUser password: self passwordOfValidUser).!
!SalesInterfaceTest methodsFor: 'tests' stamp: 'CMS 6/12/2022 11:54:38'!
test14ListPurchasesAffectedByCheckout
	| salesInterface id |
	
	salesInterface := SalesInterface withAuthenticator: (self authenticatorWithSingleRegisteredUser) withCatalog: testObjectsFactory defaultCatalog.
	
	id := salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser.

	salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 1.
	
	salesInterface checkOutCartWithCartId: id ccn: '0123456789012345' cced: (GregorianMonthOfYear juneOf: 2024) cco: 'Carlos Miguel Soto'.
	
	self assert: (Bag with: testObjectsFactory itemSellByTheStore) equals: (salesInterface listPurchasesWithClientId: self validUser password: self passwordOfValidUser).! !

!methodRemoval: SalesInterfaceTest #test13ListPurchasesAffectedByCheckout stamp: 'CMS 6/12/2022 11:54:38'!
test13ListPurchasesAffectedByCheckout
	| salesInterface id |
	
	salesInterface := SalesInterface withAuthenticator: (self authenticatorWithSingleRegisteredUser) withCatalog: testObjectsFactory defaultCatalog.
	
	id := salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser.

	salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 1.
	
	salesInterface checkOutCartWithCartId: id ccn: '0123456789012345' cced: (GregorianMonthOfYear juneOf: 2024) cco: 'Carlos Miguel Soto'.
	
	self assert: (Bag with: testObjectsFactory itemSellByTheStore) equals: (salesInterface listPurchasesWithClientId: self validUser password: self passwordOfValidUser).!
!SalesInterfaceTest methodsFor: 'tests' stamp: 'CMS 6/12/2022 11:54:58'!
test13ListPurchasesOfFreshClientIsEmpty
	| salesInterface |
	
	salesInterface := SalesInterface withAuthenticator: (self authenticatorWithSingleRegisteredUser) withCatalog: testObjectsFactory defaultCatalog.

	self assert: Bag new equals: (salesInterface listPurchasesWithClientId: self validUser password: self passwordOfValidUser).! !

!methodRemoval: SalesInterfaceTest #test13ListPurchasesOfNewCartIsEmpty stamp: 'CMS 6/12/2022 11:55:12'!
test13ListPurchasesOfNewCartIsEmpty
	| salesInterface |
	
	salesInterface := SalesInterface withAuthenticator: (self authenticatorWithSingleRegisteredUser) withCatalog: testObjectsFactory defaultCatalog.

	self assert: Bag new equals: (salesInterface listPurchasesWithClientId: self validUser password: self passwordOfValidUser).!
!SalesInterfaceTest methodsFor: 'tests' stamp: 'CMS 6/12/2022 11:55:36'!
test15ListPurchasesIsemptyBeforeCheckout
	| salesInterface id |
	
	salesInterface := SalesInterface withAuthenticator: (self authenticatorWithSingleRegisteredUser) withCatalog: testObjectsFactory defaultCatalog.
	
	id := salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser.

	salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 1.
		
	self assert: (Bag new) equals: (salesInterface listPurchasesWithClientId: self validUser password: self passwordOfValidUser).! !

!testRun: #SalesInterfaceTest #test15ListPurchasesIsemptyBeforeCheckout stamp: 'CMS 6/12/2022 11:55:37'!
FAILURE!
!SalesInterface methodsFor: 'interface' stamp: 'CMS 6/12/2022 11:55:56' prior: 50478127!
createCartWithClientId: clientId password: password 
	self authenticateClientWithId: password andPassword: clientId.
	lastId := lastId + 1.
	carts at: lastId put: (Cart acceptingItemsOf: catalog).
	^ lastId! !

!classDefinition: #SalesInterface category: 'TusLibros' stamp: 'CMS 6/12/2022 11:58:43'!
Object subclass: #SalesInterface
	instanceVariableNames: 'lastId credentialAuthenticator carts catalog clientCart cartClient'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!SalesInterface methodsFor: 'interface' stamp: 'CMS 6/12/2022 11:58:39' prior: 50478508!
createCartWithClientId: clientId password: password 
	self authenticateClientWithId: password andPassword: clientId.
	lastId := lastId + 1.
	carts at: lastId put: (Cart acceptingItemsOf: catalog).
	cartClient at: lastId put: clientId.
	^ lastId! !
!SalesInterface methodsFor: 'initialize' stamp: 'CMS 6/12/2022 11:59:18' prior: 50478139!
initializeWithAuthenticator: aCredentialAuthenticator withCatalog: aCatalog 
	credentialAuthenticator := aCredentialAuthenticator.
	catalog := aCatalog.
	lastId := 0.
	carts := Dictionary new.
	clientCart := Dictionary new.
	cartClient := Dictionary new.! !

!classDefinition: #SalesInterface category: 'TusLibros' stamp: 'CMS 6/12/2022 12:01:43'!
Object subclass: #SalesInterface
	instanceVariableNames: 'lastId credentialAuthenticator carts catalog clientCart cartClient purchases'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!SalesInterface methodsFor: 'interface' stamp: 'CMS 6/12/2022 12:01:41' prior: 50477797!
checkOutCartWithCartId: cartId ccn: creditCardNumber cced: expirationDate cco: ownerName
	purchases at: (cartClient at: cartId) put: (self getCartWithId: cartId) books.! !
!SalesInterface methodsFor: 'initialize' stamp: 'CMS 6/12/2022 12:02:00' prior: 50478538!
initializeWithAuthenticator: aCredentialAuthenticator withCatalog: aCatalog 
	credentialAuthenticator := aCredentialAuthenticator.
	catalog := aCatalog.
	lastId := 0.
	carts := Dictionary new.
	clientCart := Dictionary new.
	cartClient := Dictionary new.
	purchases := Dictionary new.! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'CMS 6/12/2022 12:02:00'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'CMS 6/12/2022 12:02:00'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'CMS 6/12/2022 12:02:00'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'CMS 6/12/2022 12:02:00'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'CMS 6/12/2022 12:02:00'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'CMS 6/12/2022 12:02:00'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'CMS 6/12/2022 12:02:00'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'CMS 6/12/2022 12:02:00'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'CMS 6/12/2022 12:02:00'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'CMS 6/12/2022 12:02:00'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'CMS 6/12/2022 12:02:00'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'CMS 6/12/2022 12:02:00'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'CMS 6/12/2022 12:02:00'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'CMS 6/12/2022 12:02:00'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'CMS 6/12/2022 12:02:00'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'CMS 6/12/2022 12:02:00'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'CMS 6/12/2022 12:02:00'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'CMS 6/12/2022 12:02:00'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'CMS 6/12/2022 12:02:00'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'CMS 6/12/2022 12:02:00'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'CMS 6/12/2022 12:02:00'!
PASSED!

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'CMS 6/12/2022 12:02:00'!
PASSED!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'CMS 6/12/2022 12:02:00'!
PASSED!

!testRun: #SalesInterfaceTest #test10AddToCartQuantityMustBeAPositiveNumber stamp: 'CMS 6/12/2022 12:02:00'!
PASSED!

!testRun: #SalesInterfaceTest #test11AddToCartQuantityMustBeAnInteger stamp: 'CMS 6/12/2022 12:02:00'!
PASSED!

!testRun: #SalesInterfaceTest #test12ListPurchasesOfIvalidUserFails stamp: 'CMS 6/12/2022 12:02:00'!
PASSED!

!testRun: #SalesInterfaceTest #test13ListPurchasesOfFreshClientIsEmpty stamp: 'CMS 6/12/2022 12:02:00'!
PASSED!

!testRun: #SalesInterfaceTest #test14ListPurchasesAffectedByCheckout stamp: 'CMS 6/12/2022 12:02:00'!
FAILURE!

!testRun: #SalesInterfaceTest #test15ListPurchasesIsemptyBeforeCheckout stamp: 'CMS 6/12/2022 12:02:00'!
PASSED!

!testRun: #SalesInterfaceTest #test14ListPurchasesAffectedByCheckout stamp: 'CMS 6/12/2022 12:02:00'!
FAILURE!
!SalesInterface methodsFor: 'interface' stamp: 'CMS 6/12/2022 12:02:19' prior: 50477812!
listPurchasesWithClientId: clientId password: password
	self authenticateClientWithId: password andPassword: clientId.
	^(purchases at: clientId ifAbsent: [^Bag new]) books.! !
!SalesInterface methodsFor: 'interface' stamp: 'CMS 6/12/2022 12:02:21' prior: 50478682!
listPurchasesWithClientId: clientId password: password
	self authenticateClientWithId: password andPassword: clientId.
	^(purchases at: clientId ifAbsent: [^Bag new]).! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'CMS 6/12/2022 12:02:22'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'CMS 6/12/2022 12:02:22'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'CMS 6/12/2022 12:02:22'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'CMS 6/12/2022 12:02:22'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'CMS 6/12/2022 12:02:22'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'CMS 6/12/2022 12:02:22'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'CMS 6/12/2022 12:02:22'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'CMS 6/12/2022 12:02:22'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'CMS 6/12/2022 12:02:22'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'CMS 6/12/2022 12:02:22'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'CMS 6/12/2022 12:02:22'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'CMS 6/12/2022 12:02:22'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'CMS 6/12/2022 12:02:22'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'CMS 6/12/2022 12:02:22'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'CMS 6/12/2022 12:02:22'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'CMS 6/12/2022 12:02:22'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'CMS 6/12/2022 12:02:22'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'CMS 6/12/2022 12:02:22'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'CMS 6/12/2022 12:02:22'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'CMS 6/12/2022 12:02:22'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'CMS 6/12/2022 12:02:22'!
PASSED!

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'CMS 6/12/2022 12:02:22'!
PASSED!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'CMS 6/12/2022 12:02:22'!
PASSED!

!testRun: #SalesInterfaceTest #test10AddToCartQuantityMustBeAPositiveNumber stamp: 'CMS 6/12/2022 12:02:22'!
PASSED!

!testRun: #SalesInterfaceTest #test11AddToCartQuantityMustBeAnInteger stamp: 'CMS 6/12/2022 12:02:22'!
PASSED!

!testRun: #SalesInterfaceTest #test12ListPurchasesOfIvalidUserFails stamp: 'CMS 6/12/2022 12:02:22'!
PASSED!

!testRun: #SalesInterfaceTest #test13ListPurchasesOfFreshClientIsEmpty stamp: 'CMS 6/12/2022 12:02:22'!
PASSED!

!testRun: #SalesInterfaceTest #test14ListPurchasesAffectedByCheckout stamp: 'CMS 6/12/2022 12:02:22'!
PASSED!

!testRun: #SalesInterfaceTest #test15ListPurchasesIsemptyBeforeCheckout stamp: 'CMS 6/12/2022 12:02:22'!
PASSED!
!SalesInterfaceTest methodsFor: 'tests' stamp: 'CMS 6/12/2022 12:04:32'!
test16ListPurchasesAfterTwoCheckoutsShowsContentsOfBothCarts
	| salesInterface id |
	
	salesInterface := SalesInterface withAuthenticator: (self authenticatorWithSingleRegisteredUser) withCatalog: testObjectsFactory defaultCatalog.
	
	id := salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser.

	salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 1.
	
	salesInterface checkOutCartWithCartId: id ccn: '0123456789012345' cced: (GregorianMonthOfYear juneOf: 2024) cco: 'Carlos Miguel Soto'.
	
	id := salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser.

	salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 1.
	
	salesInterface checkOutCartWithCartId: id ccn: '0123456789012345' cced: (GregorianMonthOfYear juneOf: 2024) cco: 'Carlos Miguel Soto'.
		
	self assert: (Bag with: testObjectsFactory itemSellByTheStore with: testObjectsFactory itemSellByTheStore) equals: (salesInterface listPurchasesWithClientId: self validUser password: self passwordOfValidUser).! !

!testRun: #SalesInterfaceTest #test16ListPurchasesAfterTwoCheckoutsShowsContentsOfBothCarts stamp: 'CMS 6/12/2022 12:04:34'!
FAILURE!
!SalesInterface methodsFor: 'interface' stamp: 'CMS 6/12/2022 12:05:40' prior: 50478559!
checkOutCartWithCartId: cartId ccn: creditCardNumber cced: expirationDate cco: ownerName
	purchases at: (cartClient at: cartId) ifAbsent: [purchases at: (cartClient at: cartId) put: Bag new].
	(purchases at: (cartClient at: cartId)) addAll: (self getCartWithId: cartId) books.! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'CMS 6/12/2022 12:05:41'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'CMS 6/12/2022 12:05:41'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'CMS 6/12/2022 12:05:41'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'CMS 6/12/2022 12:05:41'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'CMS 6/12/2022 12:05:41'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'CMS 6/12/2022 12:05:41'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'CMS 6/12/2022 12:05:41'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'CMS 6/12/2022 12:05:41'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'CMS 6/12/2022 12:05:41'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'CMS 6/12/2022 12:05:41'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'CMS 6/12/2022 12:05:41'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'CMS 6/12/2022 12:05:41'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'CMS 6/12/2022 12:05:41'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'CMS 6/12/2022 12:05:41'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'CMS 6/12/2022 12:05:41'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'CMS 6/12/2022 12:05:41'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'CMS 6/12/2022 12:05:41'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'CMS 6/12/2022 12:05:41'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'CMS 6/12/2022 12:05:41'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'CMS 6/12/2022 12:05:41'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'CMS 6/12/2022 12:05:41'!
PASSED!

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'CMS 6/12/2022 12:05:41'!
PASSED!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'CMS 6/12/2022 12:05:41'!
PASSED!

!testRun: #SalesInterfaceTest #test10AddToCartQuantityMustBeAPositiveNumber stamp: 'CMS 6/12/2022 12:05:41'!
PASSED!

!testRun: #SalesInterfaceTest #test11AddToCartQuantityMustBeAnInteger stamp: 'CMS 6/12/2022 12:05:41'!
PASSED!

!testRun: #SalesInterfaceTest #test12ListPurchasesOfIvalidUserFails stamp: 'CMS 6/12/2022 12:05:41'!
PASSED!

!testRun: #SalesInterfaceTest #test13ListPurchasesOfFreshClientIsEmpty stamp: 'CMS 6/12/2022 12:05:41'!
PASSED!

!testRun: #SalesInterfaceTest #test14ListPurchasesAffectedByCheckout stamp: 'CMS 6/12/2022 12:05:41'!
PASSED!

!testRun: #SalesInterfaceTest #test15ListPurchasesIsemptyBeforeCheckout stamp: 'CMS 6/12/2022 12:05:41'!
PASSED!

!testRun: #SalesInterfaceTest #test16ListPurchasesAfterTwoCheckoutsShowsContentsOfBothCarts stamp: 'CMS 6/12/2022 12:05:41'!
PASSED!
!Cashier methodsFor: 'checkout - private' stamp: 'CMS 6/12/2022 12:11:17' prior: 50474602!
createSale

	^ Sale of: cart books
! !
!Cashier methodsFor: 'checkout - private' stamp: 'CMS 6/12/2022 12:11:30' prior: 50478954!
createSale

	^ Sale of: cart
! !

!classDefinition: #SalesInterface category: 'TusLibros' stamp: 'CMS 6/12/2022 12:13:11'!
Object subclass: #SalesInterface
	instanceVariableNames: 'lastId credentialAuthenticator carts catalog clientCart cartClient purchases saleBooks'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!SalesInterface methodsFor: 'private' stamp: 'CMS 6/12/2022 12:13:09'!
getSaleBookByClientId: clientId
	saleBooks at: clientId ifAbsent: [saleBooks at: clientId put: OrderedCollection new.].
	^saleBooks at: clientId.! !
!SalesInterface methodsFor: 'private' stamp: 'CMS 6/12/2022 12:14:08' prior: 50478972!
getSaleBookByClientId: clientId
	saleBooks at: clientId ifAbsent: [ saleBooks at: clientId put: OrderedCollection new.].
	^saleBooks at: clientId.! !
!SalesInterface methodsFor: 'interface' stamp: 'CMS 6/12/2022 12:05:40' prior: 50478840!
checkOutCartWithCartId: cartId ccn: creditCardNumber cced: expirationDate cco: ownerName
	purchases at: (cartClient at: cartId) ifAbsent: [purchases at: (cartClient at: cartId) put: Bag new].
	(purchases at: (cartClient at: cartId)) addAll: (self getCartWithId: cartId) books.! !
!SalesInterface methodsFor: 'interface' stamp: 'CMS 6/12/2022 12:05:40' prior: 50478988!
checkOutCartWithCartId: cartId ccn: creditCardNumber cced: expirationDate cco: ownerName
	purchases at: (cartClient at: cartId) ifAbsent: [purchases at: (cartClient at: cartId) put: Bag new].
	(purchases at: (cartClient at: cartId)) addAll: (self getCartWithId: cartId) books.! !
!SalesInterface methodsFor: 'interface' stamp: 'CMS 6/12/2022 12:01:41' prior: 50479000!
checkOutCartWithCartId: cartId ccn: creditCardNumber cced: expirationDate cco: ownerName
	purchases at: (cartClient at: cartId) put: (self getCartWithId: cartId) books.! !
!SalesInterface methodsFor: 'interface' stamp: 'CMS 6/12/2022 12:05:40' prior: 50479012!
checkOutCartWithCartId: cartId ccn: creditCardNumber cced: expirationDate cco: ownerName
	purchases at: (cartClient at: cartId) ifAbsent: [purchases at: (cartClient at: cartId) put: Bag new].
	(purchases at: (cartClient at: cartId)) addAll: (self getCartWithId: cartId) books.! !
!SalesInterface methodsFor: 'interface' stamp: 'CMS 6/12/2022 11:47:17' prior: 50479021!
checkOutCartWithCartId: cartId ccn: creditCardNumber cced: expirationDate cco: ownerName! !
!SalesInterface methodsFor: 'interface' stamp: 'CMS 6/12/2022 11:47:17' prior: 50479033!
checkOutCartWithCartId: cartId ccn: creditCardNumber cced: expirationDate cco: ownerName! !
!SalesInterface methodsFor: 'interface' stamp: 'CMS 6/12/2022 12:01:41' prior: 50479039!
checkOutCartWithCartId: cartId ccn: creditCardNumber cced: expirationDate cco: ownerName
	purchases at: (cartClient at: cartId) put: (self getCartWithId: cartId) books.! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'CMS 6/12/2022 12:17:10'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'CMS 6/12/2022 12:17:10'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'CMS 6/12/2022 12:17:10'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'CMS 6/12/2022 12:17:10'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'CMS 6/12/2022 12:17:10'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'CMS 6/12/2022 12:17:10'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'CMS 6/12/2022 12:17:10'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'CMS 6/12/2022 12:17:10'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'CMS 6/12/2022 12:17:10'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'CMS 6/12/2022 12:17:10'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'CMS 6/12/2022 12:17:10'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'CMS 6/12/2022 12:17:10'!
FAILURE!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'CMS 6/12/2022 12:17:10'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'CMS 6/12/2022 12:17:10'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'CMS 6/12/2022 12:17:10'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'CMS 6/12/2022 12:17:10'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'CMS 6/12/2022 12:17:10'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'CMS 6/12/2022 12:17:10'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'CMS 6/12/2022 12:17:10'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'CMS 6/12/2022 12:17:10'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'CMS 6/12/2022 12:17:10'!
PASSED!

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'CMS 6/12/2022 12:17:10'!
PASSED!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'CMS 6/12/2022 12:17:10'!
PASSED!

!testRun: #SalesInterfaceTest #test10AddToCartQuantityMustBeAPositiveNumber stamp: 'CMS 6/12/2022 12:17:10'!
PASSED!

!testRun: #SalesInterfaceTest #test11AddToCartQuantityMustBeAnInteger stamp: 'CMS 6/12/2022 12:17:10'!
PASSED!

!testRun: #SalesInterfaceTest #test12ListPurchasesOfIvalidUserFails stamp: 'CMS 6/12/2022 12:17:10'!
PASSED!

!testRun: #SalesInterfaceTest #test13ListPurchasesOfFreshClientIsEmpty stamp: 'CMS 6/12/2022 12:17:10'!
PASSED!

!testRun: #SalesInterfaceTest #test14ListPurchasesAffectedByCheckout stamp: 'CMS 6/12/2022 12:17:10'!
PASSED!

!testRun: #SalesInterfaceTest #test15ListPurchasesIsemptyBeforeCheckout stamp: 'CMS 6/12/2022 12:17:10'!
PASSED!

!testRun: #SalesInterfaceTest #test16ListPurchasesAfterTwoCheckoutsShowsContentsOfBothCarts stamp: 'CMS 6/12/2022 12:17:10'!
FAILURE!
!Cashier methodsFor: 'checkout - private' stamp: 'CMS 6/12/2022 12:17:29' prior: 50478959!
createSale

	^ Sale of: total
! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'CMS 6/12/2022 12:17:29'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'CMS 6/12/2022 12:17:29'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'CMS 6/12/2022 12:17:29'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'CMS 6/12/2022 12:17:29'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'CMS 6/12/2022 12:17:29'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'CMS 6/12/2022 12:17:29'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'CMS 6/12/2022 12:17:29'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'CMS 6/12/2022 12:17:29'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'CMS 6/12/2022 12:17:29'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'CMS 6/12/2022 12:17:29'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'CMS 6/12/2022 12:17:29'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'CMS 6/12/2022 12:17:29'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'CMS 6/12/2022 12:17:29'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'CMS 6/12/2022 12:17:29'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'CMS 6/12/2022 12:17:29'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'CMS 6/12/2022 12:17:29'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'CMS 6/12/2022 12:17:29'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'CMS 6/12/2022 12:17:29'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'CMS 6/12/2022 12:17:29'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'CMS 6/12/2022 12:17:29'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'CMS 6/12/2022 12:17:29'!
PASSED!

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'CMS 6/12/2022 12:17:29'!
PASSED!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'CMS 6/12/2022 12:17:29'!
PASSED!

!testRun: #SalesInterfaceTest #test10AddToCartQuantityMustBeAPositiveNumber stamp: 'CMS 6/12/2022 12:17:29'!
PASSED!

!testRun: #SalesInterfaceTest #test11AddToCartQuantityMustBeAnInteger stamp: 'CMS 6/12/2022 12:17:29'!
PASSED!

!testRun: #SalesInterfaceTest #test12ListPurchasesOfIvalidUserFails stamp: 'CMS 6/12/2022 12:17:29'!
PASSED!

!testRun: #SalesInterfaceTest #test13ListPurchasesOfFreshClientIsEmpty stamp: 'CMS 6/12/2022 12:17:29'!
PASSED!

!testRun: #SalesInterfaceTest #test14ListPurchasesAffectedByCheckout stamp: 'CMS 6/12/2022 12:17:29'!
PASSED!

!testRun: #SalesInterfaceTest #test15ListPurchasesIsemptyBeforeCheckout stamp: 'CMS 6/12/2022 12:17:29'!
PASSED!

!testRun: #SalesInterfaceTest #test16ListPurchasesAfterTwoCheckoutsShowsContentsOfBothCarts stamp: 'CMS 6/12/2022 12:17:29'!
FAILURE!

!testRun: #SalesInterfaceTest #test16ListPurchasesAfterTwoCheckoutsShowsContentsOfBothCarts stamp: 'CMS 6/12/2022 12:17:29'!
FAILURE!
!SalesInterface methodsFor: 'interface' stamp: 'CMS 6/12/2022 12:05:40' prior: 50479045!
checkOutCartWithCartId: cartId ccn: creditCardNumber cced: expirationDate cco: ownerName
	purchases at: (cartClient at: cartId) ifAbsent: [purchases at: (cartClient at: cartId) put: Bag new].
	(purchases at: (cartClient at: cartId)) addAll: (self getCartWithId: cartId) books.! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'CMS 6/12/2022 12:18:05'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'CMS 6/12/2022 12:18:05'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'CMS 6/12/2022 12:18:05'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'CMS 6/12/2022 12:18:05'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'CMS 6/12/2022 12:18:05'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'CMS 6/12/2022 12:18:05'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'CMS 6/12/2022 12:18:05'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'CMS 6/12/2022 12:18:05'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'CMS 6/12/2022 12:18:05'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'CMS 6/12/2022 12:18:05'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'CMS 6/12/2022 12:18:05'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'CMS 6/12/2022 12:18:05'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'CMS 6/12/2022 12:18:05'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'CMS 6/12/2022 12:18:05'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'CMS 6/12/2022 12:18:05'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'CMS 6/12/2022 12:18:05'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'CMS 6/12/2022 12:18:05'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'CMS 6/12/2022 12:18:05'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'CMS 6/12/2022 12:18:05'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'CMS 6/12/2022 12:18:05'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'CMS 6/12/2022 12:18:05'!
PASSED!

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'CMS 6/12/2022 12:18:05'!
PASSED!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'CMS 6/12/2022 12:18:05'!
PASSED!

!testRun: #SalesInterfaceTest #test10AddToCartQuantityMustBeAPositiveNumber stamp: 'CMS 6/12/2022 12:18:05'!
PASSED!

!testRun: #SalesInterfaceTest #test11AddToCartQuantityMustBeAnInteger stamp: 'CMS 6/12/2022 12:18:05'!
PASSED!

!testRun: #SalesInterfaceTest #test12ListPurchasesOfIvalidUserFails stamp: 'CMS 6/12/2022 12:18:05'!
PASSED!

!testRun: #SalesInterfaceTest #test13ListPurchasesOfFreshClientIsEmpty stamp: 'CMS 6/12/2022 12:18:05'!
PASSED!

!testRun: #SalesInterfaceTest #test14ListPurchasesAffectedByCheckout stamp: 'CMS 6/12/2022 12:18:05'!
PASSED!

!testRun: #SalesInterfaceTest #test15ListPurchasesIsemptyBeforeCheckout stamp: 'CMS 6/12/2022 12:18:05'!
PASSED!

!testRun: #SalesInterfaceTest #test16ListPurchasesAfterTwoCheckoutsShowsContentsOfBothCarts stamp: 'CMS 6/12/2022 12:18:05'!
PASSED!
!SalesInterfaceTest methodsFor: 'tests' stamp: 'CMS 6/12/2022 12:22:02'!
test16ListPurchasesFailesForInvalidCredentials
	| salesInterface |
	
	salesInterface := SalesInterface withAuthenticator: (self authenticatorWithSingleRegisteredUser) withCatalog: testObjectsFactory defaultCatalog.

	self should: [salesInterface listPurchasesWithClientId: self validUser password: self invalidPasswordOfValidUser]
		raise: Error - MessageNotUnderstood
		withMessageText: SalesInterface invalidCredentialsErrorDescription.! !

!testRun: #SalesInterfaceTest #test16ListPurchasesFailesForInvalidCredentials stamp: 'CMS 6/12/2022 12:22:05'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'CMS 6/12/2022 12:22:05'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'CMS 6/12/2022 12:22:05'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'CMS 6/12/2022 12:22:05'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'CMS 6/12/2022 12:22:05'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'CMS 6/12/2022 12:22:05'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'CMS 6/12/2022 12:22:05'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'CMS 6/12/2022 12:22:05'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'CMS 6/12/2022 12:22:05'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'CMS 6/12/2022 12:22:05'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'CMS 6/12/2022 12:22:05'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'CMS 6/12/2022 12:22:05'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'CMS 6/12/2022 12:22:05'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'CMS 6/12/2022 12:22:05'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'CMS 6/12/2022 12:22:05'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'CMS 6/12/2022 12:22:06'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'CMS 6/12/2022 12:22:06'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'CMS 6/12/2022 12:22:06'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'CMS 6/12/2022 12:22:06'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'CMS 6/12/2022 12:22:06'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'CMS 6/12/2022 12:22:06'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'CMS 6/12/2022 12:22:06'!
PASSED!

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'CMS 6/12/2022 12:22:06'!
PASSED!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'CMS 6/12/2022 12:22:06'!
PASSED!

!testRun: #SalesInterfaceTest #test10AddToCartQuantityMustBeAPositiveNumber stamp: 'CMS 6/12/2022 12:22:06'!
PASSED!

!testRun: #SalesInterfaceTest #test11AddToCartQuantityMustBeAnInteger stamp: 'CMS 6/12/2022 12:22:06'!
PASSED!

!testRun: #SalesInterfaceTest #test12ListPurchasesOfIvalidUserFails stamp: 'CMS 6/12/2022 12:22:06'!
PASSED!

!testRun: #SalesInterfaceTest #test13ListPurchasesOfFreshClientIsEmpty stamp: 'CMS 6/12/2022 12:22:06'!
PASSED!

!testRun: #SalesInterfaceTest #test14ListPurchasesAffectedByCheckout stamp: 'CMS 6/12/2022 12:22:06'!
PASSED!

!testRun: #SalesInterfaceTest #test15ListPurchasesIsemptyBeforeCheckout stamp: 'CMS 6/12/2022 12:22:06'!
PASSED!

!testRun: #SalesInterfaceTest #test16ListPurchasesAfterTwoCheckoutsShowsContentsOfBothCarts stamp: 'CMS 6/12/2022 12:22:06'!
PASSED!

!testRun: #SalesInterfaceTest #test16ListPurchasesFailesForInvalidCredentials stamp: 'CMS 6/12/2022 12:22:06'!
PASSED!
!SalesInterfaceTest methodsFor: 'tests' stamp: 'CMS 6/12/2022 12:22:58'!
test17ListPurchasesFailesForInvalidCredentials
	| salesInterface |
	
	salesInterface := SalesInterface withAuthenticator: (self authenticatorWithSingleRegisteredUser) withCatalog: testObjectsFactory defaultCatalog.

	self should: [salesInterface listPurchasesWithClientId: self validUser password: self invalidPasswordOfValidUser]
		raise: Error - MessageNotUnderstood
		withMessageText: SalesInterface invalidCredentialsErrorDescription.! !

!methodRemoval: SalesInterfaceTest #test16ListPurchasesFailesForInvalidCredentials stamp: 'CMS 6/12/2022 12:22:58'!
test16ListPurchasesFailesForInvalidCredentials
	| salesInterface |
	
	salesInterface := SalesInterface withAuthenticator: (self authenticatorWithSingleRegisteredUser) withCatalog: testObjectsFactory defaultCatalog.

	self should: [salesInterface listPurchasesWithClientId: self validUser password: self invalidPasswordOfValidUser]
		raise: Error - MessageNotUnderstood
		withMessageText: SalesInterface invalidCredentialsErrorDescription.!
!SalesInterface methodsFor: 'interface' stamp: 'CMS 6/12/2022 12:25:17' prior: 50479267!
checkOutCartWithCartId: cartId ccn: creditCardNumber cced: expirationDate cco: ownerName
	purchases at: (cartClient at: cartId) ifAbsent: [purchases at: (cartClient at: cartId) put: Bag new].
	(purchases at: (cartClient at: cartId)) addAll: (self getCartWithId: cartId) books.! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'CMS 6/12/2022 12:31:27'!
test18CantCheckoutTwice
	| salesInterface id |
	
	salesInterface := SalesInterface withAuthenticator: (self authenticatorWithSingleRegisteredUser) withCatalog: testObjectsFactory defaultCatalog.
	
	id := salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser.

	salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 1.
	
	salesInterface checkOutCartWithCartId: id ccn: '0123456789012345' cced: (GregorianMonthOfYear juneOf: 2024) cco: 'Carlos Miguel Soto'.
	self should: [salesInterface checkOutCartWithCartId: id ccn: '0123456789012345' cced: (GregorianMonthOfYear juneOf: 2024) cco: 'Carlos Miguel Soto'.]
		raise: Error - MessageNotUnderstood
		withMessageText: SalesInterface A.
! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'CMS 6/12/2022 12:32:56'!
test18CantCheckoutCartWithInvalidId
	| salesInterface |
	
	salesInterface := SalesInterface withAuthenticator: (self authenticatorWithSingleRegisteredUser) withCatalog: testObjectsFactory defaultCatalog.

	self should: [salesInterface checkOutCartWithCartId: nil ccn: '0123456789012345' cced: (GregorianMonthOfYear juneOf: 2024) cco: 'Carlos Miguel Soto'.]
		raise: Error - MessageNotUnderstood
		withMessageText: SalesInterface invalidCartIdErrorDescription.
! !

!testRun: #SalesInterfaceTest #test18CantCheckoutCartWithInvalidId stamp: 'CMS 6/12/2022 12:32:59'!
FAILURE!

!methodRemoval: SalesInterfaceTest #test18CantCheckoutTwice stamp: 'CMS 6/12/2022 12:33:23'!
test18CantCheckoutTwice
	| salesInterface id |
	
	salesInterface := SalesInterface withAuthenticator: (self authenticatorWithSingleRegisteredUser) withCatalog: testObjectsFactory defaultCatalog.
	
	id := salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser.

	salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 1.
	
	salesInterface checkOutCartWithCartId: id ccn: '0123456789012345' cced: (GregorianMonthOfYear juneOf: 2024) cco: 'Carlos Miguel Soto'.
	self should: [salesInterface checkOutCartWithCartId: id ccn: '0123456789012345' cced: (GregorianMonthOfYear juneOf: 2024) cco: 'Carlos Miguel Soto'.]
		raise: Error - MessageNotUnderstood
		withMessageText: SalesInterface A.
!

!testRun: #SalesInterfaceTest #test18CantCheckoutCartWithInvalidId stamp: 'CMS 6/12/2022 12:33:25'!
FAILURE!
!SalesInterface methodsFor: 'interface' stamp: 'CMS 6/12/2022 12:33:58' prior: 50479541!
checkOutCartWithCartId: cartId ccn: creditCardNumber cced: expirationDate cco: ownerName
	self getCartWithId: cartId.
	purchases at: (cartClient at: cartId) ifAbsent: [purchases at: (cartClient at: cartId) put: Bag new].
	(purchases at: (cartClient at: cartId)) addAll: (self getCartWithId: cartId) books.! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'CMS 6/12/2022 12:33:59'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'CMS 6/12/2022 12:33:59'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'CMS 6/12/2022 12:33:59'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'CMS 6/12/2022 12:33:59'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'CMS 6/12/2022 12:33:59'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'CMS 6/12/2022 12:33:59'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'CMS 6/12/2022 12:33:59'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'CMS 6/12/2022 12:33:59'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'CMS 6/12/2022 12:33:59'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'CMS 6/12/2022 12:33:59'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'CMS 6/12/2022 12:33:59'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'CMS 6/12/2022 12:33:59'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'CMS 6/12/2022 12:33:59'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'CMS 6/12/2022 12:33:59'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'CMS 6/12/2022 12:33:59'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'CMS 6/12/2022 12:33:59'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'CMS 6/12/2022 12:33:59'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'CMS 6/12/2022 12:33:59'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'CMS 6/12/2022 12:33:59'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'CMS 6/12/2022 12:33:59'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'CMS 6/12/2022 12:33:59'!
PASSED!

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'CMS 6/12/2022 12:33:59'!
PASSED!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'CMS 6/12/2022 12:33:59'!
PASSED!

!testRun: #SalesInterfaceTest #test10AddToCartQuantityMustBeAPositiveNumber stamp: 'CMS 6/12/2022 12:33:59'!
PASSED!

!testRun: #SalesInterfaceTest #test11AddToCartQuantityMustBeAnInteger stamp: 'CMS 6/12/2022 12:33:59'!
PASSED!

!testRun: #SalesInterfaceTest #test12ListPurchasesOfIvalidUserFails stamp: 'CMS 6/12/2022 12:33:59'!
PASSED!

!testRun: #SalesInterfaceTest #test13ListPurchasesOfFreshClientIsEmpty stamp: 'CMS 6/12/2022 12:33:59'!
PASSED!

!testRun: #SalesInterfaceTest #test14ListPurchasesAffectedByCheckout stamp: 'CMS 6/12/2022 12:33:59'!
PASSED!

!testRun: #SalesInterfaceTest #test15ListPurchasesIsemptyBeforeCheckout stamp: 'CMS 6/12/2022 12:33:59'!
PASSED!

!testRun: #SalesInterfaceTest #test16ListPurchasesAfterTwoCheckoutsShowsContentsOfBothCarts stamp: 'CMS 6/12/2022 12:33:59'!
PASSED!

!testRun: #SalesInterfaceTest #test17ListPurchasesFailesForInvalidCredentials stamp: 'CMS 6/12/2022 12:33:59'!
PASSED!

!testRun: #SalesInterfaceTest #test18CantCheckoutCartWithInvalidId stamp: 'CMS 6/12/2022 12:33:59'!
PASSED!
!SalesInterface methodsFor: 'private' stamp: 'CMS 6/12/2022 12:39:26'!
assertCartWithIdExists: cartId
	(carts includesKey: cartId) ifFalse: [self error: self class invalidCartIdErrorDescription].! !
!SalesInterface methodsFor: 'interface' stamp: 'CMS 6/12/2022 12:39:37' prior: 50479632!
checkOutCartWithCartId: cartId ccn: creditCardNumber cced: expirationDate cco: ownerName
	self assertCartWithIdExists: cartId.
	purchases at: (cartClient at: cartId) ifAbsent: [purchases at: (cartClient at: cartId) put: Bag new].
	(purchases at: (cartClient at: cartId)) addAll: (self getCartWithId: cartId) books.! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'CMS 6/12/2022 12:39:38'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'CMS 6/12/2022 12:39:38'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'CMS 6/12/2022 12:39:38'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'CMS 6/12/2022 12:39:38'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'CMS 6/12/2022 12:39:38'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'CMS 6/12/2022 12:39:38'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'CMS 6/12/2022 12:39:38'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'CMS 6/12/2022 12:39:38'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'CMS 6/12/2022 12:39:38'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'CMS 6/12/2022 12:39:38'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'CMS 6/12/2022 12:39:38'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'CMS 6/12/2022 12:39:38'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'CMS 6/12/2022 12:39:38'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'CMS 6/12/2022 12:39:38'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'CMS 6/12/2022 12:39:38'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'CMS 6/12/2022 12:39:38'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'CMS 6/12/2022 12:39:38'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'CMS 6/12/2022 12:39:38'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'CMS 6/12/2022 12:39:38'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'CMS 6/12/2022 12:39:38'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'CMS 6/12/2022 12:39:38'!
PASSED!

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'CMS 6/12/2022 12:39:38'!
PASSED!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'CMS 6/12/2022 12:39:38'!
PASSED!

!testRun: #SalesInterfaceTest #test10AddToCartQuantityMustBeAPositiveNumber stamp: 'CMS 6/12/2022 12:39:38'!
PASSED!

!testRun: #SalesInterfaceTest #test11AddToCartQuantityMustBeAnInteger stamp: 'CMS 6/12/2022 12:39:38'!
PASSED!

!testRun: #SalesInterfaceTest #test12ListPurchasesOfIvalidUserFails stamp: 'CMS 6/12/2022 12:39:38'!
PASSED!

!testRun: #SalesInterfaceTest #test13ListPurchasesOfFreshClientIsEmpty stamp: 'CMS 6/12/2022 12:39:38'!
PASSED!

!testRun: #SalesInterfaceTest #test14ListPurchasesAffectedByCheckout stamp: 'CMS 6/12/2022 12:39:38'!
PASSED!

!testRun: #SalesInterfaceTest #test15ListPurchasesIsemptyBeforeCheckout stamp: 'CMS 6/12/2022 12:39:38'!
PASSED!

!testRun: #SalesInterfaceTest #test16ListPurchasesAfterTwoCheckoutsShowsContentsOfBothCarts stamp: 'CMS 6/12/2022 12:39:38'!
PASSED!

!testRun: #SalesInterfaceTest #test17ListPurchasesFailesForInvalidCredentials stamp: 'CMS 6/12/2022 12:39:38'!
PASSED!

!testRun: #SalesInterfaceTest #test18CantCheckoutCartWithInvalidId stamp: 'CMS 6/12/2022 12:39:38'!
PASSED!
!SalesInterfaceTest methodsFor: 'tests' stamp: 'CMS 6/12/2022 12:40:50'!
test19CantCheckoutTwice
	| salesInterface id |
	
	salesInterface := SalesInterface withAuthenticator: (self authenticatorWithSingleRegisteredUser) withCatalog: testObjectsFactory defaultCatalog.
	
	id := salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser.

	salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 1.
	
	salesInterface checkOutCartWithCartId: id ccn: '0123456789012345' cced: (GregorianMonthOfYear juneOf: 2024) cco: 'Carlos Miguel Soto'.
	
	self should: [	
	salesInterface checkOutCartWithCartId: id ccn: '0123456789012345' cced: (GregorianMonthOfYear juneOf: 2024) cco: 'Carlos Miguel Soto'.
	] raise: Error - MessageNotUnderstood
	withMessageText: SalesInterface invalidCartIdErrorDescription.! !

!testRun: #SalesInterfaceTest #test19CantCheckoutTwice stamp: 'CMS 6/12/2022 12:40:51'!
FAILURE!
!SalesInterface methodsFor: 'interface' stamp: 'CMS 6/12/2022 12:41:19' prior: 50479761!
checkOutCartWithCartId: cartId ccn: creditCardNumber cced: expirationDate cco: ownerName
	self assertCartWithIdExists: cartId.
	purchases at: (cartClient at: cartId) ifAbsent: [purchases at: (cartClient at: cartId) put: Bag new].
	(purchases at: (cartClient at: cartId)) addAll: (self getCartWithId: cartId) books.
	carts removeKey: cartId.! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'CMS 6/12/2022 12:41:20'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'CMS 6/12/2022 12:41:20'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'CMS 6/12/2022 12:41:20'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'CMS 6/12/2022 12:41:20'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'CMS 6/12/2022 12:41:20'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'CMS 6/12/2022 12:41:20'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'CMS 6/12/2022 12:41:20'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'CMS 6/12/2022 12:41:20'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'CMS 6/12/2022 12:41:20'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'CMS 6/12/2022 12:41:20'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'CMS 6/12/2022 12:41:20'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'CMS 6/12/2022 12:41:20'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'CMS 6/12/2022 12:41:20'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'CMS 6/12/2022 12:41:20'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'CMS 6/12/2022 12:41:20'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'CMS 6/12/2022 12:41:20'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'CMS 6/12/2022 12:41:20'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'CMS 6/12/2022 12:41:20'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'CMS 6/12/2022 12:41:20'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'CMS 6/12/2022 12:41:20'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'CMS 6/12/2022 12:41:20'!
PASSED!

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'CMS 6/12/2022 12:41:20'!
PASSED!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'CMS 6/12/2022 12:41:20'!
PASSED!

!testRun: #SalesInterfaceTest #test10AddToCartQuantityMustBeAPositiveNumber stamp: 'CMS 6/12/2022 12:41:20'!
PASSED!

!testRun: #SalesInterfaceTest #test11AddToCartQuantityMustBeAnInteger stamp: 'CMS 6/12/2022 12:41:20'!
PASSED!

!testRun: #SalesInterfaceTest #test12ListPurchasesOfIvalidUserFails stamp: 'CMS 6/12/2022 12:41:20'!
PASSED!

!testRun: #SalesInterfaceTest #test13ListPurchasesOfFreshClientIsEmpty stamp: 'CMS 6/12/2022 12:41:20'!
PASSED!

!testRun: #SalesInterfaceTest #test14ListPurchasesAffectedByCheckout stamp: 'CMS 6/12/2022 12:41:20'!
PASSED!

!testRun: #SalesInterfaceTest #test15ListPurchasesIsemptyBeforeCheckout stamp: 'CMS 6/12/2022 12:41:20'!
PASSED!

!testRun: #SalesInterfaceTest #test16ListPurchasesAfterTwoCheckoutsShowsContentsOfBothCarts stamp: 'CMS 6/12/2022 12:41:20'!
PASSED!

!testRun: #SalesInterfaceTest #test17ListPurchasesFailesForInvalidCredentials stamp: 'CMS 6/12/2022 12:41:20'!
PASSED!

!testRun: #SalesInterfaceTest #test18CantCheckoutCartWithInvalidId stamp: 'CMS 6/12/2022 12:41:20'!
PASSED!

!testRun: #SalesInterfaceTest #test19CantCheckoutTwice stamp: 'CMS 6/12/2022 12:41:20'!
PASSED!
!SalesInterfaceTest methodsFor: 'tests' stamp: 'CMS 6/12/2022 12:42:12'!
test20ListFailsAfterCheckout
	| salesInterface id |
	
	salesInterface := SalesInterface withAuthenticator: (self authenticatorWithSingleRegisteredUser) withCatalog: testObjectsFactory defaultCatalog.
	
	id := salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser.

	salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 1.
	
	salesInterface checkOutCartWithCartId: id ccn: '0123456789012345' cced: (GregorianMonthOfYear juneOf: 2024) cco: 'Carlos Miguel Soto'.
	
	self should: [	salesInterface listCartWithCartId: id] raise: Error - MessageNotUnderstood
	withMessageText: SalesInterface invalidCartIdErrorDescription.! !

!testRun: #SalesInterfaceTest #test20ListFailsAfterCheckout stamp: 'CMS 6/12/2022 12:42:13'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'CMS 6/12/2022 12:42:13'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'CMS 6/12/2022 12:42:13'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'CMS 6/12/2022 12:42:13'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'CMS 6/12/2022 12:42:13'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'CMS 6/12/2022 12:42:13'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'CMS 6/12/2022 12:42:13'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'CMS 6/12/2022 12:42:13'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'CMS 6/12/2022 12:42:13'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'CMS 6/12/2022 12:42:13'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'CMS 6/12/2022 12:42:13'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'CMS 6/12/2022 12:42:13'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'CMS 6/12/2022 12:42:13'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'CMS 6/12/2022 12:42:13'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'CMS 6/12/2022 12:42:13'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'CMS 6/12/2022 12:42:13'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'CMS 6/12/2022 12:42:13'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'CMS 6/12/2022 12:42:13'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'CMS 6/12/2022 12:42:13'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'CMS 6/12/2022 12:42:13'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'CMS 6/12/2022 12:42:13'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'CMS 6/12/2022 12:42:13'!
PASSED!

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'CMS 6/12/2022 12:42:13'!
PASSED!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'CMS 6/12/2022 12:42:13'!
PASSED!

!testRun: #SalesInterfaceTest #test10AddToCartQuantityMustBeAPositiveNumber stamp: 'CMS 6/12/2022 12:42:13'!
PASSED!

!testRun: #SalesInterfaceTest #test11AddToCartQuantityMustBeAnInteger stamp: 'CMS 6/12/2022 12:42:13'!
PASSED!

!testRun: #SalesInterfaceTest #test12ListPurchasesOfIvalidUserFails stamp: 'CMS 6/12/2022 12:42:13'!
PASSED!

!testRun: #SalesInterfaceTest #test13ListPurchasesOfFreshClientIsEmpty stamp: 'CMS 6/12/2022 12:42:13'!
PASSED!

!testRun: #SalesInterfaceTest #test14ListPurchasesAffectedByCheckout stamp: 'CMS 6/12/2022 12:42:13'!
PASSED!

!testRun: #SalesInterfaceTest #test15ListPurchasesIsemptyBeforeCheckout stamp: 'CMS 6/12/2022 12:42:13'!
PASSED!

!testRun: #SalesInterfaceTest #test16ListPurchasesAfterTwoCheckoutsShowsContentsOfBothCarts stamp: 'CMS 6/12/2022 12:42:13'!
PASSED!

!testRun: #SalesInterfaceTest #test17ListPurchasesFailesForInvalidCredentials stamp: 'CMS 6/12/2022 12:42:13'!
PASSED!

!testRun: #SalesInterfaceTest #test18CantCheckoutCartWithInvalidId stamp: 'CMS 6/12/2022 12:42:13'!
PASSED!

!testRun: #SalesInterfaceTest #test19CantCheckoutTwice stamp: 'CMS 6/12/2022 12:42:13'!
PASSED!

!testRun: #SalesInterfaceTest #test20ListFailsAfterCheckout stamp: 'CMS 6/12/2022 12:42:13'!
PASSED!

!methodRemoval: SalesInterfaceTest #test20ListFailsAfterCheckout stamp: 'CMS 6/12/2022 12:42:34'!
test20ListFailsAfterCheckout
	| salesInterface id |
	
	salesInterface := SalesInterface withAuthenticator: (self authenticatorWithSingleRegisteredUser) withCatalog: testObjectsFactory defaultCatalog.
	
	id := salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser.

	salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 1.
	
	salesInterface checkOutCartWithCartId: id ccn: '0123456789012345' cced: (GregorianMonthOfYear juneOf: 2024) cco: 'Carlos Miguel Soto'.
	
	self should: [	salesInterface listCartWithCartId: id] raise: Error - MessageNotUnderstood
	withMessageText: SalesInterface invalidCartIdErrorDescription.!

----QUIT----(12 June 2022 12:43:28) CuisUniversity-5096.image priorSource: 4648550!

----STARTUP---- (12 June 2022 12:47:03) as C:\Users\Dani\Desktop\Cursada\Inge 1\Cuis\Tuslibros\CuisUniversity-5096.image!


!testRun: #SalesInterfaceTest #test19CantCheckoutTwice stamp: 'DW 6/12/2022 12:47:48'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'DW 6/12/2022 12:47:48'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'DW 6/12/2022 12:47:48'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'DW 6/12/2022 12:47:48'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'DW 6/12/2022 12:47:48'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'DW 6/12/2022 12:47:48'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'DW 6/12/2022 12:47:48'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'DW 6/12/2022 12:47:48'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'DW 6/12/2022 12:47:48'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'DW 6/12/2022 12:47:48'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'DW 6/12/2022 12:47:48'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'DW 6/12/2022 12:47:48'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'DW 6/12/2022 12:47:48'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'DW 6/12/2022 12:47:48'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'DW 6/12/2022 12:47:48'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'DW 6/12/2022 12:47:48'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'DW 6/12/2022 12:47:48'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'DW 6/12/2022 12:47:48'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'DW 6/12/2022 12:47:48'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'DW 6/12/2022 12:47:48'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'DW 6/12/2022 12:47:48'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'DW 6/12/2022 12:47:48'!
PASSED!

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'DW 6/12/2022 12:47:48'!
PASSED!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'DW 6/12/2022 12:47:48'!
PASSED!

!testRun: #SalesInterfaceTest #test10AddToCartQuantityMustBeAPositiveNumber stamp: 'DW 6/12/2022 12:47:48'!
PASSED!

!testRun: #SalesInterfaceTest #test11AddToCartQuantityMustBeAnInteger stamp: 'DW 6/12/2022 12:47:48'!
PASSED!

!testRun: #SalesInterfaceTest #test12ListPurchasesOfIvalidUserFails stamp: 'DW 6/12/2022 12:47:48'!
PASSED!

!testRun: #SalesInterfaceTest #test13ListPurchasesOfFreshClientIsEmpty stamp: 'DW 6/12/2022 12:47:48'!
PASSED!

!testRun: #SalesInterfaceTest #test14ListPurchasesAffectedByCheckout stamp: 'DW 6/12/2022 12:47:48'!
PASSED!

!testRun: #SalesInterfaceTest #test15ListPurchasesIsemptyBeforeCheckout stamp: 'DW 6/12/2022 12:47:48'!
PASSED!

!testRun: #SalesInterfaceTest #test16ListPurchasesAfterTwoCheckoutsShowsContentsOfBothCarts stamp: 'DW 6/12/2022 12:47:48'!
PASSED!

!testRun: #SalesInterfaceTest #test17ListPurchasesFailesForInvalidCredentials stamp: 'DW 6/12/2022 12:47:48'!
PASSED!

!testRun: #SalesInterfaceTest #test18CantCheckoutCartWithInvalidId stamp: 'DW 6/12/2022 12:47:48'!
PASSED!

!testRun: #SalesInterfaceTest #test19CantCheckoutTwice stamp: 'DW 6/12/2022 12:47:48'!
PASSED!
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 12:53:25'!
test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails
	| salesInterface id |
	
	salesInterface := SalesInterface 
		withAuthenticator: (self authenticatorWithSingleRegisteredUser) 
		withCatalog: testObjectsFactory defaultCatalog 
		withMerchantProcessor: self merchantProcessorThatFails.
	
	id := salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser.

	salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 1.
	
	salesInterface checkOutCartWithCartId: id ccn: '0123456789012345' cced: (GregorianMonthOfYear juneOf: 2024) cco: 'Carlos Miguel Soto'.
	
	self should: [	
	salesInterface checkOutCartWithCartId: id ccn: '0123456789012345' cced: (GregorianMonthOfYear juneOf: 2024) cco: 'Carlos Miguel Soto'.
	] raise: Error - MessageNotUnderstood
	withMessageText: SalesInterface invalidCartIdErrorDescription.! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 12:56:02' prior: 50480330!
test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails
	| salesInterface id |
	
	salesInterface := SalesInterface 
		withAuthenticator: (self authenticatorWithSingleRegisteredUser) 
		withCatalog: testObjectsFactory defaultCatalog 
		withMerchantProcessor: self merchantProcessorThatFails.
	
	id := salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser.

	salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 1.
		
	self should: [	
	salesInterface checkOutCartWithCartId: id ccn: '0123456789012345' cced: (GregorianMonthOfYear juneOf: 2024) cco: 'Carlos Miguel Soto'.
	] raise: Error - MessageNotUnderstood
	withMessageText: SalesInterface debitErrorDescription.! !

!testRun: #SalesInterfaceTest #test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails stamp: 'DW 6/12/2022 12:56:06'!
ERROR!

!classDefinition: #MerchantProcessorDouble category: 'TusLibros' stamp: 'DW 6/12/2022 12:57:46'!
Object subclass: #MerchantProcessorDouble
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!SalesInterfaceTest methodsFor: 'objects' stamp: 'DW 6/12/2022 12:57:42'!
merchantProcessorThatFails
	^ MerchantProcessorDouble withDebitBehavior: [:a :c | SalesInterface debitErrorDescription].! !

!testRun: #SalesInterfaceTest #test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails stamp: 'DW 6/12/2022 12:58:07'!
ERROR!
!MerchantProcessorDouble class methodsFor: 'no messages' stamp: 'DW 6/12/2022 12:58:45'!
withDebitBehavior: aBehavior
	self new initalizeWithBehavior: aBehavior.! !
!MerchantProcessorDouble class methodsFor: 'as yet unclassified' stamp: 'DW 6/12/2022 12:58:51' prior: 50480410!
withDebitBehavior: debitBehavior
	self new initalizeWithBehavior: debitBehavior.! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'DW 6/12/2022 12:58:54'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'DW 6/12/2022 12:58:54'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'DW 6/12/2022 12:58:54'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'DW 6/12/2022 12:58:54'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'DW 6/12/2022 12:58:54'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'DW 6/12/2022 12:58:54'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'DW 6/12/2022 12:58:54'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'DW 6/12/2022 12:58:54'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'DW 6/12/2022 12:58:54'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'DW 6/12/2022 12:58:54'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'DW 6/12/2022 12:58:54'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'DW 6/12/2022 12:58:54'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'DW 6/12/2022 12:58:54'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'DW 6/12/2022 12:58:54'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'DW 6/12/2022 12:58:54'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'DW 6/12/2022 12:58:54'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'DW 6/12/2022 12:58:54'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'DW 6/12/2022 12:58:54'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'DW 6/12/2022 12:58:54'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'DW 6/12/2022 12:58:54'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'DW 6/12/2022 12:58:54'!
PASSED!

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'DW 6/12/2022 12:58:54'!
PASSED!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'DW 6/12/2022 12:58:54'!
PASSED!

!testRun: #SalesInterfaceTest #test10AddToCartQuantityMustBeAPositiveNumber stamp: 'DW 6/12/2022 12:58:55'!
PASSED!

!testRun: #SalesInterfaceTest #test11AddToCartQuantityMustBeAnInteger stamp: 'DW 6/12/2022 12:58:55'!
PASSED!

!testRun: #SalesInterfaceTest #test12ListPurchasesOfIvalidUserFails stamp: 'DW 6/12/2022 12:58:55'!
PASSED!

!testRun: #SalesInterfaceTest #test13ListPurchasesOfFreshClientIsEmpty stamp: 'DW 6/12/2022 12:58:55'!
PASSED!

!testRun: #SalesInterfaceTest #test14ListPurchasesAffectedByCheckout stamp: 'DW 6/12/2022 12:58:55'!
PASSED!

!testRun: #SalesInterfaceTest #test15ListPurchasesIsemptyBeforeCheckout stamp: 'DW 6/12/2022 12:58:55'!
PASSED!

!testRun: #SalesInterfaceTest #test16ListPurchasesAfterTwoCheckoutsShowsContentsOfBothCarts stamp: 'DW 6/12/2022 12:58:55'!
PASSED!

!testRun: #SalesInterfaceTest #test17ListPurchasesFailesForInvalidCredentials stamp: 'DW 6/12/2022 12:58:55'!
PASSED!

!testRun: #SalesInterfaceTest #test18CantCheckoutCartWithInvalidId stamp: 'DW 6/12/2022 12:58:55'!
PASSED!

!testRun: #SalesInterfaceTest #test19CantCheckoutTwice stamp: 'DW 6/12/2022 12:58:55'!
PASSED!

!testRun: #SalesInterfaceTest #test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails stamp: 'DW 6/12/2022 12:58:55'!
ERROR!

!testRun: #SalesInterfaceTest #test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails stamp: 'DW 6/12/2022 12:58:55'!
ERROR!
!MerchantProcessorDouble methodsFor: 'initialize' stamp: 'DW 6/12/2022 12:59:12'!
initalizeWithBehavior: aBlockClosure 
	self shouldBeImplemented.! !

!classDefinition: #MerchantProcessorDouble category: 'TusLibros' stamp: 'DW 6/12/2022 12:59:34'!
Object subclass: #MerchantProcessorDouble
	instanceVariableNames: 'behavior'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!MerchantProcessorDouble methodsFor: 'initialize' stamp: 'DW 6/12/2022 12:59:30' prior: 50480541!
initalizeWithBehavior: debitBehavior 
	behavior := debitBehavior! !

!testRun: #SalesInterfaceTest #test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails stamp: 'DW 6/12/2022 12:59:36'!
ERROR!
!MerchantProcessorDouble methodsFor: 'debit' stamp: 'DW 6/12/2022 13:00:29'!
debit: anAmmount from: aCreditCard
	^ behavior value: anAmmount value: aCreditCard .! !
!MerchantProcessorDouble methodsFor: 'debit' stamp: 'DW 6/12/2022 13:00:32' prior: 50480563!
debit: anAmount from: aCreditCard
	^ behavior value: anAmount value: aCreditCard .! !

!testRun: #SalesInterfaceTest #test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails stamp: 'DW 6/12/2022 13:00:42'!
ERROR!
!SalesInterface class methodsFor: 'instance creation' stamp: 'DW 6/12/2022 13:00:50'!
withAuthenticator: aCredentialAuthenticatorDouble withCatalog: aDictionary withMerchantProcessor: aClass 
	"DO NOT FORGET TO RENAME COLLABORATORS AND REMOVE THIS COMMENT!!!!"
	self shouldBeImplemented.
	^self new initializeWithAuthenticator: aCredentialAuthenticatorDouble withCatalog: aDictionary withMerchantProcessor: aClass ! !
!SalesInterface class methodsFor: 'instance creation' stamp: 'DW 6/12/2022 13:01:15' prior: 50480579!
withAuthenticator: aCredentialAuthenticatorDouble withCatalog: aDictionary withMerchantProcessor: aClass 
	^self new initializeWithAuthenticator: aCredentialAuthenticatorDouble withCatalog: aDictionary withMerchantProcessor: aClass ! !
!SalesInterface class methodsFor: 'instance creation' stamp: 'DW 6/12/2022 13:01:29' prior: 50480593!
withAuthenticator: aCredentialAuthenticatorDouble withCatalog: aDictionary withMerchantProcessor: aMerchantProcessor 
	^self new initializeWithAuthenticator: aCredentialAuthenticatorDouble withCatalog: aDictionary withMerchantProcessor: aMerchantProcessor ! !
!SalesInterface class methodsFor: 'instance creation' stamp: 'DW 6/12/2022 13:01:34' prior: 50480604!
withAuthenticator: aCredentialAuthenticatorDouble withCatalog: aCatalog withMerchantProcessor: aMerchantProcessor 
	^self new initializeWithAuthenticator: aCredentialAuthenticatorDouble withCatalog: aCatalog withMerchantProcessor: aMerchantProcessor ! !
!SalesInterface class methodsFor: 'instance creation' stamp: 'DW 6/12/2022 13:01:41' prior: 50480616!
withAuthenticator: aCredentialAutheticator withCatalog: aCatalog withMerchantProcessor: aMerchantProcessor 
	^self new initializeWithAuthenticator: aCredentialAutheticator withCatalog: aCatalog withMerchantProcessor: aMerchantProcessor ! !

!testRun: #SalesInterfaceTest #test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails stamp: 'DW 6/12/2022 13:01:44'!
ERROR!
!MerchantProcessorDouble class methodsFor: 'as yet unclassified' stamp: 'DW 6/12/2022 13:01:59' prior: 50480416!
withDebitBehavior: debitBehavior
	^ self new initalizeWithBehavior: debitBehavior.! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'DW 6/12/2022 13:02:03'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'DW 6/12/2022 13:02:03'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'DW 6/12/2022 13:02:03'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'DW 6/12/2022 13:02:03'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'DW 6/12/2022 13:02:03'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'DW 6/12/2022 13:02:03'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'DW 6/12/2022 13:02:03'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'DW 6/12/2022 13:02:03'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'DW 6/12/2022 13:02:03'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'DW 6/12/2022 13:02:03'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'DW 6/12/2022 13:02:03'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'DW 6/12/2022 13:02:03'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'DW 6/12/2022 13:02:03'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'DW 6/12/2022 13:02:03'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'DW 6/12/2022 13:02:03'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'DW 6/12/2022 13:02:03'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'DW 6/12/2022 13:02:03'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'DW 6/12/2022 13:02:03'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'DW 6/12/2022 13:02:03'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'DW 6/12/2022 13:02:03'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'DW 6/12/2022 13:02:03'!
PASSED!

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'DW 6/12/2022 13:02:03'!
PASSED!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'DW 6/12/2022 13:02:03'!
PASSED!

!testRun: #SalesInterfaceTest #test10AddToCartQuantityMustBeAPositiveNumber stamp: 'DW 6/12/2022 13:02:03'!
PASSED!

!testRun: #SalesInterfaceTest #test11AddToCartQuantityMustBeAnInteger stamp: 'DW 6/12/2022 13:02:03'!
PASSED!

!testRun: #SalesInterfaceTest #test12ListPurchasesOfIvalidUserFails stamp: 'DW 6/12/2022 13:02:03'!
PASSED!

!testRun: #SalesInterfaceTest #test13ListPurchasesOfFreshClientIsEmpty stamp: 'DW 6/12/2022 13:02:03'!
PASSED!

!testRun: #SalesInterfaceTest #test14ListPurchasesAffectedByCheckout stamp: 'DW 6/12/2022 13:02:03'!
PASSED!

!testRun: #SalesInterfaceTest #test15ListPurchasesIsemptyBeforeCheckout stamp: 'DW 6/12/2022 13:02:03'!
PASSED!

!testRun: #SalesInterfaceTest #test16ListPurchasesAfterTwoCheckoutsShowsContentsOfBothCarts stamp: 'DW 6/12/2022 13:02:03'!
PASSED!

!testRun: #SalesInterfaceTest #test17ListPurchasesFailesForInvalidCredentials stamp: 'DW 6/12/2022 13:02:03'!
PASSED!

!testRun: #SalesInterfaceTest #test18CantCheckoutCartWithInvalidId stamp: 'DW 6/12/2022 13:02:03'!
PASSED!

!testRun: #SalesInterfaceTest #test19CantCheckoutTwice stamp: 'DW 6/12/2022 13:02:03'!
PASSED!

!testRun: #SalesInterfaceTest #test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails stamp: 'DW 6/12/2022 13:02:03'!
ERROR!

!testRun: #SalesInterfaceTest #test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails stamp: 'DW 6/12/2022 13:02:03'!
ERROR!

!classDefinition: #SalesInterface category: 'TusLibros' stamp: 'DW 6/12/2022 13:02:08'!
Object subclass: #SalesInterface
	instanceVariableNames: 'lastId credentialAuthenticator carts catalog clientCart cartClient purchases saleBooks credentialAutheticator'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #SalesInterface category: 'TusLibros' stamp: 'DW 6/12/2022 13:02:08'!
Object subclass: #SalesInterface
	instanceVariableNames: 'lastId credentialAuthenticator carts catalog clientCart cartClient purchases saleBooks credentialAutheticator merchantProcessor'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!SalesInterface methodsFor: 'initialize' stamp: 'DW 6/12/2022 13:02:08'!
initializeWithAuthenticator: aCredentialAutheticator withCatalog: aCatalog withMerchantProcessor: aMerchantProcessor 
	self shouldBeImplemented.
	credentialAutheticator := aCredentialAutheticator.
	catalog := aCatalog.
	merchantProcessor := aMerchantProcessor.! !
!SalesInterface methodsFor: 'initialize' stamp: 'DW 6/12/2022 13:03:19' prior: 50480790!
initializeWithAuthenticator: aCredentialAutheticator withCatalog: aCatalog withMerchantProcessor: aMerchantProcessor 
	
	credentialAutheticator := aCredentialAutheticator.
	merchantProcessor := aMerchantProcessor.
	catalog := aCatalog.
	
	lastId := 0.
	carts := Dictionary new.
	clientCart := Dictionary new.
	cartClient := Dictionary new.
	purchases := Dictionary new.! !

!testRun: #SalesInterfaceTest #test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails stamp: 'DW 6/12/2022 13:03:20'!
ERROR!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'DW 6/12/2022 13:03:38'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'DW 6/12/2022 13:03:38'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'DW 6/12/2022 13:03:39'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'DW 6/12/2022 13:03:39'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'DW 6/12/2022 13:03:39'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'DW 6/12/2022 13:03:39'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'DW 6/12/2022 13:03:39'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'DW 6/12/2022 13:03:39'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'DW 6/12/2022 13:03:39'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'DW 6/12/2022 13:03:39'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'DW 6/12/2022 13:03:39'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'DW 6/12/2022 13:03:39'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'DW 6/12/2022 13:03:39'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'DW 6/12/2022 13:03:39'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'DW 6/12/2022 13:03:39'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'DW 6/12/2022 13:03:39'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'DW 6/12/2022 13:03:39'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'DW 6/12/2022 13:03:39'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'DW 6/12/2022 13:03:39'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'DW 6/12/2022 13:03:39'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'DW 6/12/2022 13:03:39'!
PASSED!

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'DW 6/12/2022 13:03:39'!
PASSED!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'DW 6/12/2022 13:03:39'!
PASSED!

!testRun: #SalesInterfaceTest #test10AddToCartQuantityMustBeAPositiveNumber stamp: 'DW 6/12/2022 13:03:39'!
PASSED!

!testRun: #SalesInterfaceTest #test11AddToCartQuantityMustBeAnInteger stamp: 'DW 6/12/2022 13:03:39'!
PASSED!

!testRun: #SalesInterfaceTest #test12ListPurchasesOfIvalidUserFails stamp: 'DW 6/12/2022 13:03:39'!
PASSED!

!testRun: #SalesInterfaceTest #test13ListPurchasesOfFreshClientIsEmpty stamp: 'DW 6/12/2022 13:03:39'!
PASSED!

!testRun: #SalesInterfaceTest #test14ListPurchasesAffectedByCheckout stamp: 'DW 6/12/2022 13:03:39'!
PASSED!

!testRun: #SalesInterfaceTest #test15ListPurchasesIsemptyBeforeCheckout stamp: 'DW 6/12/2022 13:03:39'!
PASSED!

!testRun: #SalesInterfaceTest #test16ListPurchasesAfterTwoCheckoutsShowsContentsOfBothCarts stamp: 'DW 6/12/2022 13:03:39'!
PASSED!

!testRun: #SalesInterfaceTest #test17ListPurchasesFailesForInvalidCredentials stamp: 'DW 6/12/2022 13:03:39'!
PASSED!

!testRun: #SalesInterfaceTest #test18CantCheckoutCartWithInvalidId stamp: 'DW 6/12/2022 13:03:39'!
PASSED!

!testRun: #SalesInterfaceTest #test19CantCheckoutTwice stamp: 'DW 6/12/2022 13:03:39'!
PASSED!

!testRun: #SalesInterfaceTest #test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails stamp: 'DW 6/12/2022 13:03:39'!
ERROR!

!testRun: #SalesInterfaceTest #test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails stamp: 'DW 6/12/2022 13:03:39'!
ERROR!

!testRun: #SalesInterfaceTest #test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails stamp: 'DW 6/12/2022 13:03:48'!
ERROR!

!testRun: #SalesInterfaceTest #test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails stamp: 'DW 6/12/2022 13:03:48'!
ERROR!

!testRun: #SalesInterfaceTest #test19CantCheckoutTwice stamp: 'DW 6/12/2022 13:03:52'!
PASSED!

!testRun: #SalesInterfaceTest #test18CantCheckoutCartWithInvalidId stamp: 'DW 6/12/2022 13:03:53'!
PASSED!

!testRun: #SalesInterfaceTest #test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails stamp: 'DW 6/12/2022 13:04:33'!
ERROR!
!SalesInterface methodsFor: 'initialize' stamp: 'DW 6/12/2022 13:06:26' prior: 50480802!
initializeWithAuthenticator: aCredentialAutheticator withCatalog: aCatalog withMerchantProcessor: aMerchantProcessor 
	
	credentialAuthenticator := aCredentialAutheticator.
	merchantProcessor := aMerchantProcessor.
	catalog := aCatalog.
	
	lastId := 0.
	carts := Dictionary new.
	clientCart := Dictionary new.
	cartClient := Dictionary new.
	purchases := Dictionary new.! !

Object subclass: #SalesInterface
	instanceVariableNames: 'lastId credentialAuthenticator carts catalog clientCart cartClient purchases saleBooks merchantProcessor'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #SalesInterface category: 'TusLibros' stamp: 'DW 6/12/2022 13:06:35'!
Object subclass: #SalesInterface
	instanceVariableNames: 'lastId credentialAuthenticator carts catalog clientCart cartClient purchases saleBooks merchantProcessor'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'DW 6/12/2022 13:06:40'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'DW 6/12/2022 13:06:40'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'DW 6/12/2022 13:06:40'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'DW 6/12/2022 13:06:40'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'DW 6/12/2022 13:06:40'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'DW 6/12/2022 13:06:40'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'DW 6/12/2022 13:06:40'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'DW 6/12/2022 13:06:40'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'DW 6/12/2022 13:06:40'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'DW 6/12/2022 13:06:40'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'DW 6/12/2022 13:06:40'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'DW 6/12/2022 13:06:40'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'DW 6/12/2022 13:06:40'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'DW 6/12/2022 13:06:40'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'DW 6/12/2022 13:06:40'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'DW 6/12/2022 13:06:40'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'DW 6/12/2022 13:06:41'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'DW 6/12/2022 13:06:41'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'DW 6/12/2022 13:06:41'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'DW 6/12/2022 13:06:41'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'DW 6/12/2022 13:06:41'!
PASSED!

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'DW 6/12/2022 13:06:41'!
PASSED!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'DW 6/12/2022 13:06:41'!
PASSED!

!testRun: #SalesInterfaceTest #test10AddToCartQuantityMustBeAPositiveNumber stamp: 'DW 6/12/2022 13:06:41'!
PASSED!

!testRun: #SalesInterfaceTest #test11AddToCartQuantityMustBeAnInteger stamp: 'DW 6/12/2022 13:06:41'!
PASSED!

!testRun: #SalesInterfaceTest #test12ListPurchasesOfIvalidUserFails stamp: 'DW 6/12/2022 13:06:41'!
PASSED!

!testRun: #SalesInterfaceTest #test13ListPurchasesOfFreshClientIsEmpty stamp: 'DW 6/12/2022 13:06:41'!
PASSED!

!testRun: #SalesInterfaceTest #test14ListPurchasesAffectedByCheckout stamp: 'DW 6/12/2022 13:06:41'!
PASSED!

!testRun: #SalesInterfaceTest #test15ListPurchasesIsemptyBeforeCheckout stamp: 'DW 6/12/2022 13:06:41'!
PASSED!

!testRun: #SalesInterfaceTest #test16ListPurchasesAfterTwoCheckoutsShowsContentsOfBothCarts stamp: 'DW 6/12/2022 13:06:41'!
PASSED!

!testRun: #SalesInterfaceTest #test17ListPurchasesFailesForInvalidCredentials stamp: 'DW 6/12/2022 13:06:41'!
PASSED!

!testRun: #SalesInterfaceTest #test18CantCheckoutCartWithInvalidId stamp: 'DW 6/12/2022 13:06:41'!
PASSED!

!testRun: #SalesInterfaceTest #test19CantCheckoutTwice stamp: 'DW 6/12/2022 13:06:41'!
PASSED!

!testRun: #SalesInterfaceTest #test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails stamp: 'DW 6/12/2022 13:06:41'!
ERROR!

!testRun: #SalesInterfaceTest #test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails stamp: 'DW 6/12/2022 13:06:41'!
ERROR!
!SalesInterface class methodsFor: 'error description' stamp: 'DW 6/12/2022 13:06:50'!
debitErrorDescription
	self shouldBeImplemented.! !
!SalesInterface class methodsFor: 'error description' stamp: 'DW 6/12/2022 13:07:20' prior: 50481111!
debitErrorDescription
	^ 'could not debit'.! !

!testRun: #SalesInterfaceTest #test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails stamp: 'DW 6/12/2022 13:07:22'!
FAILURE!
!SalesInterface methodsFor: 'interface' stamp: 'DW 6/12/2022 13:10:49' prior: 50479914!
checkOutCartWithCartId: cartId ccn: creditCardNumber cced: expirationDate cco: ownerName
	| creditCard |
	self assertCartWithIdExists: cartId.
	creditCard := CreditCard expiringOn: expirationDate.
	Cashier toCheckout: (carts at: cartId)  charging: creditCard throught: merchantProcessor on: (GregorianDay today) registeringOn: OrderedCollection new.
	
	purchases at: (cartClient at: cartId) ifAbsent: [purchases at: (cartClient at: cartId) put: Bag new].
	(purchases at: (cartClient at: cartId)) addAll: (self getCartWithId: cartId) books.
	carts removeKey: cartId.! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'DW 6/12/2022 13:10:53'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'DW 6/12/2022 13:10:53'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'DW 6/12/2022 13:10:53'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'DW 6/12/2022 13:10:53'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'DW 6/12/2022 13:10:53'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'DW 6/12/2022 13:10:53'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'DW 6/12/2022 13:10:54'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'DW 6/12/2022 13:10:54'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'DW 6/12/2022 13:10:54'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'DW 6/12/2022 13:10:54'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'DW 6/12/2022 13:10:54'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'DW 6/12/2022 13:10:54'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'DW 6/12/2022 13:10:54'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'DW 6/12/2022 13:10:54'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'DW 6/12/2022 13:10:54'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'DW 6/12/2022 13:10:54'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'DW 6/12/2022 13:10:54'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'DW 6/12/2022 13:10:54'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'DW 6/12/2022 13:10:54'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'DW 6/12/2022 13:10:54'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'DW 6/12/2022 13:10:54'!
PASSED!

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'DW 6/12/2022 13:10:54'!
PASSED!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'DW 6/12/2022 13:10:54'!
PASSED!

!testRun: #SalesInterfaceTest #test10AddToCartQuantityMustBeAPositiveNumber stamp: 'DW 6/12/2022 13:10:54'!
PASSED!

!testRun: #SalesInterfaceTest #test11AddToCartQuantityMustBeAnInteger stamp: 'DW 6/12/2022 13:10:54'!
PASSED!

!testRun: #SalesInterfaceTest #test12ListPurchasesOfIvalidUserFails stamp: 'DW 6/12/2022 13:10:54'!
PASSED!

!testRun: #SalesInterfaceTest #test13ListPurchasesOfFreshClientIsEmpty stamp: 'DW 6/12/2022 13:10:54'!
PASSED!

!testRun: #SalesInterfaceTest #test14ListPurchasesAffectedByCheckout stamp: 'DW 6/12/2022 13:10:54'!
ERROR!

!testRun: #SalesInterfaceTest #test15ListPurchasesIsemptyBeforeCheckout stamp: 'DW 6/12/2022 13:10:54'!
PASSED!

!testRun: #SalesInterfaceTest #test16ListPurchasesAfterTwoCheckoutsShowsContentsOfBothCarts stamp: 'DW 6/12/2022 13:10:54'!
ERROR!

!testRun: #SalesInterfaceTest #test17ListPurchasesFailesForInvalidCredentials stamp: 'DW 6/12/2022 13:10:54'!
PASSED!

!testRun: #SalesInterfaceTest #test18CantCheckoutCartWithInvalidId stamp: 'DW 6/12/2022 13:10:54'!
PASSED!

!testRun: #SalesInterfaceTest #test19CantCheckoutTwice stamp: 'DW 6/12/2022 13:10:54'!
ERROR!

!testRun: #SalesInterfaceTest #test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails stamp: 'DW 6/12/2022 13:10:54'!
ERROR!
!SalesInterface methodsFor: 'interface' stamp: 'DW 6/12/2022 13:11:22' prior: 50481125!
checkOutCartWithCartId: cartId ccn: creditCardNumber cced: expirationDate cco: ownerName
	| creditCard |
	self assertCartWithIdExists: cartId.
	creditCard := CreditCard expiringOn: expirationDate.
	merchantProcessor ifNotNil: [
	Cashier toCheckout: (carts at: cartId)  charging: creditCard throught: merchantProcessor on: (GregorianDay today) registeringOn: OrderedCollection new.
	].
	purchases at: (cartClient at: cartId) ifAbsent: [purchases at: (cartClient at: cartId) put: Bag new].
	(purchases at: (cartClient at: cartId)) addAll: (self getCartWithId: cartId) books.
	carts removeKey: cartId.! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'DW 6/12/2022 13:11:23'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'DW 6/12/2022 13:11:23'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'DW 6/12/2022 13:11:23'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'DW 6/12/2022 13:11:23'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'DW 6/12/2022 13:11:23'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'DW 6/12/2022 13:11:23'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'DW 6/12/2022 13:11:23'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'DW 6/12/2022 13:11:23'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'DW 6/12/2022 13:11:23'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'DW 6/12/2022 13:11:23'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'DW 6/12/2022 13:11:23'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'DW 6/12/2022 13:11:23'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'DW 6/12/2022 13:11:23'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'DW 6/12/2022 13:11:23'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'DW 6/12/2022 13:11:23'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'DW 6/12/2022 13:11:23'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'DW 6/12/2022 13:11:23'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'DW 6/12/2022 13:11:23'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'DW 6/12/2022 13:11:23'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'DW 6/12/2022 13:11:23'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'DW 6/12/2022 13:11:23'!
PASSED!

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'DW 6/12/2022 13:11:23'!
PASSED!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'DW 6/12/2022 13:11:23'!
PASSED!

!testRun: #SalesInterfaceTest #test10AddToCartQuantityMustBeAPositiveNumber stamp: 'DW 6/12/2022 13:11:23'!
PASSED!

!testRun: #SalesInterfaceTest #test11AddToCartQuantityMustBeAnInteger stamp: 'DW 6/12/2022 13:11:23'!
PASSED!

!testRun: #SalesInterfaceTest #test12ListPurchasesOfIvalidUserFails stamp: 'DW 6/12/2022 13:11:23'!
PASSED!

!testRun: #SalesInterfaceTest #test13ListPurchasesOfFreshClientIsEmpty stamp: 'DW 6/12/2022 13:11:23'!
PASSED!

!testRun: #SalesInterfaceTest #test14ListPurchasesAffectedByCheckout stamp: 'DW 6/12/2022 13:11:23'!
PASSED!

!testRun: #SalesInterfaceTest #test15ListPurchasesIsemptyBeforeCheckout stamp: 'DW 6/12/2022 13:11:23'!
PASSED!

!testRun: #SalesInterfaceTest #test16ListPurchasesAfterTwoCheckoutsShowsContentsOfBothCarts stamp: 'DW 6/12/2022 13:11:23'!
PASSED!

!testRun: #SalesInterfaceTest #test17ListPurchasesFailesForInvalidCredentials stamp: 'DW 6/12/2022 13:11:24'!
PASSED!

!testRun: #SalesInterfaceTest #test18CantCheckoutCartWithInvalidId stamp: 'DW 6/12/2022 13:11:24'!
PASSED!

!testRun: #SalesInterfaceTest #test19CantCheckoutTwice stamp: 'DW 6/12/2022 13:11:24'!
PASSED!

!testRun: #SalesInterfaceTest #test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails stamp: 'DW 6/12/2022 13:11:24'!
ERROR!

!testRun: #SalesInterfaceTest #test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails stamp: 'DW 6/12/2022 13:11:24'!
ERROR!

!testRun: #SalesInterfaceTest #test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails stamp: 'DW 6/12/2022 13:12:04'!
ERROR!

!testRun: #SalesInterfaceTest #test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails stamp: 'DW 6/12/2022 13:12:21'!
ERROR!

----QUIT----(12 June 2022 13:13:14) CuisUniversity-5096.image priorSource: 4753850!

----STARTUP---- (12 June 2022 15:07:17) as C:\Users\Dani\Desktop\Cursada\Inge 1\Cuis\Tuslibros\CuisUniversity-5096.image!


!testRun: #SalesInterfaceTest #test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails stamp: 'DW 6/12/2022 15:08:56'!
ERROR!
!StoreTestObjectsFactory methodsFor: 'credit card' stamp: 'DW 6/12/2022 15:10:26'!
monthOfNotExpiredCreditCard
	
	^Month month: today monthIndex year: today yearNumber.! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:10:49' prior: 50480361!
test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails
	| salesInterface id |
	
	salesInterface := SalesInterface 
		withAuthenticator: (self authenticatorWithSingleRegisteredUser) 
		withCatalog: testObjectsFactory defaultCatalog 
		withMerchantProcessor: self merchantProcessorThatFails.
	
	id := salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser.

	salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 1.
		
	self should: [	
	salesInterface checkOutCartWithCartId: id ccn: '0123456789012345' cced: testObjectsFactory monthOfNotExpiredCreditCard cco: 'Carlos Miguel Soto'.
	] raise: Error - MessageNotUnderstood
	withMessageText: SalesInterface debitErrorDescription.! !

!testRun: #SalesInterfaceTest #test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails stamp: 'DW 6/12/2022 15:10:50'!
ERROR!

!testRun: #SalesInterfaceTest #test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails stamp: 'DW 6/12/2022 15:11:09'!
ERROR!
!SalesInterface methodsFor: 'interface' stamp: 'DW 6/12/2022 15:11:36' prior: 50481261!
checkOutCartWithCartId: cartId ccn: creditCardNumber cced: expirationDate cco: ownerName
	| creditCard |
	self assertCartWithIdExists: cartId.
	creditCard := CreditCard expiringOn: expirationDate.
	merchantProcessor ifNotNil: [
	Cashier toCheckout: (carts at: cartId)  charging: creditCard throught: merchantProcessor on: (DateAndTime now) registeringOn: OrderedCollection new.
	].
	purchases at: (cartClient at: cartId) ifAbsent: [purchases at: (cartClient at: cartId) put: Bag new].
	(purchases at: (cartClient at: cartId)) addAll: (self getCartWithId: cartId) books.
	carts removeKey: cartId.! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'DW 6/12/2022 15:11:37'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'DW 6/12/2022 15:11:37'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'DW 6/12/2022 15:11:37'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'DW 6/12/2022 15:11:37'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'DW 6/12/2022 15:11:37'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'DW 6/12/2022 15:11:37'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'DW 6/12/2022 15:11:37'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'DW 6/12/2022 15:11:37'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'DW 6/12/2022 15:11:37'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'DW 6/12/2022 15:11:37'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'DW 6/12/2022 15:11:37'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'DW 6/12/2022 15:11:37'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'DW 6/12/2022 15:11:37'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'DW 6/12/2022 15:11:37'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'DW 6/12/2022 15:11:37'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'DW 6/12/2022 15:11:37'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'DW 6/12/2022 15:11:37'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'DW 6/12/2022 15:11:37'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'DW 6/12/2022 15:11:37'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'DW 6/12/2022 15:11:37'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'DW 6/12/2022 15:11:37'!
PASSED!

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'DW 6/12/2022 15:11:37'!
PASSED!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'DW 6/12/2022 15:11:37'!
PASSED!

!testRun: #SalesInterfaceTest #test10AddToCartQuantityMustBeAPositiveNumber stamp: 'DW 6/12/2022 15:11:37'!
PASSED!

!testRun: #SalesInterfaceTest #test11AddToCartQuantityMustBeAnInteger stamp: 'DW 6/12/2022 15:11:37'!
PASSED!

!testRun: #SalesInterfaceTest #test12ListPurchasesOfIvalidUserFails stamp: 'DW 6/12/2022 15:11:37'!
PASSED!

!testRun: #SalesInterfaceTest #test13ListPurchasesOfFreshClientIsEmpty stamp: 'DW 6/12/2022 15:11:37'!
PASSED!

!testRun: #SalesInterfaceTest #test14ListPurchasesAffectedByCheckout stamp: 'DW 6/12/2022 15:11:37'!
PASSED!

!testRun: #SalesInterfaceTest #test15ListPurchasesIsemptyBeforeCheckout stamp: 'DW 6/12/2022 15:11:37'!
PASSED!

!testRun: #SalesInterfaceTest #test16ListPurchasesAfterTwoCheckoutsShowsContentsOfBothCarts stamp: 'DW 6/12/2022 15:11:37'!
PASSED!

!testRun: #SalesInterfaceTest #test17ListPurchasesFailesForInvalidCredentials stamp: 'DW 6/12/2022 15:11:37'!
PASSED!

!testRun: #SalesInterfaceTest #test18CantCheckoutCartWithInvalidId stamp: 'DW 6/12/2022 15:11:38'!
PASSED!

!testRun: #SalesInterfaceTest #test19CantCheckoutTwice stamp: 'DW 6/12/2022 15:11:38'!
PASSED!

!testRun: #SalesInterfaceTest #test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails stamp: 'DW 6/12/2022 15:11:38'!
FAILURE!

!testRun: #SalesInterfaceTest #test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails stamp: 'DW 6/12/2022 15:11:38'!
FAILURE!

!testRun: #SalesInterfaceTest #test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails stamp: 'DW 6/12/2022 15:11:49'!
FAILURE!

!testRun: #SalesInterfaceTest #test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails stamp: 'DW 6/12/2022 15:11:49'!
FAILURE!
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:12:13' prior: 50481427!
test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails
	| salesInterface id |
	
	salesInterface := SalesInterface 
		withAuthenticator: (self authenticatorWithSingleRegisteredUser) 
		withCatalog: testObjectsFactory defaultCatalog 
		withMerchantProcessor: self merchantProcessorThatFails.
	
	id := salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser.

	salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 1.
		
	self should: [	
	salesInterface checkOutCartWithCartId: id ccn: '0123456789012345' cced: testObjectsFactory monthOfExpiredCreditCard cco: 'Carlos Miguel Soto'.
	] raise: Error - MessageNotUnderstood
	withMessageText: SalesInterface debitErrorDescription.! !
!StoreTestObjectsFactory methodsFor: 'credit card' stamp: 'DW 6/12/2022 15:12:23'!
monthOfExpiredCreditCard
	
	^Month month: today monthIndex year: today yearNumber.! !

!methodRemoval: StoreTestObjectsFactory #monthOfNotExpiredCreditCard stamp: 'DW 6/12/2022 15:12:23'!
monthOfNotExpiredCreditCard
	
	^Month month: today monthIndex year: today yearNumber.!
!StoreTestObjectsFactory methodsFor: 'credit card' stamp: 'DW 6/12/2022 15:12:42' prior: 50481639!
monthOfExpiredCreditCard
	
	^Month month: today monthIndex year: today yearNumber - 1.! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'DW 6/12/2022 15:12:43'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'DW 6/12/2022 15:12:43'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'DW 6/12/2022 15:12:43'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'DW 6/12/2022 15:12:43'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'DW 6/12/2022 15:12:43'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'DW 6/12/2022 15:12:43'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'DW 6/12/2022 15:12:43'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'DW 6/12/2022 15:12:43'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'DW 6/12/2022 15:12:43'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'DW 6/12/2022 15:12:43'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'DW 6/12/2022 15:12:43'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'DW 6/12/2022 15:12:43'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'DW 6/12/2022 15:12:43'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'DW 6/12/2022 15:12:43'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'DW 6/12/2022 15:12:43'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'DW 6/12/2022 15:12:43'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'DW 6/12/2022 15:12:43'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'DW 6/12/2022 15:12:44'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'DW 6/12/2022 15:12:44'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'DW 6/12/2022 15:12:44'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'DW 6/12/2022 15:12:44'!
PASSED!

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'DW 6/12/2022 15:12:44'!
PASSED!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'DW 6/12/2022 15:12:44'!
PASSED!

!testRun: #SalesInterfaceTest #test10AddToCartQuantityMustBeAPositiveNumber stamp: 'DW 6/12/2022 15:12:44'!
PASSED!

!testRun: #SalesInterfaceTest #test11AddToCartQuantityMustBeAnInteger stamp: 'DW 6/12/2022 15:12:44'!
PASSED!

!testRun: #SalesInterfaceTest #test12ListPurchasesOfIvalidUserFails stamp: 'DW 6/12/2022 15:12:44'!
PASSED!

!testRun: #SalesInterfaceTest #test13ListPurchasesOfFreshClientIsEmpty stamp: 'DW 6/12/2022 15:12:44'!
PASSED!

!testRun: #SalesInterfaceTest #test14ListPurchasesAffectedByCheckout stamp: 'DW 6/12/2022 15:12:44'!
PASSED!

!testRun: #SalesInterfaceTest #test15ListPurchasesIsemptyBeforeCheckout stamp: 'DW 6/12/2022 15:12:44'!
PASSED!

!testRun: #SalesInterfaceTest #test16ListPurchasesAfterTwoCheckoutsShowsContentsOfBothCarts stamp: 'DW 6/12/2022 15:12:44'!
PASSED!

!testRun: #SalesInterfaceTest #test17ListPurchasesFailesForInvalidCredentials stamp: 'DW 6/12/2022 15:12:44'!
PASSED!

!testRun: #SalesInterfaceTest #test18CantCheckoutCartWithInvalidId stamp: 'DW 6/12/2022 15:12:44'!
PASSED!

!testRun: #SalesInterfaceTest #test19CantCheckoutTwice stamp: 'DW 6/12/2022 15:12:44'!
PASSED!

!testRun: #SalesInterfaceTest #test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails stamp: 'DW 6/12/2022 15:12:44'!
FAILURE!

!testRun: #SalesInterfaceTest #test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails stamp: 'DW 6/12/2022 15:12:44'!
FAILURE!
!SalesInterface methodsFor: 'interface' stamp: 'DW 6/12/2022 15:14:23' prior: 50481462!
checkOutCartWithCartId: cartId ccn: creditCardNumber cced: expirationDate cco: ownerName
	| creditCard |
	self assertCartWithIdExists: cartId.
	creditCard := CreditCard expiringOn: expirationDate.
	merchantProcessor ifNotNil: [
	[Cashier toCheckout: (carts at: cartId)  charging: creditCard throught: merchantProcessor on: (DateAndTime now) registeringOn: OrderedCollection new]
	on: Error
	do:  [self error: self class debitErrorDescription] 
	].
	purchases at: (cartClient at: cartId) ifAbsent: [purchases at: (cartClient at: cartId) put: Bag new].
	(purchases at: (cartClient at: cartId)) addAll: (self getCartWithId: cartId) books.
	carts removeKey: cartId.! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'DW 6/12/2022 15:14:24'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'DW 6/12/2022 15:14:24'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'DW 6/12/2022 15:14:24'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'DW 6/12/2022 15:14:24'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'DW 6/12/2022 15:14:24'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'DW 6/12/2022 15:14:24'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'DW 6/12/2022 15:14:24'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'DW 6/12/2022 15:14:24'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'DW 6/12/2022 15:14:24'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'DW 6/12/2022 15:14:24'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'DW 6/12/2022 15:14:24'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'DW 6/12/2022 15:14:24'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'DW 6/12/2022 15:14:24'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'DW 6/12/2022 15:14:24'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'DW 6/12/2022 15:14:24'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'DW 6/12/2022 15:14:24'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'DW 6/12/2022 15:14:24'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'DW 6/12/2022 15:14:24'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'DW 6/12/2022 15:14:24'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'DW 6/12/2022 15:14:24'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'DW 6/12/2022 15:14:24'!
PASSED!

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'DW 6/12/2022 15:14:24'!
PASSED!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'DW 6/12/2022 15:14:24'!
PASSED!

!testRun: #SalesInterfaceTest #test10AddToCartQuantityMustBeAPositiveNumber stamp: 'DW 6/12/2022 15:14:24'!
PASSED!

!testRun: #SalesInterfaceTest #test11AddToCartQuantityMustBeAnInteger stamp: 'DW 6/12/2022 15:14:24'!
PASSED!

!testRun: #SalesInterfaceTest #test12ListPurchasesOfIvalidUserFails stamp: 'DW 6/12/2022 15:14:24'!
PASSED!

!testRun: #SalesInterfaceTest #test13ListPurchasesOfFreshClientIsEmpty stamp: 'DW 6/12/2022 15:14:24'!
PASSED!

!testRun: #SalesInterfaceTest #test14ListPurchasesAffectedByCheckout stamp: 'DW 6/12/2022 15:14:24'!
PASSED!

!testRun: #SalesInterfaceTest #test15ListPurchasesIsemptyBeforeCheckout stamp: 'DW 6/12/2022 15:14:24'!
PASSED!

!testRun: #SalesInterfaceTest #test16ListPurchasesAfterTwoCheckoutsShowsContentsOfBothCarts stamp: 'DW 6/12/2022 15:14:24'!
PASSED!

!testRun: #SalesInterfaceTest #test17ListPurchasesFailesForInvalidCredentials stamp: 'DW 6/12/2022 15:14:24'!
PASSED!

!testRun: #SalesInterfaceTest #test18CantCheckoutCartWithInvalidId stamp: 'DW 6/12/2022 15:14:24'!
PASSED!

!testRun: #SalesInterfaceTest #test19CantCheckoutTwice stamp: 'DW 6/12/2022 15:14:24'!
PASSED!

!testRun: #SalesInterfaceTest #test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails stamp: 'DW 6/12/2022 15:14:24'!
PASSED!
!SalesInterfaceTest methodsFor: 'objects' stamp: 'DW 6/12/2022 15:15:43'!
merchantProcessorThatDoesNotFail
	^ MerchantProcessorDouble withDebitBehavior: [:a :c | ].! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:16:37' prior: 50479883!
test19CantCheckoutTwice
	| salesInterface id |
	
	salesInterface := SalesInterface 
		withAuthenticator: (self authenticatorWithSingleRegisteredUser) 
		withCatalog: testObjectsFactory defaultCatalog 
		withMerchantProcessor: self merchantProcessorThatDoesNotFail .
		
	id := salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser.

	salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 1.
	
	salesInterface checkOutCartWithCartId: id ccn: '0123456789012345' cced: (GregorianMonthOfYear juneOf: 2024) cco: 'Carlos Miguel Soto'.
	
	self should: [	
	salesInterface checkOutCartWithCartId: id ccn: '0123456789012345' cced: (GregorianMonthOfYear juneOf: 2024) cco: 'Carlos Miguel Soto'.
	] raise: Error - MessageNotUnderstood
	withMessageText: SalesInterface invalidCartIdErrorDescription.! !

!testRun: #SalesInterfaceTest #test19CantCheckoutTwice stamp: 'DW 6/12/2022 15:16:38'!
ERROR!
!StoreTestObjectsFactory methodsFor: 'credit card' stamp: 'DW 6/12/2022 15:17:40'!
monthOfNotExpiredCreditCard
	
	^Month month: today monthIndex year: today yearNumber + 1.! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'DW 6/12/2022 15:17:42'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'DW 6/12/2022 15:17:42'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'DW 6/12/2022 15:17:42'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'DW 6/12/2022 15:17:42'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'DW 6/12/2022 15:17:42'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'DW 6/12/2022 15:17:42'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'DW 6/12/2022 15:17:42'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'DW 6/12/2022 15:17:42'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'DW 6/12/2022 15:17:42'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'DW 6/12/2022 15:17:42'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'DW 6/12/2022 15:17:42'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'DW 6/12/2022 15:17:42'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'DW 6/12/2022 15:17:42'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'DW 6/12/2022 15:17:42'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'DW 6/12/2022 15:17:42'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'DW 6/12/2022 15:17:42'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'DW 6/12/2022 15:17:42'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'DW 6/12/2022 15:17:42'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'DW 6/12/2022 15:17:42'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'DW 6/12/2022 15:17:42'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'DW 6/12/2022 15:17:42'!
PASSED!

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'DW 6/12/2022 15:17:42'!
PASSED!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'DW 6/12/2022 15:17:42'!
PASSED!

!testRun: #SalesInterfaceTest #test10AddToCartQuantityMustBeAPositiveNumber stamp: 'DW 6/12/2022 15:17:42'!
PASSED!

!testRun: #SalesInterfaceTest #test11AddToCartQuantityMustBeAnInteger stamp: 'DW 6/12/2022 15:17:42'!
PASSED!

!testRun: #SalesInterfaceTest #test12ListPurchasesOfIvalidUserFails stamp: 'DW 6/12/2022 15:17:42'!
PASSED!

!testRun: #SalesInterfaceTest #test13ListPurchasesOfFreshClientIsEmpty stamp: 'DW 6/12/2022 15:17:42'!
PASSED!

!testRun: #SalesInterfaceTest #test14ListPurchasesAffectedByCheckout stamp: 'DW 6/12/2022 15:17:42'!
PASSED!

!testRun: #SalesInterfaceTest #test15ListPurchasesIsemptyBeforeCheckout stamp: 'DW 6/12/2022 15:17:42'!
PASSED!

!testRun: #SalesInterfaceTest #test16ListPurchasesAfterTwoCheckoutsShowsContentsOfBothCarts stamp: 'DW 6/12/2022 15:17:42'!
PASSED!

!testRun: #SalesInterfaceTest #test17ListPurchasesFailesForInvalidCredentials stamp: 'DW 6/12/2022 15:17:42'!
PASSED!

!testRun: #SalesInterfaceTest #test18CantCheckoutCartWithInvalidId stamp: 'DW 6/12/2022 15:17:42'!
PASSED!

!testRun: #SalesInterfaceTest #test19CantCheckoutTwice stamp: 'DW 6/12/2022 15:17:42'!
ERROR!

!testRun: #SalesInterfaceTest #test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails stamp: 'DW 6/12/2022 15:17:42'!
PASSED!

!testRun: #SalesInterfaceTest #test19CantCheckoutTwice stamp: 'DW 6/12/2022 15:17:42'!
ERROR!
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:18:12' prior: 50481922!
test19CantCheckoutTwice
	| salesInterface id |
	
	salesInterface := SalesInterface 
		withAuthenticator: (self authenticatorWithSingleRegisteredUser) 
		withCatalog: testObjectsFactory defaultCatalog 
		withMerchantProcessor: self merchantProcessorThatDoesNotFail .
		
	id := salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser.

	salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 1.
	
	salesInterface checkOutCartWithCartId: id ccn: '0123456789012345' cced: testObjectsFactory monthOfNotExpiredCreditCard cco: 'Carlos Miguel Soto'.
	
	self should: [	
	salesInterface checkOutCartWithCartId: id ccn: '0123456789012345' cced: testObjectsFactory monthOfNotExpiredCreditCard cco: 'Carlos Miguel Soto'.
	] raise: Error - MessageNotUnderstood
	withMessageText: SalesInterface invalidCartIdErrorDescription.! !

!testRun: #SalesInterfaceTest #test19CantCheckoutTwice stamp: 'DW 6/12/2022 15:18:13'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'DW 6/12/2022 15:18:13'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'DW 6/12/2022 15:18:13'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'DW 6/12/2022 15:18:13'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'DW 6/12/2022 15:18:13'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'DW 6/12/2022 15:18:13'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'DW 6/12/2022 15:18:13'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'DW 6/12/2022 15:18:13'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'DW 6/12/2022 15:18:13'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'DW 6/12/2022 15:18:13'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'DW 6/12/2022 15:18:13'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'DW 6/12/2022 15:18:13'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'DW 6/12/2022 15:18:13'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'DW 6/12/2022 15:18:13'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'DW 6/12/2022 15:18:13'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'DW 6/12/2022 15:18:13'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'DW 6/12/2022 15:18:13'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'DW 6/12/2022 15:18:13'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'DW 6/12/2022 15:18:13'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'DW 6/12/2022 15:18:13'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'DW 6/12/2022 15:18:13'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'DW 6/12/2022 15:18:13'!
PASSED!

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'DW 6/12/2022 15:18:13'!
PASSED!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'DW 6/12/2022 15:18:13'!
PASSED!

!testRun: #SalesInterfaceTest #test10AddToCartQuantityMustBeAPositiveNumber stamp: 'DW 6/12/2022 15:18:14'!
PASSED!

!testRun: #SalesInterfaceTest #test11AddToCartQuantityMustBeAnInteger stamp: 'DW 6/12/2022 15:18:14'!
PASSED!

!testRun: #SalesInterfaceTest #test12ListPurchasesOfIvalidUserFails stamp: 'DW 6/12/2022 15:18:14'!
PASSED!

!testRun: #SalesInterfaceTest #test13ListPurchasesOfFreshClientIsEmpty stamp: 'DW 6/12/2022 15:18:14'!
PASSED!

!testRun: #SalesInterfaceTest #test14ListPurchasesAffectedByCheckout stamp: 'DW 6/12/2022 15:18:14'!
PASSED!

!testRun: #SalesInterfaceTest #test15ListPurchasesIsemptyBeforeCheckout stamp: 'DW 6/12/2022 15:18:14'!
PASSED!

!testRun: #SalesInterfaceTest #test16ListPurchasesAfterTwoCheckoutsShowsContentsOfBothCarts stamp: 'DW 6/12/2022 15:18:14'!
PASSED!

!testRun: #SalesInterfaceTest #test17ListPurchasesFailesForInvalidCredentials stamp: 'DW 6/12/2022 15:18:14'!
PASSED!

!testRun: #SalesInterfaceTest #test18CantCheckoutCartWithInvalidId stamp: 'DW 6/12/2022 15:18:14'!
PASSED!

!testRun: #SalesInterfaceTest #test19CantCheckoutTwice stamp: 'DW 6/12/2022 15:18:14'!
PASSED!

!testRun: #SalesInterfaceTest #test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails stamp: 'DW 6/12/2022 15:18:14'!
PASSED!
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:18:30' prior: 50479580!
test18CantCheckoutCartWithInvalidId
	| salesInterface |
	
	salesInterface := SalesInterface withAuthenticator: (self authenticatorWithSingleRegisteredUser) withCatalog: testObjectsFactory defaultCatalog.

	self should: [salesInterface checkOutCartWithCartId: nil ccn: '0123456789012345' cced: testObjectsFactory monthOfNotExpiredCreditCard cco: 'Carlos Miguel Soto'.]
		raise: Error - MessageNotUnderstood
		withMessageText: SalesInterface invalidCartIdErrorDescription.
! !

!testRun: #SalesInterfaceTest #test18CantCheckoutCartWithInvalidId stamp: 'DW 6/12/2022 15:18:31'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'DW 6/12/2022 15:18:31'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'DW 6/12/2022 15:18:31'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'DW 6/12/2022 15:18:31'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'DW 6/12/2022 15:18:31'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'DW 6/12/2022 15:18:31'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'DW 6/12/2022 15:18:31'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'DW 6/12/2022 15:18:31'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'DW 6/12/2022 15:18:31'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'DW 6/12/2022 15:18:31'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'DW 6/12/2022 15:18:31'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'DW 6/12/2022 15:18:31'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'DW 6/12/2022 15:18:31'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'DW 6/12/2022 15:18:31'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'DW 6/12/2022 15:18:31'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'DW 6/12/2022 15:18:31'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'DW 6/12/2022 15:18:31'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'DW 6/12/2022 15:18:31'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'DW 6/12/2022 15:18:31'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'DW 6/12/2022 15:18:31'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'DW 6/12/2022 15:18:31'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'DW 6/12/2022 15:18:31'!
PASSED!

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'DW 6/12/2022 15:18:31'!
PASSED!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'DW 6/12/2022 15:18:31'!
PASSED!

!testRun: #SalesInterfaceTest #test10AddToCartQuantityMustBeAPositiveNumber stamp: 'DW 6/12/2022 15:18:31'!
PASSED!

!testRun: #SalesInterfaceTest #test11AddToCartQuantityMustBeAnInteger stamp: 'DW 6/12/2022 15:18:31'!
PASSED!

!testRun: #SalesInterfaceTest #test12ListPurchasesOfIvalidUserFails stamp: 'DW 6/12/2022 15:18:32'!
PASSED!

!testRun: #SalesInterfaceTest #test13ListPurchasesOfFreshClientIsEmpty stamp: 'DW 6/12/2022 15:18:32'!
PASSED!

!testRun: #SalesInterfaceTest #test14ListPurchasesAffectedByCheckout stamp: 'DW 6/12/2022 15:18:32'!
PASSED!

!testRun: #SalesInterfaceTest #test15ListPurchasesIsemptyBeforeCheckout stamp: 'DW 6/12/2022 15:18:32'!
PASSED!

!testRun: #SalesInterfaceTest #test16ListPurchasesAfterTwoCheckoutsShowsContentsOfBothCarts stamp: 'DW 6/12/2022 15:18:32'!
PASSED!

!testRun: #SalesInterfaceTest #test17ListPurchasesFailesForInvalidCredentials stamp: 'DW 6/12/2022 15:18:32'!
PASSED!

!testRun: #SalesInterfaceTest #test18CantCheckoutCartWithInvalidId stamp: 'DW 6/12/2022 15:18:32'!
PASSED!

!testRun: #SalesInterfaceTest #test19CantCheckoutTwice stamp: 'DW 6/12/2022 15:18:32'!
PASSED!

!testRun: #SalesInterfaceTest #test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails stamp: 'DW 6/12/2022 15:18:32'!
PASSED!
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:18:46' prior: 50482230!
test18CantCheckoutCartWithInvalidId
	| salesInterface |
	
	salesInterface := SalesInterface 
		withAuthenticator: (self authenticatorWithSingleRegisteredUser) 
		withCatalog: testObjectsFactory defaultCatalog 
		withMerchantProcessor: self merchantProcessorThatDoesNotFail .

	self should: [salesInterface checkOutCartWithCartId: nil ccn: '0123456789012345' cced: testObjectsFactory monthOfNotExpiredCreditCard cco: 'Carlos Miguel Soto'.]
		raise: Error - MessageNotUnderstood
		withMessageText: SalesInterface invalidCartIdErrorDescription.
! !

!testRun: #SalesInterfaceTest #test18CantCheckoutCartWithInvalidId stamp: 'DW 6/12/2022 15:18:48'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'DW 6/12/2022 15:18:48'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'DW 6/12/2022 15:18:48'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'DW 6/12/2022 15:18:48'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'DW 6/12/2022 15:18:48'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'DW 6/12/2022 15:18:48'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'DW 6/12/2022 15:18:48'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'DW 6/12/2022 15:18:48'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'DW 6/12/2022 15:18:48'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'DW 6/12/2022 15:18:48'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'DW 6/12/2022 15:18:48'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'DW 6/12/2022 15:18:48'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'DW 6/12/2022 15:18:48'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'DW 6/12/2022 15:18:48'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'DW 6/12/2022 15:18:48'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'DW 6/12/2022 15:18:48'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'DW 6/12/2022 15:18:48'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'DW 6/12/2022 15:18:48'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'DW 6/12/2022 15:18:48'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'DW 6/12/2022 15:18:48'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'DW 6/12/2022 15:18:48'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'DW 6/12/2022 15:18:48'!
PASSED!

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'DW 6/12/2022 15:18:48'!
PASSED!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'DW 6/12/2022 15:18:48'!
PASSED!

!testRun: #SalesInterfaceTest #test10AddToCartQuantityMustBeAPositiveNumber stamp: 'DW 6/12/2022 15:18:48'!
PASSED!

!testRun: #SalesInterfaceTest #test11AddToCartQuantityMustBeAnInteger stamp: 'DW 6/12/2022 15:18:48'!
PASSED!

!testRun: #SalesInterfaceTest #test12ListPurchasesOfIvalidUserFails stamp: 'DW 6/12/2022 15:18:48'!
PASSED!

!testRun: #SalesInterfaceTest #test13ListPurchasesOfFreshClientIsEmpty stamp: 'DW 6/12/2022 15:18:48'!
PASSED!

!testRun: #SalesInterfaceTest #test14ListPurchasesAffectedByCheckout stamp: 'DW 6/12/2022 15:18:48'!
PASSED!

!testRun: #SalesInterfaceTest #test15ListPurchasesIsemptyBeforeCheckout stamp: 'DW 6/12/2022 15:18:48'!
PASSED!

!testRun: #SalesInterfaceTest #test16ListPurchasesAfterTwoCheckoutsShowsContentsOfBothCarts stamp: 'DW 6/12/2022 15:18:48'!
PASSED!

!testRun: #SalesInterfaceTest #test17ListPurchasesFailesForInvalidCredentials stamp: 'DW 6/12/2022 15:18:48'!
PASSED!

!testRun: #SalesInterfaceTest #test18CantCheckoutCartWithInvalidId stamp: 'DW 6/12/2022 15:18:48'!
PASSED!

!testRun: #SalesInterfaceTest #test19CantCheckoutTwice stamp: 'DW 6/12/2022 15:18:48'!
PASSED!

!testRun: #SalesInterfaceTest #test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails stamp: 'DW 6/12/2022 15:18:48'!
PASSED!
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:18:57' prior: 50479507!
test17ListPurchasesFailesForInvalidCredentials
	| salesInterface |
	
	salesInterface := SalesInterface 
		withAuthenticator: (self authenticatorWithSingleRegisteredUser) 
		withCatalog: testObjectsFactory defaultCatalog 
		withMerchantProcessor: self merchantProcessorThatDoesNotFail .

	self should: [salesInterface listPurchasesWithClientId: self validUser password: self invalidPasswordOfValidUser]
		raise: Error - MessageNotUnderstood
		withMessageText: SalesInterface invalidCredentialsErrorDescription.! !

!testRun: #SalesInterfaceTest #test17ListPurchasesFailesForInvalidCredentials stamp: 'DW 6/12/2022 15:18:58'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'DW 6/12/2022 15:18:58'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'DW 6/12/2022 15:18:58'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'DW 6/12/2022 15:18:58'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'DW 6/12/2022 15:18:58'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'DW 6/12/2022 15:18:58'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'DW 6/12/2022 15:18:58'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'DW 6/12/2022 15:18:58'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'DW 6/12/2022 15:18:58'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'DW 6/12/2022 15:18:58'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'DW 6/12/2022 15:18:58'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'DW 6/12/2022 15:18:58'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'DW 6/12/2022 15:18:58'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'DW 6/12/2022 15:18:58'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'DW 6/12/2022 15:18:58'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'DW 6/12/2022 15:18:58'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'DW 6/12/2022 15:18:58'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'DW 6/12/2022 15:18:58'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'DW 6/12/2022 15:18:58'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'DW 6/12/2022 15:18:58'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'DW 6/12/2022 15:18:58'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'DW 6/12/2022 15:18:58'!
PASSED!

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'DW 6/12/2022 15:18:59'!
PASSED!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'DW 6/12/2022 15:18:59'!
PASSED!

!testRun: #SalesInterfaceTest #test10AddToCartQuantityMustBeAPositiveNumber stamp: 'DW 6/12/2022 15:18:59'!
PASSED!

!testRun: #SalesInterfaceTest #test11AddToCartQuantityMustBeAnInteger stamp: 'DW 6/12/2022 15:18:59'!
PASSED!

!testRun: #SalesInterfaceTest #test12ListPurchasesOfIvalidUserFails stamp: 'DW 6/12/2022 15:18:59'!
PASSED!

!testRun: #SalesInterfaceTest #test13ListPurchasesOfFreshClientIsEmpty stamp: 'DW 6/12/2022 15:18:59'!
PASSED!

!testRun: #SalesInterfaceTest #test14ListPurchasesAffectedByCheckout stamp: 'DW 6/12/2022 15:18:59'!
PASSED!

!testRun: #SalesInterfaceTest #test15ListPurchasesIsemptyBeforeCheckout stamp: 'DW 6/12/2022 15:18:59'!
PASSED!

!testRun: #SalesInterfaceTest #test16ListPurchasesAfterTwoCheckoutsShowsContentsOfBothCarts stamp: 'DW 6/12/2022 15:18:59'!
PASSED!

!testRun: #SalesInterfaceTest #test17ListPurchasesFailesForInvalidCredentials stamp: 'DW 6/12/2022 15:18:59'!
PASSED!

!testRun: #SalesInterfaceTest #test18CantCheckoutCartWithInvalidId stamp: 'DW 6/12/2022 15:18:59'!
PASSED!

!testRun: #SalesInterfaceTest #test19CantCheckoutTwice stamp: 'DW 6/12/2022 15:18:59'!
PASSED!

!testRun: #SalesInterfaceTest #test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails stamp: 'DW 6/12/2022 15:18:59'!
PASSED!
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:19:06' prior: 50478797!
test16ListPurchasesAfterTwoCheckoutsShowsContentsOfBothCarts
	| salesInterface id |
	
	salesInterface := SalesInterface 
		withAuthenticator: (self authenticatorWithSingleRegisteredUser) 
		withCatalog: testObjectsFactory defaultCatalog 
		withMerchantProcessor: self merchantProcessorThatDoesNotFail .
	
	id := salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser.

	salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 1.
	
	salesInterface checkOutCartWithCartId: id ccn: '0123456789012345' cced: (GregorianMonthOfYear juneOf: 2024) cco: 'Carlos Miguel Soto'.
	
	id := salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser.

	salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 1.
	
	salesInterface checkOutCartWithCartId: id ccn: '0123456789012345' cced: (GregorianMonthOfYear juneOf: 2024) cco: 'Carlos Miguel Soto'.
		
	self assert: (Bag with: testObjectsFactory itemSellByTheStore with: testObjectsFactory itemSellByTheStore) equals: (salesInterface listPurchasesWithClientId: self validUser password: self passwordOfValidUser).! !

!testRun: #SalesInterfaceTest #test16ListPurchasesAfterTwoCheckoutsShowsContentsOfBothCarts stamp: 'DW 6/12/2022 15:19:07'!
ERROR!
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:19:53' prior: 50482645!
test16ListPurchasesAfterTwoCheckoutsShowsContentsOfBothCarts
	| salesInterface id |
	
	salesInterface := SalesInterface 
		withAuthenticator: (self authenticatorWithSingleRegisteredUser) 
		withCatalog: testObjectsFactory defaultCatalog 
		withMerchantProcessor: self merchantProcessorThatDoesNotFail .
	
	id := salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser.

	salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 1.
	
	salesInterface checkOutCartWithCartId: id ccn: '0123456789012345' cced: testObjectsFactory monthOfNotExpiredCreditCard cco: 'Carlos Miguel Soto'.
	
	id := salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser.

	salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 1.
	
	salesInterface checkOutCartWithCartId: id ccn: '0123456789012345' cced: testObjectsFactory monthOfNotExpiredCreditCard cco: 'Carlos Miguel Soto'.
		
	self assert: (Bag with: testObjectsFactory itemSellByTheStore with: testObjectsFactory itemSellByTheStore) equals: (salesInterface listPurchasesWithClientId: self validUser password: self passwordOfValidUser).! !

!testRun: #SalesInterfaceTest #test16ListPurchasesAfterTwoCheckoutsShowsContentsOfBothCarts stamp: 'DW 6/12/2022 15:19:54'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'DW 6/12/2022 15:19:54'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'DW 6/12/2022 15:19:54'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'DW 6/12/2022 15:19:54'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'DW 6/12/2022 15:19:54'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'DW 6/12/2022 15:19:54'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'DW 6/12/2022 15:19:54'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'DW 6/12/2022 15:19:54'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'DW 6/12/2022 15:19:54'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'DW 6/12/2022 15:19:54'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'DW 6/12/2022 15:19:54'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'DW 6/12/2022 15:19:54'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'DW 6/12/2022 15:19:54'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'DW 6/12/2022 15:19:54'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'DW 6/12/2022 15:19:54'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'DW 6/12/2022 15:19:55'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'DW 6/12/2022 15:19:55'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'DW 6/12/2022 15:19:55'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'DW 6/12/2022 15:19:55'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'DW 6/12/2022 15:19:55'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'DW 6/12/2022 15:19:55'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'DW 6/12/2022 15:19:55'!
PASSED!

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'DW 6/12/2022 15:19:55'!
PASSED!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'DW 6/12/2022 15:19:55'!
PASSED!

!testRun: #SalesInterfaceTest #test10AddToCartQuantityMustBeAPositiveNumber stamp: 'DW 6/12/2022 15:19:55'!
PASSED!

!testRun: #SalesInterfaceTest #test11AddToCartQuantityMustBeAnInteger stamp: 'DW 6/12/2022 15:19:55'!
PASSED!

!testRun: #SalesInterfaceTest #test12ListPurchasesOfIvalidUserFails stamp: 'DW 6/12/2022 15:19:55'!
PASSED!

!testRun: #SalesInterfaceTest #test13ListPurchasesOfFreshClientIsEmpty stamp: 'DW 6/12/2022 15:19:55'!
PASSED!

!testRun: #SalesInterfaceTest #test14ListPurchasesAffectedByCheckout stamp: 'DW 6/12/2022 15:19:55'!
PASSED!

!testRun: #SalesInterfaceTest #test15ListPurchasesIsemptyBeforeCheckout stamp: 'DW 6/12/2022 15:19:55'!
PASSED!

!testRun: #SalesInterfaceTest #test16ListPurchasesAfterTwoCheckoutsShowsContentsOfBothCarts stamp: 'DW 6/12/2022 15:19:55'!
PASSED!

!testRun: #SalesInterfaceTest #test17ListPurchasesFailesForInvalidCredentials stamp: 'DW 6/12/2022 15:19:55'!
PASSED!

!testRun: #SalesInterfaceTest #test18CantCheckoutCartWithInvalidId stamp: 'DW 6/12/2022 15:19:55'!
PASSED!

!testRun: #SalesInterfaceTest #test19CantCheckoutTwice stamp: 'DW 6/12/2022 15:19:55'!
PASSED!

!testRun: #SalesInterfaceTest #test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails stamp: 'DW 6/12/2022 15:19:55'!
PASSED!
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:20:07' prior: 50478484!
test15ListPurchasesIsemptyBeforeCheckout
	| salesInterface id |
	
	salesInterface := SalesInterface 
		withAuthenticator: (self authenticatorWithSingleRegisteredUser) 
		withCatalog: testObjectsFactory defaultCatalog 
		withMerchantProcessor: self merchantProcessorThatDoesNotFail .
		
	id := salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser.

	salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 1.
		
	self assert: (Bag new) equals: (salesInterface listPurchasesWithClientId: self validUser password: self passwordOfValidUser).! !

!testRun: #SalesInterfaceTest #test15ListPurchasesIsemptyBeforeCheckout stamp: 'DW 6/12/2022 15:20:09'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'DW 6/12/2022 15:20:09'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'DW 6/12/2022 15:20:09'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'DW 6/12/2022 15:20:09'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'DW 6/12/2022 15:20:09'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'DW 6/12/2022 15:20:09'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'DW 6/12/2022 15:20:09'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'DW 6/12/2022 15:20:09'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'DW 6/12/2022 15:20:09'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'DW 6/12/2022 15:20:09'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'DW 6/12/2022 15:20:09'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'DW 6/12/2022 15:20:09'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'DW 6/12/2022 15:20:09'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'DW 6/12/2022 15:20:09'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'DW 6/12/2022 15:20:09'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'DW 6/12/2022 15:20:09'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'DW 6/12/2022 15:20:09'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'DW 6/12/2022 15:20:09'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'DW 6/12/2022 15:20:09'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'DW 6/12/2022 15:20:09'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'DW 6/12/2022 15:20:09'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'DW 6/12/2022 15:20:09'!
PASSED!

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'DW 6/12/2022 15:20:09'!
PASSED!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'DW 6/12/2022 15:20:09'!
PASSED!

!testRun: #SalesInterfaceTest #test10AddToCartQuantityMustBeAPositiveNumber stamp: 'DW 6/12/2022 15:20:09'!
PASSED!

!testRun: #SalesInterfaceTest #test11AddToCartQuantityMustBeAnInteger stamp: 'DW 6/12/2022 15:20:09'!
PASSED!

!testRun: #SalesInterfaceTest #test12ListPurchasesOfIvalidUserFails stamp: 'DW 6/12/2022 15:20:09'!
PASSED!

!testRun: #SalesInterfaceTest #test13ListPurchasesOfFreshClientIsEmpty stamp: 'DW 6/12/2022 15:20:09'!
PASSED!

!testRun: #SalesInterfaceTest #test14ListPurchasesAffectedByCheckout stamp: 'DW 6/12/2022 15:20:09'!
PASSED!

!testRun: #SalesInterfaceTest #test15ListPurchasesIsemptyBeforeCheckout stamp: 'DW 6/12/2022 15:20:09'!
PASSED!

!testRun: #SalesInterfaceTest #test16ListPurchasesAfterTwoCheckoutsShowsContentsOfBothCarts stamp: 'DW 6/12/2022 15:20:09'!
PASSED!

!testRun: #SalesInterfaceTest #test17ListPurchasesFailesForInvalidCredentials stamp: 'DW 6/12/2022 15:20:09'!
PASSED!

!testRun: #SalesInterfaceTest #test18CantCheckoutCartWithInvalidId stamp: 'DW 6/12/2022 15:20:09'!
PASSED!

!testRun: #SalesInterfaceTest #test19CantCheckoutTwice stamp: 'DW 6/12/2022 15:20:09'!
PASSED!

!testRun: #SalesInterfaceTest #test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails stamp: 'DW 6/12/2022 15:20:09'!
PASSED!
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:20:16' prior: 50478406!
test14ListPurchasesAffectedByCheckout
	| salesInterface id |
	
	salesInterface := SalesInterface 
		withAuthenticator: (self authenticatorWithSingleRegisteredUser) 
		withCatalog: testObjectsFactory defaultCatalog 
		withMerchantProcessor: self merchantProcessorThatDoesNotFail .
		
	id := salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser.

	salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 1.
	
	salesInterface checkOutCartWithCartId: id ccn: '0123456789012345' cced: (GregorianMonthOfYear juneOf: 2024) cco: 'Carlos Miguel Soto'.
	
	self assert: (Bag with: testObjectsFactory itemSellByTheStore) equals: (salesInterface listPurchasesWithClientId: self validUser password: self passwordOfValidUser).! !

!testRun: #SalesInterfaceTest #test14ListPurchasesAffectedByCheckout stamp: 'DW 6/12/2022 15:20:17'!
ERROR!
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:20:34' prior: 50482993!
test14ListPurchasesAffectedByCheckout
	| salesInterface id |
	
	salesInterface := SalesInterface 
		withAuthenticator: (self authenticatorWithSingleRegisteredUser) 
		withCatalog: testObjectsFactory defaultCatalog 
		withMerchantProcessor: self merchantProcessorThatDoesNotFail .
		
	id := salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser.

	salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 1.
	
	salesInterface checkOutCartWithCartId: id ccn: '0123456789012345' cced: testObjectsFactory monthOfNotExpiredCreditCard cco: 'Carlos Miguel Soto'.
	
	self assert: (Bag with: testObjectsFactory itemSellByTheStore) equals: (salesInterface listPurchasesWithClientId: self validUser password: self passwordOfValidUser).! !

!testRun: #SalesInterfaceTest #test14ListPurchasesAffectedByCheckout stamp: 'DW 6/12/2022 15:20:36'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'DW 6/12/2022 15:20:36'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'DW 6/12/2022 15:20:36'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'DW 6/12/2022 15:20:36'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'DW 6/12/2022 15:20:36'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'DW 6/12/2022 15:20:36'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'DW 6/12/2022 15:20:36'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'DW 6/12/2022 15:20:36'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'DW 6/12/2022 15:20:36'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'DW 6/12/2022 15:20:37'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'DW 6/12/2022 15:20:37'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'DW 6/12/2022 15:20:37'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'DW 6/12/2022 15:20:37'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'DW 6/12/2022 15:20:37'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'DW 6/12/2022 15:20:37'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'DW 6/12/2022 15:20:37'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'DW 6/12/2022 15:20:37'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'DW 6/12/2022 15:20:37'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'DW 6/12/2022 15:20:37'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'DW 6/12/2022 15:20:37'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'DW 6/12/2022 15:20:37'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'DW 6/12/2022 15:20:37'!
PASSED!

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'DW 6/12/2022 15:20:37'!
PASSED!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'DW 6/12/2022 15:20:37'!
PASSED!

!testRun: #SalesInterfaceTest #test10AddToCartQuantityMustBeAPositiveNumber stamp: 'DW 6/12/2022 15:20:37'!
PASSED!

!testRun: #SalesInterfaceTest #test11AddToCartQuantityMustBeAnInteger stamp: 'DW 6/12/2022 15:20:37'!
PASSED!

!testRun: #SalesInterfaceTest #test12ListPurchasesOfIvalidUserFails stamp: 'DW 6/12/2022 15:20:37'!
PASSED!

!testRun: #SalesInterfaceTest #test13ListPurchasesOfFreshClientIsEmpty stamp: 'DW 6/12/2022 15:20:37'!
PASSED!

!testRun: #SalesInterfaceTest #test14ListPurchasesAffectedByCheckout stamp: 'DW 6/12/2022 15:20:37'!
PASSED!

!testRun: #SalesInterfaceTest #test15ListPurchasesIsemptyBeforeCheckout stamp: 'DW 6/12/2022 15:20:37'!
PASSED!

!testRun: #SalesInterfaceTest #test16ListPurchasesAfterTwoCheckoutsShowsContentsOfBothCarts stamp: 'DW 6/12/2022 15:20:37'!
PASSED!

!testRun: #SalesInterfaceTest #test17ListPurchasesFailesForInvalidCredentials stamp: 'DW 6/12/2022 15:20:37'!
PASSED!

!testRun: #SalesInterfaceTest #test18CantCheckoutCartWithInvalidId stamp: 'DW 6/12/2022 15:20:37'!
PASSED!

!testRun: #SalesInterfaceTest #test19CantCheckoutTwice stamp: 'DW 6/12/2022 15:20:37'!
PASSED!

!testRun: #SalesInterfaceTest #test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails stamp: 'DW 6/12/2022 15:20:37'!
PASSED!
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:20:46' prior: 50478457!
test13ListPurchasesOfFreshClientIsEmpty
	| salesInterface |
	
	salesInterface := SalesInterface 
		withAuthenticator: (self authenticatorWithSingleRegisteredUser) 
		withCatalog: testObjectsFactory defaultCatalog 
		withMerchantProcessor: self merchantProcessorThatDoesNotFail .
		
	self assert: Bag new equals: (salesInterface listPurchasesWithClientId: self validUser password: self passwordOfValidUser).! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:20:56' prior: 50477316!
test12ListPurchasesOfIvalidUserFails
	| salesInterface |
	
	salesInterface := SalesInterface 
		withAuthenticator: (self authenticatorWithSingleRegisteredUser) 
		withCatalog: testObjectsFactory defaultCatalog 
		withMerchantProcessor: self merchantProcessorThatDoesNotFail .
		
	self should: [salesInterface listPurchasesWithClientId: self validUser password: self invalidPasswordOfValidUser]
		raise: Error - MessageNotUnderstood 
		withMessageText: SalesInterface invalidCredentialsErrorDescription.! !

!testRun: #SalesInterfaceTest #test12ListPurchasesOfIvalidUserFails stamp: 'DW 6/12/2022 15:20:56'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'DW 6/12/2022 15:20:56'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'DW 6/12/2022 15:20:56'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'DW 6/12/2022 15:20:56'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'DW 6/12/2022 15:20:56'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'DW 6/12/2022 15:20:56'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'DW 6/12/2022 15:20:56'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'DW 6/12/2022 15:20:56'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'DW 6/12/2022 15:20:56'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'DW 6/12/2022 15:20:56'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'DW 6/12/2022 15:20:56'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'DW 6/12/2022 15:20:56'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'DW 6/12/2022 15:20:56'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'DW 6/12/2022 15:20:56'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'DW 6/12/2022 15:20:56'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'DW 6/12/2022 15:20:56'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'DW 6/12/2022 15:20:56'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'DW 6/12/2022 15:20:56'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'DW 6/12/2022 15:20:56'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'DW 6/12/2022 15:20:56'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'DW 6/12/2022 15:20:56'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'DW 6/12/2022 15:20:56'!
PASSED!

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'DW 6/12/2022 15:20:56'!
PASSED!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'DW 6/12/2022 15:20:56'!
PASSED!

!testRun: #SalesInterfaceTest #test10AddToCartQuantityMustBeAPositiveNumber stamp: 'DW 6/12/2022 15:20:56'!
PASSED!

!testRun: #SalesInterfaceTest #test11AddToCartQuantityMustBeAnInteger stamp: 'DW 6/12/2022 15:20:56'!
PASSED!

!testRun: #SalesInterfaceTest #test12ListPurchasesOfIvalidUserFails stamp: 'DW 6/12/2022 15:20:56'!
PASSED!

!testRun: #SalesInterfaceTest #test13ListPurchasesOfFreshClientIsEmpty stamp: 'DW 6/12/2022 15:20:56'!
PASSED!

!testRun: #SalesInterfaceTest #test14ListPurchasesAffectedByCheckout stamp: 'DW 6/12/2022 15:20:56'!
PASSED!

!testRun: #SalesInterfaceTest #test15ListPurchasesIsemptyBeforeCheckout stamp: 'DW 6/12/2022 15:20:56'!
PASSED!

!testRun: #SalesInterfaceTest #test16ListPurchasesAfterTwoCheckoutsShowsContentsOfBothCarts stamp: 'DW 6/12/2022 15:20:57'!
PASSED!

!testRun: #SalesInterfaceTest #test17ListPurchasesFailesForInvalidCredentials stamp: 'DW 6/12/2022 15:20:57'!
PASSED!

!testRun: #SalesInterfaceTest #test18CantCheckoutCartWithInvalidId stamp: 'DW 6/12/2022 15:20:57'!
PASSED!

!testRun: #SalesInterfaceTest #test19CantCheckoutTwice stamp: 'DW 6/12/2022 15:20:57'!
PASSED!

!testRun: #SalesInterfaceTest #test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails stamp: 'DW 6/12/2022 15:20:57'!
PASSED!
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:21:02' prior: 50476749!
test11AddToCartQuantityMustBeAnInteger
	| salesInterface id |
	
	salesInterface := SalesInterface 
		withAuthenticator: (self authenticatorWithSingleRegisteredUser) 
		withCatalog: testObjectsFactory defaultCatalog 
		withMerchantProcessor: self merchantProcessorThatDoesNotFail .
		
	id := salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser.
	
	self should: [salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 1.5]
		raise: Error - MessageNotUnderstood
		withMessageText: SalesInterface quantityNotAPositiveIntegerErrorDescription.
	! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:21:14' prior: 50476609!
test10AddToCartQuantityMustBeAPositiveNumber
	| salesInterface id |
	
	salesInterface := SalesInterface 
		withAuthenticator: (self authenticatorWithSingleRegisteredUser) 
		withCatalog: testObjectsFactory defaultCatalog 
		withMerchantProcessor: self merchantProcessorThatDoesNotFail .
		
	id := salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser.
	
	self should: [salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: -1]
		raise: Error - MessageNotUnderstood
		withMessageText: SalesInterface quantityNotAPositiveIntegerErrorDescription.
	! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:21:21' prior: 50476024!
test09CannotAddToCartAnItemNotSoldByTheStore
	| salesInterface id |
	
	salesInterface := SalesInterface 
		withAuthenticator: (self authenticatorWithSingleRegisteredUser) 
		withCatalog: testObjectsFactory defaultCatalog 
		withMerchantProcessor: self merchantProcessorThatDoesNotFail .
		
	id := salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser.
	
	self should: [salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemNotSellByTheStore bookQuantity: 1]
		raise: Error - MessageNotUnderstood
		withMessageText: SalesInterface itemNotInCatalogErrorDescription.
	! !

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'DW 6/12/2022 15:21:23'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'DW 6/12/2022 15:21:23'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'DW 6/12/2022 15:21:23'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'DW 6/12/2022 15:21:23'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'DW 6/12/2022 15:21:23'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'DW 6/12/2022 15:21:23'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'DW 6/12/2022 15:21:23'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'DW 6/12/2022 15:21:23'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'DW 6/12/2022 15:21:24'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'DW 6/12/2022 15:21:24'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'DW 6/12/2022 15:21:24'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'DW 6/12/2022 15:21:24'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'DW 6/12/2022 15:21:24'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'DW 6/12/2022 15:21:24'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'DW 6/12/2022 15:21:24'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'DW 6/12/2022 15:21:24'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'DW 6/12/2022 15:21:24'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'DW 6/12/2022 15:21:24'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'DW 6/12/2022 15:21:24'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'DW 6/12/2022 15:21:24'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'DW 6/12/2022 15:21:24'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'DW 6/12/2022 15:21:24'!
PASSED!

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'DW 6/12/2022 15:21:24'!
PASSED!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'DW 6/12/2022 15:21:24'!
PASSED!

!testRun: #SalesInterfaceTest #test10AddToCartQuantityMustBeAPositiveNumber stamp: 'DW 6/12/2022 15:21:24'!
PASSED!

!testRun: #SalesInterfaceTest #test11AddToCartQuantityMustBeAnInteger stamp: 'DW 6/12/2022 15:21:24'!
PASSED!

!testRun: #SalesInterfaceTest #test12ListPurchasesOfIvalidUserFails stamp: 'DW 6/12/2022 15:21:24'!
PASSED!

!testRun: #SalesInterfaceTest #test13ListPurchasesOfFreshClientIsEmpty stamp: 'DW 6/12/2022 15:21:24'!
PASSED!

!testRun: #SalesInterfaceTest #test14ListPurchasesAffectedByCheckout stamp: 'DW 6/12/2022 15:21:24'!
PASSED!

!testRun: #SalesInterfaceTest #test15ListPurchasesIsemptyBeforeCheckout stamp: 'DW 6/12/2022 15:21:24'!
PASSED!

!testRun: #SalesInterfaceTest #test16ListPurchasesAfterTwoCheckoutsShowsContentsOfBothCarts stamp: 'DW 6/12/2022 15:21:24'!
PASSED!

!testRun: #SalesInterfaceTest #test17ListPurchasesFailesForInvalidCredentials stamp: 'DW 6/12/2022 15:21:24'!
PASSED!

!testRun: #SalesInterfaceTest #test18CantCheckoutCartWithInvalidId stamp: 'DW 6/12/2022 15:21:24'!
PASSED!

!testRun: #SalesInterfaceTest #test19CantCheckoutTwice stamp: 'DW 6/12/2022 15:21:24'!
PASSED!

!testRun: #SalesInterfaceTest #test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails stamp: 'DW 6/12/2022 15:21:24'!
PASSED!
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:21:32' prior: 50475923!
test08CannotAddToCartWithInvalidCartId
	| salesInterface |
	
	salesInterface := SalesInterface 
		withAuthenticator: (self authenticatorWithSingleRegisteredUser) 
		withCatalog: testObjectsFactory defaultCatalog 
		withMerchantProcessor: self merchantProcessorThatDoesNotFail .
		
	self should: [salesInterface addToCartWithCartId: nil bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 1]
		raise: Error - MessageNotUnderstood
		withMessageText: SalesInterface invalidCartIdErrorDescription.
	! !

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'DW 6/12/2022 15:21:33'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'DW 6/12/2022 15:21:33'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'DW 6/12/2022 15:21:33'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'DW 6/12/2022 15:21:33'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'DW 6/12/2022 15:21:33'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'DW 6/12/2022 15:21:33'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'DW 6/12/2022 15:21:33'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'DW 6/12/2022 15:21:33'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'DW 6/12/2022 15:21:34'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'DW 6/12/2022 15:21:34'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'DW 6/12/2022 15:21:34'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'DW 6/12/2022 15:21:34'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'DW 6/12/2022 15:21:34'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'DW 6/12/2022 15:21:34'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'DW 6/12/2022 15:21:34'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'DW 6/12/2022 15:21:34'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'DW 6/12/2022 15:21:34'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'DW 6/12/2022 15:21:34'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'DW 6/12/2022 15:21:34'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'DW 6/12/2022 15:21:34'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'DW 6/12/2022 15:21:34'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'DW 6/12/2022 15:21:34'!
PASSED!

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'DW 6/12/2022 15:21:34'!
PASSED!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'DW 6/12/2022 15:21:34'!
PASSED!

!testRun: #SalesInterfaceTest #test10AddToCartQuantityMustBeAPositiveNumber stamp: 'DW 6/12/2022 15:21:34'!
PASSED!

!testRun: #SalesInterfaceTest #test11AddToCartQuantityMustBeAnInteger stamp: 'DW 6/12/2022 15:21:34'!
PASSED!

!testRun: #SalesInterfaceTest #test12ListPurchasesOfIvalidUserFails stamp: 'DW 6/12/2022 15:21:34'!
PASSED!

!testRun: #SalesInterfaceTest #test13ListPurchasesOfFreshClientIsEmpty stamp: 'DW 6/12/2022 15:21:34'!
PASSED!

!testRun: #SalesInterfaceTest #test14ListPurchasesAffectedByCheckout stamp: 'DW 6/12/2022 15:21:34'!
PASSED!

!testRun: #SalesInterfaceTest #test15ListPurchasesIsemptyBeforeCheckout stamp: 'DW 6/12/2022 15:21:34'!
PASSED!

!testRun: #SalesInterfaceTest #test16ListPurchasesAfterTwoCheckoutsShowsContentsOfBothCarts stamp: 'DW 6/12/2022 15:21:34'!
PASSED!

!testRun: #SalesInterfaceTest #test17ListPurchasesFailesForInvalidCredentials stamp: 'DW 6/12/2022 15:21:34'!
PASSED!

!testRun: #SalesInterfaceTest #test18CantCheckoutCartWithInvalidId stamp: 'DW 6/12/2022 15:21:34'!
PASSED!

!testRun: #SalesInterfaceTest #test19CantCheckoutTwice stamp: 'DW 6/12/2022 15:21:34'!
PASSED!

!testRun: #SalesInterfaceTest #test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails stamp: 'DW 6/12/2022 15:21:34'!
PASSED!
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:21:40' prior: 50475956!
test07CannotListCartWithInvalidCartId
	| salesInterface |
	
	salesInterface := SalesInterface 
		withAuthenticator: (self authenticatorWithSingleRegisteredUser) 
		withCatalog: testObjectsFactory defaultCatalog 
		withMerchantProcessor: self merchantProcessorThatDoesNotFail .
		
	self should: [salesInterface listCartWithCartId: nil]
		raise: Error - MessageNotUnderstood
		withMessageText: SalesInterface invalidCartIdErrorDescription.
	! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:21:49' prior: 50475496!
test06AddToCartDoesntAffectOtherCarts
	| salesInterface id1 id2 |
	salesInterface := SalesInterface 
		withAuthenticator: (self authenticatorWithSingleRegisteredUser) 
		withCatalog: testObjectsFactory defaultCatalog 
		withMerchantProcessor: self merchantProcessorThatDoesNotFail .
		
	
	id1 := salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser.
	id2 := salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser.
	
	salesInterface addToCartWithCartId: id1 bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 	1.
	
	self assert: (Bag new) equals: (salesInterface listCartWithCartId: id2).
	! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:21:54' prior: 50475476!
test05ListCartReflectsAddToCart
	| salesInterface id |
	salesInterface := SalesInterface 
		withAuthenticator: (self authenticatorWithSingleRegisteredUser) 
		withCatalog: testObjectsFactory defaultCatalog 
		withMerchantProcessor: self merchantProcessorThatDoesNotFail .
		
	
	id := salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser.
	salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 	1.
	self assert: (Bag with: testObjectsFactory itemSellByTheStore) equals: (salesInterface listCartWithCartId: id).
	! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:21:59' prior: 50474443!
test04CannotCreateCartWithInvalidPassword
	| salesInterface |
	salesInterface := SalesInterface 
		withAuthenticator: (self authenticatorWithSingleRegisteredUser) 
		withCatalog: testObjectsFactory defaultCatalog 
		withMerchantProcessor: self merchantProcessorThatDoesNotFail .
		
	self should: [salesInterface createCartWithClientId: self validUser password: self invalidPasswordOfValidUser]
		raise: Error
		withMessageText: SalesInterface invalidCredentialsErrorDescription.
	
	! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:22:05' prior: 50474428!
test03CannotCreateCartWithInvalidClientId
	| salesInterface |
	salesInterface := SalesInterface 
		withAuthenticator: (self authenticatorWithSingleRegisteredUser) 
		withCatalog: testObjectsFactory defaultCatalog 
		withMerchantProcessor: self merchantProcessorThatDoesNotFail .
		
	self should: [salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser]
		raise: Error
		withMessageText: SalesInterface invalidCredentialsErrorDescription.
	
	! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:22:10' prior: 50475444!
test02NewCartGenreatesUniqueIds
	| salesInterface id1 id2 |
	salesInterface := SalesInterface 
		withAuthenticator: (self authenticatorWithSingleRegisteredUser) 
		withCatalog: testObjectsFactory defaultCatalog 
		withMerchantProcessor: self merchantProcessorThatDoesNotFail .
		
	id1 := salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser.
	id2 := salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser.
	self deny: (id1 = id2).! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:22:15' prior: 50475461!
test01ListCartOfNewlyCreatedCartIsEmpty
	| id salesInterface |
	salesInterface := SalesInterface 
		withAuthenticator: (self authenticatorWithSingleRegisteredUser) 
		withCatalog: testObjectsFactory defaultCatalog 
		withMerchantProcessor: self merchantProcessorThatDoesNotFail .
		
	id := salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser.
	self assert: Bag new equals: (salesInterface listCartWithCartId: id).! !

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'DW 6/12/2022 15:22:16'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'DW 6/12/2022 15:22:16'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'DW 6/12/2022 15:22:16'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'DW 6/12/2022 15:22:16'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'DW 6/12/2022 15:22:16'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'DW 6/12/2022 15:22:16'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'DW 6/12/2022 15:22:16'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'DW 6/12/2022 15:22:16'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'DW 6/12/2022 15:22:16'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'DW 6/12/2022 15:22:16'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'DW 6/12/2022 15:22:16'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'DW 6/12/2022 15:22:16'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'DW 6/12/2022 15:22:16'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'DW 6/12/2022 15:22:16'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'DW 6/12/2022 15:22:16'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'DW 6/12/2022 15:22:16'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'DW 6/12/2022 15:22:16'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'DW 6/12/2022 15:22:16'!
FAILURE!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'DW 6/12/2022 15:22:16'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'DW 6/12/2022 15:22:16'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'DW 6/12/2022 15:22:16'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'DW 6/12/2022 15:22:16'!
PASSED!

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'DW 6/12/2022 15:22:16'!
PASSED!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'DW 6/12/2022 15:22:17'!
PASSED!

!testRun: #SalesInterfaceTest #test10AddToCartQuantityMustBeAPositiveNumber stamp: 'DW 6/12/2022 15:22:17'!
PASSED!

!testRun: #SalesInterfaceTest #test11AddToCartQuantityMustBeAnInteger stamp: 'DW 6/12/2022 15:22:17'!
PASSED!

!testRun: #SalesInterfaceTest #test12ListPurchasesOfIvalidUserFails stamp: 'DW 6/12/2022 15:22:17'!
PASSED!

!testRun: #SalesInterfaceTest #test13ListPurchasesOfFreshClientIsEmpty stamp: 'DW 6/12/2022 15:22:17'!
PASSED!

!testRun: #SalesInterfaceTest #test14ListPurchasesAffectedByCheckout stamp: 'DW 6/12/2022 15:22:17'!
PASSED!

!testRun: #SalesInterfaceTest #test15ListPurchasesIsemptyBeforeCheckout stamp: 'DW 6/12/2022 15:22:17'!
PASSED!

!testRun: #SalesInterfaceTest #test16ListPurchasesAfterTwoCheckoutsShowsContentsOfBothCarts stamp: 'DW 6/12/2022 15:22:17'!
PASSED!

!testRun: #SalesInterfaceTest #test17ListPurchasesFailesForInvalidCredentials stamp: 'DW 6/12/2022 15:22:17'!
PASSED!

!testRun: #SalesInterfaceTest #test18CantCheckoutCartWithInvalidId stamp: 'DW 6/12/2022 15:22:17'!
PASSED!

!testRun: #SalesInterfaceTest #test19CantCheckoutTwice stamp: 'DW 6/12/2022 15:22:17'!
PASSED!

!testRun: #SalesInterfaceTest #test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails stamp: 'DW 6/12/2022 15:22:17'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'DW 6/12/2022 15:22:17'!
FAILURE!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'DW 6/12/2022 15:22:26'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'DW 6/12/2022 15:22:27'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'DW 6/12/2022 15:22:28'!
FAILURE!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'DW 6/12/2022 15:22:28'!
FAILURE!
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:23:02' prior: 50483735!
test03CannotCreateCartWithInvalidClientId
	| salesInterface |
	salesInterface := SalesInterface 
		withAuthenticator: (self denyingAutheticator ) 
		withCatalog: testObjectsFactory defaultCatalog 
		withMerchantProcessor: self merchantProcessorThatDoesNotFail .
		
	self should: [salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser]
		raise: Error
		withMessageText: SalesInterface invalidCredentialsErrorDescription.
	
	! !

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'DW 6/12/2022 15:23:03'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'DW 6/12/2022 15:23:03'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'DW 6/12/2022 15:23:03'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'DW 6/12/2022 15:23:03'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'DW 6/12/2022 15:23:03'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'DW 6/12/2022 15:23:03'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'DW 6/12/2022 15:23:03'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'DW 6/12/2022 15:23:03'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'DW 6/12/2022 15:23:03'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'DW 6/12/2022 15:23:03'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'DW 6/12/2022 15:23:03'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'DW 6/12/2022 15:23:03'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'DW 6/12/2022 15:23:03'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'DW 6/12/2022 15:23:03'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'DW 6/12/2022 15:23:03'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'DW 6/12/2022 15:23:03'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'DW 6/12/2022 15:23:03'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'DW 6/12/2022 15:23:03'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'DW 6/12/2022 15:23:03'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'DW 6/12/2022 15:23:03'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'DW 6/12/2022 15:23:03'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'DW 6/12/2022 15:23:03'!
PASSED!

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'DW 6/12/2022 15:23:03'!
PASSED!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'DW 6/12/2022 15:23:03'!
PASSED!

!testRun: #SalesInterfaceTest #test10AddToCartQuantityMustBeAPositiveNumber stamp: 'DW 6/12/2022 15:23:03'!
PASSED!

!testRun: #SalesInterfaceTest #test11AddToCartQuantityMustBeAnInteger stamp: 'DW 6/12/2022 15:23:03'!
PASSED!

!testRun: #SalesInterfaceTest #test12ListPurchasesOfIvalidUserFails stamp: 'DW 6/12/2022 15:23:03'!
PASSED!

!testRun: #SalesInterfaceTest #test13ListPurchasesOfFreshClientIsEmpty stamp: 'DW 6/12/2022 15:23:04'!
PASSED!

!testRun: #SalesInterfaceTest #test14ListPurchasesAffectedByCheckout stamp: 'DW 6/12/2022 15:23:04'!
PASSED!

!testRun: #SalesInterfaceTest #test15ListPurchasesIsemptyBeforeCheckout stamp: 'DW 6/12/2022 15:23:04'!
PASSED!

!testRun: #SalesInterfaceTest #test16ListPurchasesAfterTwoCheckoutsShowsContentsOfBothCarts stamp: 'DW 6/12/2022 15:23:04'!
PASSED!

!testRun: #SalesInterfaceTest #test17ListPurchasesFailesForInvalidCredentials stamp: 'DW 6/12/2022 15:23:04'!
PASSED!

!testRun: #SalesInterfaceTest #test18CantCheckoutCartWithInvalidId stamp: 'DW 6/12/2022 15:23:04'!
PASSED!

!testRun: #SalesInterfaceTest #test19CantCheckoutTwice stamp: 'DW 6/12/2022 15:23:04'!
PASSED!

!testRun: #SalesInterfaceTest #test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails stamp: 'DW 6/12/2022 15:23:04'!
PASSED!
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:23:58'!
defaultSalesInterface

	^ SalesInterface 
		withAuthenticator: (self authenticatorWithSingleRegisteredUser) 
		withCatalog: testObjectsFactory defaultCatalog 
		withMerchantProcessor: self merchantProcessorThatDoesNotFail! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:23:58' prior: 50482690!
test16ListPurchasesAfterTwoCheckoutsShowsContentsOfBothCarts
	| salesInterface id |
	
	salesInterface := self defaultSalesInterface .
	
	id := salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser.

	salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 1.
	
	salesInterface checkOutCartWithCartId: id ccn: '0123456789012345' cced: testObjectsFactory monthOfNotExpiredCreditCard cco: 'Carlos Miguel Soto'.
	
	id := salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser.

	salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 1.
	
	salesInterface checkOutCartWithCartId: id ccn: '0123456789012345' cced: testObjectsFactory monthOfNotExpiredCreditCard cco: 'Carlos Miguel Soto'.
		
	self assert: (Bag with: testObjectsFactory itemSellByTheStore with: testObjectsFactory itemSellByTheStore) equals: (salesInterface listPurchasesWithClientId: self validUser password: self passwordOfValidUser).! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:23:58' prior: 50482506!
test17ListPurchasesFailesForInvalidCredentials
	| salesInterface |
	
	salesInterface := self defaultSalesInterface .

	self should: [salesInterface listPurchasesWithClientId: self validUser password: self invalidPasswordOfValidUser]
		raise: Error - MessageNotUnderstood
		withMessageText: SalesInterface invalidCredentialsErrorDescription.! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:23:58' prior: 50483326!
test11AddToCartQuantityMustBeAnInteger
	| salesInterface id |
	
	salesInterface := self defaultSalesInterface .
		
	id := salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser.
	
	self should: [salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 1.5]
		raise: Error - MessageNotUnderstood
		withMessageText: SalesInterface quantityNotAPositiveIntegerErrorDescription.
	! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:23:58' prior: 50483716!
test04CannotCreateCartWithInvalidPassword
	| salesInterface |
	salesInterface := self defaultSalesInterface .
		
	self should: [salesInterface createCartWithClientId: self validUser password: self invalidPasswordOfValidUser]
		raise: Error
		withMessageText: SalesInterface invalidCredentialsErrorDescription.
	
	! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:23:58' prior: 50483025!
test14ListPurchasesAffectedByCheckout
	| salesInterface id |
	
	salesInterface := self defaultSalesInterface .
		
	id := salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser.

	salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 1.
	
	salesInterface checkOutCartWithCartId: id ccn: '0123456789012345' cced: testObjectsFactory monthOfNotExpiredCreditCard cco: 'Carlos Miguel Soto'.
	
	self assert: (Bag with: testObjectsFactory itemSellByTheStore) equals: (salesInterface listPurchasesWithClientId: self validUser password: self passwordOfValidUser).! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:23:58' prior: 50482080!
test19CantCheckoutTwice
	| salesInterface id |
	
	salesInterface := self defaultSalesInterface .
		
	id := salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser.

	salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 1.
	
	salesInterface checkOutCartWithCartId: id ccn: '0123456789012345' cced: testObjectsFactory monthOfNotExpiredCreditCard cco: 'Carlos Miguel Soto'.
	
	self should: [	
	salesInterface checkOutCartWithCartId: id ccn: '0123456789012345' cced: testObjectsFactory monthOfNotExpiredCreditCard cco: 'Carlos Miguel Soto'.
	] raise: Error - MessageNotUnderstood
	withMessageText: SalesInterface invalidCartIdErrorDescription.! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:23:58' prior: 50483172!
test13ListPurchasesOfFreshClientIsEmpty
	| salesInterface |
	
	salesInterface := self defaultSalesInterface .
		
	self assert: Bag new equals: (salesInterface listPurchasesWithClientId: self validUser password: self passwordOfValidUser).! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:23:58' prior: 50483188!
test12ListPurchasesOfIvalidUserFails
	| salesInterface |
	
	salesInterface := self defaultSalesInterface .
		
	self should: [salesInterface listPurchasesWithClientId: self validUser password: self invalidPasswordOfValidUser]
		raise: Error - MessageNotUnderstood 
		withMessageText: SalesInterface invalidCredentialsErrorDescription.! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:23:58' prior: 50483753!
test02NewCartGenreatesUniqueIds
	| salesInterface id1 id2 |
	salesInterface := self defaultSalesInterface .
		
	id1 := salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser.
	id2 := salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser.
	self deny: (id1 = id2).! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:23:58' prior: 50482851!
test15ListPurchasesIsemptyBeforeCheckout
	| salesInterface id |
	
	salesInterface := self defaultSalesInterface .
		
	id := salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser.

	salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 1.
		
	self assert: (Bag new) equals: (salesInterface listPurchasesWithClientId: self validUser password: self passwordOfValidUser).! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:23:58' prior: 50483694!
test05ListCartReflectsAddToCart
	| salesInterface id |
	salesInterface := self defaultSalesInterface .
		
	
	id := salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser.
	salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 	1.
	self assert: (Bag with: testObjectsFactory itemSellByTheStore) equals: (salesInterface listCartWithCartId: id).
	! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:23:58' prior: 50483669!
test06AddToCartDoesntAffectOtherCarts
	| salesInterface id1 id2 |
	salesInterface := self defaultSalesInterface .
		
	
	id1 := salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser.
	id2 := salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser.
	
	salesInterface addToCartWithCartId: id1 bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 	1.
	
	self assert: (Bag new) equals: (salesInterface listCartWithCartId: id2).
	! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:23:58' prior: 50483514!
test08CannotAddToCartWithInvalidCartId
	| salesInterface |
	
	salesInterface := self defaultSalesInterface .
		
	self should: [salesInterface addToCartWithCartId: nil bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 1]
		raise: Error - MessageNotUnderstood
		withMessageText: SalesInterface invalidCartIdErrorDescription.
	! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:23:58' prior: 50483349!
test10AddToCartQuantityMustBeAPositiveNumber
	| salesInterface id |
	
	salesInterface := self defaultSalesInterface .
		
	id := salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser.
	
	self should: [salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: -1]
		raise: Error - MessageNotUnderstood
		withMessageText: SalesInterface quantityNotAPositiveIntegerErrorDescription.
	! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:23:58' prior: 50483652!
test07CannotListCartWithInvalidCartId
	| salesInterface |
	
	salesInterface := self defaultSalesInterface .
		
	self should: [salesInterface listCartWithCartId: nil]
		raise: Error - MessageNotUnderstood
		withMessageText: SalesInterface invalidCartIdErrorDescription.
	! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:23:58' prior: 50483772!
test01ListCartOfNewlyCreatedCartIsEmpty
	| id salesInterface |
	salesInterface := self defaultSalesInterface .
		
	id := salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser.
	self assert: Bag new equals: (salesInterface listCartWithCartId: id).! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:23:58' prior: 50482367!
test18CantCheckoutCartWithInvalidId
	| salesInterface |
	
	salesInterface := self defaultSalesInterface .

	self should: [salesInterface checkOutCartWithCartId: nil ccn: '0123456789012345' cced: testObjectsFactory monthOfNotExpiredCreditCard cco: 'Carlos Miguel Soto'.]
		raise: Error - MessageNotUnderstood
		withMessageText: SalesInterface invalidCartIdErrorDescription.
! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:23:58' prior: 50483372!
test09CannotAddToCartAnItemNotSoldByTheStore
	| salesInterface id |
	
	salesInterface := self defaultSalesInterface .
		
	id := salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser.
	
	self should: [salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemNotSellByTheStore bookQuantity: 1]
		raise: Error - MessageNotUnderstood
		withMessageText: SalesInterface itemNotInCatalogErrorDescription.
	! !
!SalesInterfaceTest methodsFor: 'objects' stamp: 'DW 6/12/2022 15:25:07'!
defaultSalesInterfaceWithAutehnticator: anAuthenticator

	^ SalesInterface 
		withAuthenticator: anAuthenticator 
		withCatalog: testObjectsFactory defaultCatalog 
		withMerchantProcessor: self merchantProcessorThatDoesNotFail! !
!SalesInterfaceTest methodsFor: 'objects' stamp: 'DW 6/12/2022 15:26:02'!
defaultSalesInterfaceWithMerchantProcessor: aMerchantProcessor

	^ SalesInterface 
		withAuthenticator: (self authenticatorWithSingleRegisteredUser) 
		withCatalog: testObjectsFactory defaultCatalog 
		withMerchantProcessor: aMerchantProcessor.! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:26:23' prior: 50481612!
test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails
	| salesInterface id |
	
	salesInterface := self defaultSalesInterfaceWithMerchantProcessor: self merchantProcessorThatFails.
	
	id := salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser.

	salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 1.
		
	self should: [	
	salesInterface checkOutCartWithCartId: id ccn: '0123456789012345' cced: testObjectsFactory monthOfExpiredCreditCard cco: 'Carlos Miguel Soto'.
	] raise: Error - MessageNotUnderstood
	withMessageText: SalesInterface debitErrorDescription.! !

!testRun: #SalesInterfaceTest #test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails stamp: 'DW 6/12/2022 15:26:24'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'DW 6/12/2022 15:26:24'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'DW 6/12/2022 15:26:24'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'DW 6/12/2022 15:26:24'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'DW 6/12/2022 15:26:24'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'DW 6/12/2022 15:26:24'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'DW 6/12/2022 15:26:24'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'DW 6/12/2022 15:26:24'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'DW 6/12/2022 15:26:24'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'DW 6/12/2022 15:26:24'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'DW 6/12/2022 15:26:24'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'DW 6/12/2022 15:26:24'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'DW 6/12/2022 15:26:24'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'DW 6/12/2022 15:26:24'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'DW 6/12/2022 15:26:24'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'DW 6/12/2022 15:26:24'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'DW 6/12/2022 15:26:24'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'DW 6/12/2022 15:26:25'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'DW 6/12/2022 15:26:25'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'DW 6/12/2022 15:26:25'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'DW 6/12/2022 15:26:25'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'DW 6/12/2022 15:26:25'!
PASSED!

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'DW 6/12/2022 15:26:25'!
PASSED!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'DW 6/12/2022 15:26:25'!
PASSED!

!testRun: #SalesInterfaceTest #test10AddToCartQuantityMustBeAPositiveNumber stamp: 'DW 6/12/2022 15:26:25'!
PASSED!

!testRun: #SalesInterfaceTest #test11AddToCartQuantityMustBeAnInteger stamp: 'DW 6/12/2022 15:26:25'!
PASSED!

!testRun: #SalesInterfaceTest #test12ListPurchasesOfIvalidUserFails stamp: 'DW 6/12/2022 15:26:25'!
PASSED!

!testRun: #SalesInterfaceTest #test13ListPurchasesOfFreshClientIsEmpty stamp: 'DW 6/12/2022 15:26:25'!
PASSED!

!testRun: #SalesInterfaceTest #test14ListPurchasesAffectedByCheckout stamp: 'DW 6/12/2022 15:26:25'!
PASSED!

!testRun: #SalesInterfaceTest #test15ListPurchasesIsemptyBeforeCheckout stamp: 'DW 6/12/2022 15:26:25'!
PASSED!

!testRun: #SalesInterfaceTest #test16ListPurchasesAfterTwoCheckoutsShowsContentsOfBothCarts stamp: 'DW 6/12/2022 15:26:25'!
PASSED!

!testRun: #SalesInterfaceTest #test17ListPurchasesFailesForInvalidCredentials stamp: 'DW 6/12/2022 15:26:25'!
PASSED!

!testRun: #SalesInterfaceTest #test18CantCheckoutCartWithInvalidId stamp: 'DW 6/12/2022 15:26:25'!
PASSED!

!testRun: #SalesInterfaceTest #test19CantCheckoutTwice stamp: 'DW 6/12/2022 15:26:25'!
PASSED!

!testRun: #SalesInterfaceTest #test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails stamp: 'DW 6/12/2022 15:26:25'!
PASSED!
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:26:54' prior: 50483926!
test03CannotCreateCartWithInvalidClientId
	| salesInterface |
	salesInterface := self defaultSalesInterfaceWithAutehnticator: self denyingAutheticator.
		
	self should: [salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser]
		raise: Error
		withMessageText: SalesInterface invalidCredentialsErrorDescription.
	
	! !

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'DW 6/12/2022 15:26:56'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'DW 6/12/2022 15:26:56'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'DW 6/12/2022 15:26:56'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'DW 6/12/2022 15:26:56'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'DW 6/12/2022 15:26:56'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'DW 6/12/2022 15:26:56'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'DW 6/12/2022 15:26:56'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'DW 6/12/2022 15:26:56'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'DW 6/12/2022 15:26:56'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'DW 6/12/2022 15:26:56'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'DW 6/12/2022 15:26:56'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'DW 6/12/2022 15:26:56'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'DW 6/12/2022 15:26:56'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'DW 6/12/2022 15:26:56'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'DW 6/12/2022 15:26:56'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'DW 6/12/2022 15:26:56'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'DW 6/12/2022 15:26:56'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'DW 6/12/2022 15:26:56'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'DW 6/12/2022 15:26:56'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'DW 6/12/2022 15:26:56'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'DW 6/12/2022 15:26:56'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'DW 6/12/2022 15:26:56'!
PASSED!

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'DW 6/12/2022 15:26:56'!
PASSED!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'DW 6/12/2022 15:26:56'!
PASSED!

!testRun: #SalesInterfaceTest #test10AddToCartQuantityMustBeAPositiveNumber stamp: 'DW 6/12/2022 15:26:56'!
PASSED!

!testRun: #SalesInterfaceTest #test11AddToCartQuantityMustBeAnInteger stamp: 'DW 6/12/2022 15:26:56'!
PASSED!

!testRun: #SalesInterfaceTest #test12ListPurchasesOfIvalidUserFails stamp: 'DW 6/12/2022 15:26:56'!
PASSED!

!testRun: #SalesInterfaceTest #test13ListPurchasesOfFreshClientIsEmpty stamp: 'DW 6/12/2022 15:26:57'!
PASSED!

!testRun: #SalesInterfaceTest #test14ListPurchasesAffectedByCheckout stamp: 'DW 6/12/2022 15:26:57'!
PASSED!

!testRun: #SalesInterfaceTest #test15ListPurchasesIsemptyBeforeCheckout stamp: 'DW 6/12/2022 15:26:57'!
PASSED!

!testRun: #SalesInterfaceTest #test16ListPurchasesAfterTwoCheckoutsShowsContentsOfBothCarts stamp: 'DW 6/12/2022 15:26:57'!
PASSED!

!testRun: #SalesInterfaceTest #test17ListPurchasesFailesForInvalidCredentials stamp: 'DW 6/12/2022 15:26:57'!
PASSED!

!testRun: #SalesInterfaceTest #test18CantCheckoutCartWithInvalidId stamp: 'DW 6/12/2022 15:26:57'!
PASSED!

!testRun: #SalesInterfaceTest #test19CantCheckoutTwice stamp: 'DW 6/12/2022 15:26:57'!
PASSED!

!testRun: #SalesInterfaceTest #test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails stamp: 'DW 6/12/2022 15:26:57'!
PASSED!
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:28:20' prior: 50484404!
test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails
	| salesInterface id |
	
	salesInterface := self defaultSalesInterfaceWithMerchantProcessor: self merchantProcessorThatFails.
	
	id := salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser.

	salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 1.
		
	self should: [	
	salesInterface checkOutCartWithCartId: id ccn: '0123456789012345' cced: testObjectsFactory monthOfExpiredCreditCard cco: 'Carlos Miguel Soto'.
	] raise: Error - MessageNotUnderstood
	withMessageText: SalesInterface debitErrorDescription.
	
	self assert: Bag new equals: (salesInterface listPurchasesWithClientId: self validUser password: self passwordOfValidUser).! !

!testRun: #SalesInterfaceTest #test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails stamp: 'DW 6/12/2022 15:28:21'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'DW 6/12/2022 15:28:21'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'DW 6/12/2022 15:28:21'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'DW 6/12/2022 15:28:21'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'DW 6/12/2022 15:28:21'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'DW 6/12/2022 15:28:21'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'DW 6/12/2022 15:28:21'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'DW 6/12/2022 15:28:21'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'DW 6/12/2022 15:28:21'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'DW 6/12/2022 15:28:21'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'DW 6/12/2022 15:28:21'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'DW 6/12/2022 15:28:21'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'DW 6/12/2022 15:28:21'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'DW 6/12/2022 15:28:21'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'DW 6/12/2022 15:28:21'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'DW 6/12/2022 15:28:21'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'DW 6/12/2022 15:28:21'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'DW 6/12/2022 15:28:22'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'DW 6/12/2022 15:28:22'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'DW 6/12/2022 15:28:22'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'DW 6/12/2022 15:28:22'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'DW 6/12/2022 15:28:22'!
PASSED!

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'DW 6/12/2022 15:28:22'!
PASSED!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'DW 6/12/2022 15:28:22'!
PASSED!

!testRun: #SalesInterfaceTest #test10AddToCartQuantityMustBeAPositiveNumber stamp: 'DW 6/12/2022 15:28:22'!
PASSED!

!testRun: #SalesInterfaceTest #test11AddToCartQuantityMustBeAnInteger stamp: 'DW 6/12/2022 15:28:22'!
PASSED!

!testRun: #SalesInterfaceTest #test12ListPurchasesOfIvalidUserFails stamp: 'DW 6/12/2022 15:28:22'!
PASSED!

!testRun: #SalesInterfaceTest #test13ListPurchasesOfFreshClientIsEmpty stamp: 'DW 6/12/2022 15:28:22'!
PASSED!

!testRun: #SalesInterfaceTest #test14ListPurchasesAffectedByCheckout stamp: 'DW 6/12/2022 15:28:22'!
PASSED!

!testRun: #SalesInterfaceTest #test15ListPurchasesIsemptyBeforeCheckout stamp: 'DW 6/12/2022 15:28:22'!
PASSED!

!testRun: #SalesInterfaceTest #test16ListPurchasesAfterTwoCheckoutsShowsContentsOfBothCarts stamp: 'DW 6/12/2022 15:28:22'!
PASSED!

!testRun: #SalesInterfaceTest #test17ListPurchasesFailesForInvalidCredentials stamp: 'DW 6/12/2022 15:28:22'!
PASSED!

!testRun: #SalesInterfaceTest #test18CantCheckoutCartWithInvalidId stamp: 'DW 6/12/2022 15:28:22'!
PASSED!

!testRun: #SalesInterfaceTest #test19CantCheckoutTwice stamp: 'DW 6/12/2022 15:28:22'!
PASSED!

!testRun: #SalesInterfaceTest #test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails stamp: 'DW 6/12/2022 15:28:22'!
PASSED!
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:29:19'!
createCartOfDefaultUser: salesInterface

	^ salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:29:19' prior: 50484073!
test16ListPurchasesAfterTwoCheckoutsShowsContentsOfBothCarts
	| salesInterface id |
	
	salesInterface := self defaultSalesInterface .
	
	id := self createCartOfDefaultUser: salesInterface.

	salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 1.
	
	salesInterface checkOutCartWithCartId: id ccn: '0123456789012345' cced: testObjectsFactory monthOfNotExpiredCreditCard cco: 'Carlos Miguel Soto'.
	
	id := salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser.

	salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 1.
	
	salesInterface checkOutCartWithCartId: id ccn: '0123456789012345' cced: testObjectsFactory monthOfNotExpiredCreditCard cco: 'Carlos Miguel Soto'.
		
	self assert: (Bag with: testObjectsFactory itemSellByTheStore with: testObjectsFactory itemSellByTheStore) equals: (salesInterface listPurchasesWithClientId: self validUser password: self passwordOfValidUser).! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:29:19' prior: 50484835!
test16ListPurchasesAfterTwoCheckoutsShowsContentsOfBothCarts
	| salesInterface id |
	
	salesInterface := self defaultSalesInterface .
	
	id := self createCartOfDefaultUser: salesInterface.

	salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 1.
	
	salesInterface checkOutCartWithCartId: id ccn: '0123456789012345' cced: testObjectsFactory monthOfNotExpiredCreditCard cco: 'Carlos Miguel Soto'.
	
	id := self createCartOfDefaultUser: salesInterface.

	salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 1.
	
	salesInterface checkOutCartWithCartId: id ccn: '0123456789012345' cced: testObjectsFactory monthOfNotExpiredCreditCard cco: 'Carlos Miguel Soto'.
		
	self assert: (Bag with: testObjectsFactory itemSellByTheStore with: testObjectsFactory itemSellByTheStore) equals: (salesInterface listPurchasesWithClientId: self validUser password: self passwordOfValidUser).! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:29:19' prior: 50484123!
test11AddToCartQuantityMustBeAnInteger
	| salesInterface id |
	
	salesInterface := self defaultSalesInterface .
		
	id := self createCartOfDefaultUser: salesInterface.
	
	self should: [salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 1.5]
		raise: Error - MessageNotUnderstood
		withMessageText: SalesInterface quantityNotAPositiveIntegerErrorDescription.
	! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:29:19' prior: 50484154!
test14ListPurchasesAffectedByCheckout
	| salesInterface id |
	
	salesInterface := self defaultSalesInterface .
		
	id := self createCartOfDefaultUser: salesInterface.

	salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 1.
	
	salesInterface checkOutCartWithCartId: id ccn: '0123456789012345' cced: testObjectsFactory monthOfNotExpiredCreditCard cco: 'Carlos Miguel Soto'.
	
	self assert: (Bag with: testObjectsFactory itemSellByTheStore) equals: (salesInterface listPurchasesWithClientId: self validUser password: self passwordOfValidUser).! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:29:19' prior: 50484177!
test19CantCheckoutTwice
	| salesInterface id |
	
	salesInterface := self defaultSalesInterface .
		
	id := self createCartOfDefaultUser: salesInterface.

	salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 1.
	
	salesInterface checkOutCartWithCartId: id ccn: '0123456789012345' cced: testObjectsFactory monthOfNotExpiredCreditCard cco: 'Carlos Miguel Soto'.
	
	self should: [	
	salesInterface checkOutCartWithCartId: id ccn: '0123456789012345' cced: testObjectsFactory monthOfNotExpiredCreditCard cco: 'Carlos Miguel Soto'.
	] raise: Error - MessageNotUnderstood
	withMessageText: SalesInterface invalidCartIdErrorDescription.! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:29:19' prior: 50484681!
test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails
	| salesInterface id |
	
	salesInterface := self defaultSalesInterfaceWithMerchantProcessor: self merchantProcessorThatFails.
	
	id := self createCartOfDefaultUser: salesInterface.

	salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 1.
		
	self should: [	
	salesInterface checkOutCartWithCartId: id ccn: '0123456789012345' cced: testObjectsFactory monthOfExpiredCreditCard cco: 'Carlos Miguel Soto'.
	] raise: Error - MessageNotUnderstood
	withMessageText: SalesInterface debitErrorDescription.
	
	self assert: Bag new equals: (salesInterface listPurchasesWithClientId: self validUser password: self passwordOfValidUser).! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:29:19' prior: 50484276!
test06AddToCartDoesntAffectOtherCarts
	| salesInterface id1 id2 |
	salesInterface := self defaultSalesInterface .
		
	
	id1 := self createCartOfDefaultUser: salesInterface.
	id2 := salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser.
	
	salesInterface addToCartWithCartId: id1 bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 	1.
	
	self assert: (Bag new) equals: (salesInterface listCartWithCartId: id2).
	! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:29:19' prior: 50484992!
test06AddToCartDoesntAffectOtherCarts
	| salesInterface id1 id2 |
	salesInterface := self defaultSalesInterface .
		
	
	id1 := self createCartOfDefaultUser: salesInterface.
	id2 := self createCartOfDefaultUser: salesInterface.
	
	salesInterface addToCartWithCartId: id1 bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 	1.
	
	self assert: (Bag new) equals: (salesInterface listCartWithCartId: id2).
	! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:29:19' prior: 50484242!
test15ListPurchasesIsemptyBeforeCheckout
	| salesInterface id |
	
	salesInterface := self defaultSalesInterface .
		
	id := self createCartOfDefaultUser: salesInterface.

	salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 1.
		
	self assert: (Bag new) equals: (salesInterface listPurchasesWithClientId: self validUser password: self passwordOfValidUser).! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:29:19' prior: 50484228!
test02NewCartGenreatesUniqueIds
	| salesInterface id1 id2 |
	salesInterface := self defaultSalesInterface .
		
	id1 := self createCartOfDefaultUser: salesInterface.
	id2 := salesInterface createCartWithClientId: self validUser password: self passwordOfValidUser.
	self deny: (id1 = id2).! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:29:19' prior: 50485043!
test02NewCartGenreatesUniqueIds
	| salesInterface id1 id2 |
	salesInterface := self defaultSalesInterface .
		
	id1 := self createCartOfDefaultUser: salesInterface.
	id2 := self createCartOfDefaultUser: salesInterface.
	self deny: (id1 = id2).! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:29:19' prior: 50484259!
test05ListCartReflectsAddToCart
	| salesInterface id |
	salesInterface := self defaultSalesInterface .
		
	
	id := self createCartOfDefaultUser: salesInterface.
	salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 	1.
	self assert: (Bag with: testObjectsFactory itemSellByTheStore) equals: (salesInterface listCartWithCartId: id).
	! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:29:19' prior: 50484309!
test10AddToCartQuantityMustBeAPositiveNumber
	| salesInterface id |
	
	salesInterface := self defaultSalesInterface .
		
	id := self createCartOfDefaultUser: salesInterface.
	
	self should: [salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: -1]
		raise: Error - MessageNotUnderstood
		withMessageText: SalesInterface quantityNotAPositiveIntegerErrorDescription.
	! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:29:19' prior: 50484339!
test01ListCartOfNewlyCreatedCartIsEmpty
	| id salesInterface |
	salesInterface := self defaultSalesInterface .
		
	id := self createCartOfDefaultUser: salesInterface.
	self assert: Bag new equals: (salesInterface listCartWithCartId: id).! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:29:19' prior: 50484547!
test03CannotCreateCartWithInvalidClientId
	| salesInterface |
	salesInterface := self defaultSalesInterfaceWithAutehnticator: self denyingAutheticator.
		
	self should: [self createCartOfDefaultUser: salesInterface]
		raise: Error
		withMessageText: SalesInterface invalidCredentialsErrorDescription.
	
	! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:29:19' prior: 50484366!
test09CannotAddToCartAnItemNotSoldByTheStore
	| salesInterface id |
	
	salesInterface := self defaultSalesInterface .
		
	id := self createCartOfDefaultUser: salesInterface.
	
	self should: [salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemNotSellByTheStore bookQuantity: 1]
		raise: Error - MessageNotUnderstood
		withMessageText: SalesInterface itemNotInCatalogErrorDescription.
	! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:30:13' prior: 50484141!
test04CannotCreateCartWithInvalidPassword
	| salesInterface |
	salesInterface := self defaultSalesInterface .
		
	self should: [salesInterface createCartWithClientId: self validUser password: self invalidPasswordOfValidUser]
	
		raise: Error
		
		withMessageText: SalesInterface invalidCredentialsErrorDescription.
	! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:31:12' prior: 50485137!
test04CannotCreateCartWithInvalidPassword
	| salesInterface closure |
	salesInterface := self defaultSalesInterface .
		
	closure _ [salesInterface createCartWithClientId: self validUser password: self invalidPasswordOfValidUser].
	self should: closure
	
		raise: Error
		
		withMessageText: SalesInterface invalidCredentialsErrorDescription.
	! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:31:38'!
shouldRaiseInvalidCredentials: closure

	^ self should: closure
	
		raise: Error
		
		withMessageText: SalesInterface invalidCredentialsErrorDescription! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:31:38' prior: 50485150!
test04CannotCreateCartWithInvalidPassword
	| salesInterface closure |
	salesInterface := self defaultSalesInterface .
		
	closure _ [salesInterface createCartWithClientId: self validUser password: self invalidPasswordOfValidUser].
	self shouldRaiseInvalidCredentials: closure.
	! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:31:54' prior: 50485172!
test04CannotCreateCartWithInvalidPassword
	| salesInterface |
	salesInterface := self defaultSalesInterface .
		
	self shouldRaiseInvalidCredentials: [salesInterface createCartWithClientId: self validUser password: self invalidPasswordOfValidUser].
	! !

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'DW 6/12/2022 15:31:57'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'DW 6/12/2022 15:31:57'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'DW 6/12/2022 15:31:57'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'DW 6/12/2022 15:31:57'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'DW 6/12/2022 15:31:57'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'DW 6/12/2022 15:31:57'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'DW 6/12/2022 15:31:57'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'DW 6/12/2022 15:31:57'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'DW 6/12/2022 15:31:57'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'DW 6/12/2022 15:31:57'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'DW 6/12/2022 15:31:57'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'DW 6/12/2022 15:31:57'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'DW 6/12/2022 15:31:57'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'DW 6/12/2022 15:31:57'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'DW 6/12/2022 15:31:57'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'DW 6/12/2022 15:31:57'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'DW 6/12/2022 15:31:57'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'DW 6/12/2022 15:31:57'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'DW 6/12/2022 15:31:57'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'DW 6/12/2022 15:31:57'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'DW 6/12/2022 15:31:57'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'DW 6/12/2022 15:31:57'!
PASSED!

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'DW 6/12/2022 15:31:57'!
PASSED!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'DW 6/12/2022 15:31:57'!
PASSED!

!testRun: #SalesInterfaceTest #test10AddToCartQuantityMustBeAPositiveNumber stamp: 'DW 6/12/2022 15:31:57'!
PASSED!

!testRun: #SalesInterfaceTest #test11AddToCartQuantityMustBeAnInteger stamp: 'DW 6/12/2022 15:31:57'!
PASSED!

!testRun: #SalesInterfaceTest #test12ListPurchasesOfIvalidUserFails stamp: 'DW 6/12/2022 15:31:57'!
PASSED!

!testRun: #SalesInterfaceTest #test13ListPurchasesOfFreshClientIsEmpty stamp: 'DW 6/12/2022 15:31:57'!
PASSED!

!testRun: #SalesInterfaceTest #test14ListPurchasesAffectedByCheckout stamp: 'DW 6/12/2022 15:31:57'!
PASSED!

!testRun: #SalesInterfaceTest #test15ListPurchasesIsemptyBeforeCheckout stamp: 'DW 6/12/2022 15:31:57'!
PASSED!

!testRun: #SalesInterfaceTest #test16ListPurchasesAfterTwoCheckoutsShowsContentsOfBothCarts stamp: 'DW 6/12/2022 15:31:57'!
PASSED!

!testRun: #SalesInterfaceTest #test17ListPurchasesFailesForInvalidCredentials stamp: 'DW 6/12/2022 15:31:57'!
PASSED!

!testRun: #SalesInterfaceTest #test18CantCheckoutCartWithInvalidId stamp: 'DW 6/12/2022 15:31:57'!
PASSED!

!testRun: #SalesInterfaceTest #test19CantCheckoutTwice stamp: 'DW 6/12/2022 15:31:57'!
PASSED!

!testRun: #SalesInterfaceTest #test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails stamp: 'DW 6/12/2022 15:31:57'!
PASSED!
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:32:22' prior: 50485108!
test03CannotCreateCartWithInvalidClientId
	| salesInterface |
	salesInterface := self defaultSalesInterfaceWithAutehnticator: self denyingAutheticator.
		
	self shouldRaiseInvalidCredentials: [self createCartOfDefaultUser: salesInterface]
	! !

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'DW 6/12/2022 15:32:26'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'DW 6/12/2022 15:32:26'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'DW 6/12/2022 15:32:26'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'DW 6/12/2022 15:32:26'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'DW 6/12/2022 15:32:26'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'DW 6/12/2022 15:32:26'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'DW 6/12/2022 15:32:26'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'DW 6/12/2022 15:32:26'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'DW 6/12/2022 15:32:26'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'DW 6/12/2022 15:32:26'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'DW 6/12/2022 15:32:26'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'DW 6/12/2022 15:32:26'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'DW 6/12/2022 15:32:26'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'DW 6/12/2022 15:32:26'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'DW 6/12/2022 15:32:26'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'DW 6/12/2022 15:32:26'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'DW 6/12/2022 15:32:26'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'DW 6/12/2022 15:32:26'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'DW 6/12/2022 15:32:26'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'DW 6/12/2022 15:32:26'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'DW 6/12/2022 15:32:26'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'DW 6/12/2022 15:32:26'!
PASSED!

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'DW 6/12/2022 15:32:26'!
PASSED!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'DW 6/12/2022 15:32:26'!
PASSED!

!testRun: #SalesInterfaceTest #test10AddToCartQuantityMustBeAPositiveNumber stamp: 'DW 6/12/2022 15:32:26'!
PASSED!

!testRun: #SalesInterfaceTest #test11AddToCartQuantityMustBeAnInteger stamp: 'DW 6/12/2022 15:32:26'!
PASSED!

!testRun: #SalesInterfaceTest #test12ListPurchasesOfIvalidUserFails stamp: 'DW 6/12/2022 15:32:26'!
PASSED!

!testRun: #SalesInterfaceTest #test13ListPurchasesOfFreshClientIsEmpty stamp: 'DW 6/12/2022 15:32:26'!
PASSED!

!testRun: #SalesInterfaceTest #test14ListPurchasesAffectedByCheckout stamp: 'DW 6/12/2022 15:32:26'!
PASSED!

!testRun: #SalesInterfaceTest #test15ListPurchasesIsemptyBeforeCheckout stamp: 'DW 6/12/2022 15:32:26'!
PASSED!

!testRun: #SalesInterfaceTest #test16ListPurchasesAfterTwoCheckoutsShowsContentsOfBothCarts stamp: 'DW 6/12/2022 15:32:26'!
PASSED!

!testRun: #SalesInterfaceTest #test17ListPurchasesFailesForInvalidCredentials stamp: 'DW 6/12/2022 15:32:27'!
PASSED!

!testRun: #SalesInterfaceTest #test18CantCheckoutCartWithInvalidId stamp: 'DW 6/12/2022 15:32:27'!
PASSED!

!testRun: #SalesInterfaceTest #test19CantCheckoutTwice stamp: 'DW 6/12/2022 15:32:27'!
PASSED!

!testRun: #SalesInterfaceTest #test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails stamp: 'DW 6/12/2022 15:32:27'!
PASSED!
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:32:51' prior: 50484214!
test12ListPurchasesOfIvalidUserFails
	| salesInterface |
	
	salesInterface := self defaultSalesInterface .
		
	self shouldRaiseInvalidCredentials: [salesInterface listPurchasesWithClientId: self validUser password: self invalidPasswordOfValidUser]
		! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:33:08' prior: 50484109!
test17ListPurchasesFailesForInvalidCredentials
	| salesInterface |
	
	salesInterface := self defaultSalesInterface .

	self shouldRaiseInvalidCredentials: [salesInterface listPurchasesWithClientId: self validUser password: self invalidPasswordOfValidUser]
	! !

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'DW 6/12/2022 15:33:19'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'DW 6/12/2022 15:33:19'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'DW 6/12/2022 15:33:19'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'DW 6/12/2022 15:33:19'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'DW 6/12/2022 15:33:19'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'DW 6/12/2022 15:33:19'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'DW 6/12/2022 15:33:19'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'DW 6/12/2022 15:33:19'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'DW 6/12/2022 15:33:19'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'DW 6/12/2022 15:33:19'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'DW 6/12/2022 15:33:19'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'DW 6/12/2022 15:33:19'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'DW 6/12/2022 15:33:19'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'DW 6/12/2022 15:33:19'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'DW 6/12/2022 15:33:19'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'DW 6/12/2022 15:33:19'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'DW 6/12/2022 15:33:19'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'DW 6/12/2022 15:33:19'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'DW 6/12/2022 15:33:19'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'DW 6/12/2022 15:33:19'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'DW 6/12/2022 15:33:19'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'DW 6/12/2022 15:33:19'!
PASSED!

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'DW 6/12/2022 15:33:19'!
PASSED!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'DW 6/12/2022 15:33:19'!
PASSED!

!testRun: #SalesInterfaceTest #test10AddToCartQuantityMustBeAPositiveNumber stamp: 'DW 6/12/2022 15:33:19'!
PASSED!

!testRun: #SalesInterfaceTest #test11AddToCartQuantityMustBeAnInteger stamp: 'DW 6/12/2022 15:33:19'!
PASSED!

!testRun: #SalesInterfaceTest #test12ListPurchasesOfIvalidUserFails stamp: 'DW 6/12/2022 15:33:19'!
PASSED!

!testRun: #SalesInterfaceTest #test13ListPurchasesOfFreshClientIsEmpty stamp: 'DW 6/12/2022 15:33:19'!
PASSED!

!testRun: #SalesInterfaceTest #test14ListPurchasesAffectedByCheckout stamp: 'DW 6/12/2022 15:33:19'!
PASSED!

!testRun: #SalesInterfaceTest #test15ListPurchasesIsemptyBeforeCheckout stamp: 'DW 6/12/2022 15:33:19'!
PASSED!

!testRun: #SalesInterfaceTest #test16ListPurchasesAfterTwoCheckoutsShowsContentsOfBothCarts stamp: 'DW 6/12/2022 15:33:19'!
PASSED!

!testRun: #SalesInterfaceTest #test17ListPurchasesFailesForInvalidCredentials stamp: 'DW 6/12/2022 15:33:19'!
PASSED!

!testRun: #SalesInterfaceTest #test18CantCheckoutCartWithInvalidId stamp: 'DW 6/12/2022 15:33:19'!
PASSED!

!testRun: #SalesInterfaceTest #test19CantCheckoutTwice stamp: 'DW 6/12/2022 15:33:19'!
PASSED!

!testRun: #SalesInterfaceTest #test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails stamp: 'DW 6/12/2022 15:33:19'!
PASSED!
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:34:17'!
checkoutWithDefaultCardOn: salesInterface withCartId: id

	^ salesInterface checkOutCartWithCartId: id ccn: '0123456789012345' cced: testObjectsFactory monthOfNotExpiredCreditCard cco: 'Carlos Miguel Soto'! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:34:18' prior: 50484870!
test16ListPurchasesAfterTwoCheckoutsShowsContentsOfBothCarts
	| salesInterface id |
	
	salesInterface := self defaultSalesInterface .
	
	id := self createCartOfDefaultUser: salesInterface.

	salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 1.
	
	self checkoutWithDefaultCardOn: salesInterface withCartId: id.
	
	id := self createCartOfDefaultUser: salesInterface.

	salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 1.
	
	salesInterface checkOutCartWithCartId: id ccn: '0123456789012345' cced: testObjectsFactory monthOfNotExpiredCreditCard cco: 'Carlos Miguel Soto'.
		
	self assert: (Bag with: testObjectsFactory itemSellByTheStore with: testObjectsFactory itemSellByTheStore) equals: (salesInterface listPurchasesWithClientId: self validUser password: self passwordOfValidUser).! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:34:18' prior: 50485595!
test16ListPurchasesAfterTwoCheckoutsShowsContentsOfBothCarts
	| salesInterface id |
	
	salesInterface := self defaultSalesInterface .
	
	id := self createCartOfDefaultUser: salesInterface.

	salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 1.
	
	self checkoutWithDefaultCardOn: salesInterface withCartId: id.
	
	id := self createCartOfDefaultUser: salesInterface.

	salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 1.
	
	self checkoutWithDefaultCardOn: salesInterface withCartId: id.
		
	self assert: (Bag with: testObjectsFactory itemSellByTheStore with: testObjectsFactory itemSellByTheStore) equals: (salesInterface listPurchasesWithClientId: self validUser password: self passwordOfValidUser).! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:34:18' prior: 50484942!
test19CantCheckoutTwice
	| salesInterface id |
	
	salesInterface := self defaultSalesInterface .
		
	id := self createCartOfDefaultUser: salesInterface.

	salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 1.
	
	self checkoutWithDefaultCardOn: salesInterface withCartId: id.
	
	self should: [	
	salesInterface checkOutCartWithCartId: id ccn: '0123456789012345' cced: testObjectsFactory monthOfNotExpiredCreditCard cco: 'Carlos Miguel Soto'.
	] raise: Error - MessageNotUnderstood
	withMessageText: SalesInterface invalidCartIdErrorDescription.! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:34:18' prior: 50485654!
test19CantCheckoutTwice
	| salesInterface id |
	
	salesInterface := self defaultSalesInterface .
		
	id := self createCartOfDefaultUser: salesInterface.

	salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 1.
	
	self checkoutWithDefaultCardOn: salesInterface withCartId: id.
	
	self should: [	
	self checkoutWithDefaultCardOn: salesInterface withCartId: id.
	] raise: Error - MessageNotUnderstood
	withMessageText: SalesInterface invalidCartIdErrorDescription.! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:34:18' prior: 50484920!
test14ListPurchasesAffectedByCheckout
	| salesInterface id |
	
	salesInterface := self defaultSalesInterface .
		
	id := self createCartOfDefaultUser: salesInterface.

	salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 1.
	
	self checkoutWithDefaultCardOn: salesInterface withCartId: id.
	
	self assert: (Bag with: testObjectsFactory itemSellByTheStore) equals: (salesInterface listPurchasesWithClientId: self validUser password: self passwordOfValidUser).! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:34:28' prior: 50485676!
test19CantCheckoutTwice
	| salesInterface id |
	
	salesInterface := self defaultSalesInterface .
		
	id := self createCartOfDefaultUser: salesInterface.

	salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 1.
	
	self checkoutWithDefaultCardOn: salesInterface withCartId: id.
	
	self should: [	
		self checkoutWithDefaultCardOn: salesInterface withCartId: id.
	] raise: Error - MessageNotUnderstood
	withMessageText: SalesInterface invalidCartIdErrorDescription.! !

!testRun: #SalesInterfaceTest #test19CantCheckoutTwice stamp: 'DW 6/12/2022 15:34:29'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'DW 6/12/2022 15:34:29'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'DW 6/12/2022 15:34:29'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'DW 6/12/2022 15:34:29'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'DW 6/12/2022 15:34:30'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'DW 6/12/2022 15:34:30'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'DW 6/12/2022 15:34:30'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'DW 6/12/2022 15:34:30'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'DW 6/12/2022 15:34:30'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'DW 6/12/2022 15:34:30'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'DW 6/12/2022 15:34:30'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'DW 6/12/2022 15:34:30'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'DW 6/12/2022 15:34:30'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'DW 6/12/2022 15:34:30'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'DW 6/12/2022 15:34:30'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'DW 6/12/2022 15:34:30'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'DW 6/12/2022 15:34:30'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'DW 6/12/2022 15:34:30'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'DW 6/12/2022 15:34:30'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'DW 6/12/2022 15:34:30'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'DW 6/12/2022 15:34:30'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'DW 6/12/2022 15:34:30'!
PASSED!

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'DW 6/12/2022 15:34:30'!
PASSED!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'DW 6/12/2022 15:34:30'!
PASSED!

!testRun: #SalesInterfaceTest #test10AddToCartQuantityMustBeAPositiveNumber stamp: 'DW 6/12/2022 15:34:30'!
PASSED!

!testRun: #SalesInterfaceTest #test11AddToCartQuantityMustBeAnInteger stamp: 'DW 6/12/2022 15:34:30'!
PASSED!

!testRun: #SalesInterfaceTest #test12ListPurchasesOfIvalidUserFails stamp: 'DW 6/12/2022 15:34:30'!
PASSED!

!testRun: #SalesInterfaceTest #test13ListPurchasesOfFreshClientIsEmpty stamp: 'DW 6/12/2022 15:34:30'!
PASSED!

!testRun: #SalesInterfaceTest #test14ListPurchasesAffectedByCheckout stamp: 'DW 6/12/2022 15:34:30'!
PASSED!

!testRun: #SalesInterfaceTest #test15ListPurchasesIsemptyBeforeCheckout stamp: 'DW 6/12/2022 15:34:30'!
PASSED!

!testRun: #SalesInterfaceTest #test16ListPurchasesAfterTwoCheckoutsShowsContentsOfBothCarts stamp: 'DW 6/12/2022 15:34:30'!
PASSED!

!testRun: #SalesInterfaceTest #test17ListPurchasesFailesForInvalidCredentials stamp: 'DW 6/12/2022 15:34:30'!
PASSED!

!testRun: #SalesInterfaceTest #test18CantCheckoutCartWithInvalidId stamp: 'DW 6/12/2022 15:34:30'!
PASSED!

!testRun: #SalesInterfaceTest #test19CantCheckoutTwice stamp: 'DW 6/12/2022 15:34:30'!
PASSED!

!testRun: #SalesInterfaceTest #test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails stamp: 'DW 6/12/2022 15:34:30'!
PASSED!
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:36:06' prior: 50484351!
test18CantCheckoutCartWithInvalidId
	| salesInterface |
	
	salesInterface := self defaultSalesInterface .

	self should: [self checkoutWithDefaultCardOn: salesInterface withCartId: nil]
		raise: Error - MessageNotUnderstood
		withMessageText: SalesInterface invalidCartIdErrorDescription.
! !

!testRun: #SalesInterfaceTest #test18CantCheckoutCartWithInvalidId stamp: 'DW 6/12/2022 15:36:09'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'DW 6/12/2022 15:36:09'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'DW 6/12/2022 15:36:09'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'DW 6/12/2022 15:36:09'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'DW 6/12/2022 15:36:09'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'DW 6/12/2022 15:36:09'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'DW 6/12/2022 15:36:10'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'DW 6/12/2022 15:36:10'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'DW 6/12/2022 15:36:10'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'DW 6/12/2022 15:36:10'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'DW 6/12/2022 15:36:10'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'DW 6/12/2022 15:36:10'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'DW 6/12/2022 15:36:10'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'DW 6/12/2022 15:36:10'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'DW 6/12/2022 15:36:10'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'DW 6/12/2022 15:36:10'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'DW 6/12/2022 15:36:10'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'DW 6/12/2022 15:36:10'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'DW 6/12/2022 15:36:10'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'DW 6/12/2022 15:36:10'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'DW 6/12/2022 15:36:10'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'DW 6/12/2022 15:36:10'!
PASSED!

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'DW 6/12/2022 15:36:10'!
PASSED!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'DW 6/12/2022 15:36:10'!
PASSED!

!testRun: #SalesInterfaceTest #test10AddToCartQuantityMustBeAPositiveNumber stamp: 'DW 6/12/2022 15:36:10'!
PASSED!

!testRun: #SalesInterfaceTest #test11AddToCartQuantityMustBeAnInteger stamp: 'DW 6/12/2022 15:36:10'!
PASSED!

!testRun: #SalesInterfaceTest #test12ListPurchasesOfIvalidUserFails stamp: 'DW 6/12/2022 15:36:10'!
PASSED!

!testRun: #SalesInterfaceTest #test13ListPurchasesOfFreshClientIsEmpty stamp: 'DW 6/12/2022 15:36:10'!
PASSED!

!testRun: #SalesInterfaceTest #test14ListPurchasesAffectedByCheckout stamp: 'DW 6/12/2022 15:36:10'!
PASSED!

!testRun: #SalesInterfaceTest #test15ListPurchasesIsemptyBeforeCheckout stamp: 'DW 6/12/2022 15:36:10'!
PASSED!

!testRun: #SalesInterfaceTest #test16ListPurchasesAfterTwoCheckoutsShowsContentsOfBothCarts stamp: 'DW 6/12/2022 15:36:10'!
PASSED!

!testRun: #SalesInterfaceTest #test17ListPurchasesFailesForInvalidCredentials stamp: 'DW 6/12/2022 15:36:10'!
PASSED!

!testRun: #SalesInterfaceTest #test18CantCheckoutCartWithInvalidId stamp: 'DW 6/12/2022 15:36:10'!
PASSED!

!testRun: #SalesInterfaceTest #test19CantCheckoutTwice stamp: 'DW 6/12/2022 15:36:10'!
PASSED!

!testRun: #SalesInterfaceTest #test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails stamp: 'DW 6/12/2022 15:36:10'!
PASSED!
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:36:27' prior: 50485852!
test18CantCheckoutCartWithInvalidId
	| salesInterface closure |
	
	salesInterface := self defaultSalesInterface .

	closure _ [self checkoutWithDefaultCardOn: salesInterface withCartId: nil].
	self should: closure
		raise: Error - MessageNotUnderstood
		withMessageText: SalesInterface invalidCartIdErrorDescription.
! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:36:36'!
shouldRaiseInvalidCard: closure

	^ self should: closure
		raise: Error - MessageNotUnderstood
		withMessageText: SalesInterface invalidCartIdErrorDescription! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:36:37' prior: 50485983!
test18CantCheckoutCartWithInvalidId
	| salesInterface closure |
	
	salesInterface := self defaultSalesInterface .

	closure _ [self checkoutWithDefaultCardOn: salesInterface withCartId: nil].
	self shouldRaiseInvalidCard: closure.
! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:36:48' prior: 50486004!
test18CantCheckoutCartWithInvalidId
	| salesInterface |
	
	salesInterface := self defaultSalesInterface .

	self shouldRaiseInvalidCard: [self checkoutWithDefaultCardOn: salesInterface withCartId: nil].
! !

!testRun: #SalesInterfaceTest #test18CantCheckoutCartWithInvalidId stamp: 'DW 6/12/2022 15:36:51'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'DW 6/12/2022 15:36:51'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'DW 6/12/2022 15:36:51'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'DW 6/12/2022 15:36:51'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'DW 6/12/2022 15:36:51'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'DW 6/12/2022 15:36:51'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'DW 6/12/2022 15:36:51'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'DW 6/12/2022 15:36:51'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'DW 6/12/2022 15:36:51'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'DW 6/12/2022 15:36:51'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'DW 6/12/2022 15:36:51'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'DW 6/12/2022 15:36:51'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'DW 6/12/2022 15:36:51'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'DW 6/12/2022 15:36:51'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'DW 6/12/2022 15:36:51'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'DW 6/12/2022 15:36:51'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'DW 6/12/2022 15:36:51'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'DW 6/12/2022 15:36:51'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'DW 6/12/2022 15:36:51'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'DW 6/12/2022 15:36:51'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'DW 6/12/2022 15:36:51'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'DW 6/12/2022 15:36:51'!
PASSED!

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'DW 6/12/2022 15:36:51'!
PASSED!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'DW 6/12/2022 15:36:51'!
PASSED!

!testRun: #SalesInterfaceTest #test10AddToCartQuantityMustBeAPositiveNumber stamp: 'DW 6/12/2022 15:36:51'!
PASSED!

!testRun: #SalesInterfaceTest #test11AddToCartQuantityMustBeAnInteger stamp: 'DW 6/12/2022 15:36:51'!
PASSED!

!testRun: #SalesInterfaceTest #test12ListPurchasesOfIvalidUserFails stamp: 'DW 6/12/2022 15:36:51'!
PASSED!

!testRun: #SalesInterfaceTest #test13ListPurchasesOfFreshClientIsEmpty stamp: 'DW 6/12/2022 15:36:51'!
PASSED!

!testRun: #SalesInterfaceTest #test14ListPurchasesAffectedByCheckout stamp: 'DW 6/12/2022 15:36:51'!
PASSED!

!testRun: #SalesInterfaceTest #test15ListPurchasesIsemptyBeforeCheckout stamp: 'DW 6/12/2022 15:36:51'!
PASSED!

!testRun: #SalesInterfaceTest #test16ListPurchasesAfterTwoCheckoutsShowsContentsOfBothCarts stamp: 'DW 6/12/2022 15:36:51'!
PASSED!

!testRun: #SalesInterfaceTest #test17ListPurchasesFailesForInvalidCredentials stamp: 'DW 6/12/2022 15:36:51'!
PASSED!

!testRun: #SalesInterfaceTest #test18CantCheckoutCartWithInvalidId stamp: 'DW 6/12/2022 15:36:51'!
PASSED!

!testRun: #SalesInterfaceTest #test19CantCheckoutTwice stamp: 'DW 6/12/2022 15:36:51'!
PASSED!

!testRun: #SalesInterfaceTest #test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails stamp: 'DW 6/12/2022 15:36:51'!
PASSED!
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:37:03' prior: 50485714!
test19CantCheckoutTwice
	| salesInterface id |
	
	salesInterface := self defaultSalesInterface .
		
	id := self createCartOfDefaultUser: salesInterface.

	salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 1.
	
	self checkoutWithDefaultCardOn: salesInterface withCartId: id.
	
	self shouldRaiseInvalidCard: [	
		self checkoutWithDefaultCardOn: salesInterface withCartId: id.
	] ! !

!testRun: #SalesInterfaceTest #test19CantCheckoutTwice stamp: 'DW 6/12/2022 15:37:04'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'DW 6/12/2022 15:37:04'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'DW 6/12/2022 15:37:04'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'DW 6/12/2022 15:37:04'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'DW 6/12/2022 15:37:04'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'DW 6/12/2022 15:37:04'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'DW 6/12/2022 15:37:04'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'DW 6/12/2022 15:37:04'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'DW 6/12/2022 15:37:04'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'DW 6/12/2022 15:37:04'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'DW 6/12/2022 15:37:04'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'DW 6/12/2022 15:37:04'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'DW 6/12/2022 15:37:04'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'DW 6/12/2022 15:37:04'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'DW 6/12/2022 15:37:04'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'DW 6/12/2022 15:37:04'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'DW 6/12/2022 15:37:04'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'DW 6/12/2022 15:37:05'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'DW 6/12/2022 15:37:05'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'DW 6/12/2022 15:37:05'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'DW 6/12/2022 15:37:05'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'DW 6/12/2022 15:37:05'!
PASSED!

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'DW 6/12/2022 15:37:05'!
PASSED!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'DW 6/12/2022 15:37:05'!
PASSED!

!testRun: #SalesInterfaceTest #test10AddToCartQuantityMustBeAPositiveNumber stamp: 'DW 6/12/2022 15:37:05'!
PASSED!

!testRun: #SalesInterfaceTest #test11AddToCartQuantityMustBeAnInteger stamp: 'DW 6/12/2022 15:37:05'!
PASSED!

!testRun: #SalesInterfaceTest #test12ListPurchasesOfIvalidUserFails stamp: 'DW 6/12/2022 15:37:05'!
PASSED!

!testRun: #SalesInterfaceTest #test13ListPurchasesOfFreshClientIsEmpty stamp: 'DW 6/12/2022 15:37:05'!
PASSED!

!testRun: #SalesInterfaceTest #test14ListPurchasesAffectedByCheckout stamp: 'DW 6/12/2022 15:37:05'!
PASSED!

!testRun: #SalesInterfaceTest #test15ListPurchasesIsemptyBeforeCheckout stamp: 'DW 6/12/2022 15:37:05'!
PASSED!

!testRun: #SalesInterfaceTest #test16ListPurchasesAfterTwoCheckoutsShowsContentsOfBothCarts stamp: 'DW 6/12/2022 15:37:05'!
PASSED!

!testRun: #SalesInterfaceTest #test17ListPurchasesFailesForInvalidCredentials stamp: 'DW 6/12/2022 15:37:05'!
PASSED!

!testRun: #SalesInterfaceTest #test18CantCheckoutCartWithInvalidId stamp: 'DW 6/12/2022 15:37:05'!
PASSED!

!testRun: #SalesInterfaceTest #test19CantCheckoutTwice stamp: 'DW 6/12/2022 15:37:05'!
PASSED!

!testRun: #SalesInterfaceTest #test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails stamp: 'DW 6/12/2022 15:37:05'!
PASSED!
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:37:37'!
shouldRaiseInvalidCartId: closure

	^ self should: closure
		raise: Error - MessageNotUnderstood
		withMessageText: SalesInterface invalidCartIdErrorDescription! !
!SalesInterfaceTest methodsFor: 'as yet unclassified' stamp: 'DW 6/12/2022 15:37:37' prior: 50486144!
test19CantCheckoutTwice
	| salesInterface id |
	
	salesInterface := self defaultSalesInterface .
		
	id := self createCartOfDefaultUser: salesInterface.

	salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 1.
	
	self checkoutWithDefaultCardOn: salesInterface withCartId: id.
	
	self shouldRaiseInvalidCartId: [	
		self checkoutWithDefaultCardOn: salesInterface withCartId: id.
	] ! !
!SalesInterfaceTest methodsFor: 'as yet unclassified' stamp: 'DW 6/12/2022 15:37:37' prior: 50486015!
test18CantCheckoutCartWithInvalidId
	| salesInterface |
	
	salesInterface := self defaultSalesInterface .

	self shouldRaiseInvalidCartId: [self checkoutWithDefaultCardOn: salesInterface withCartId: nil].
! !

!methodRemoval: SalesInterfaceTest #shouldRaiseInvalidCard: stamp: 'DW 6/12/2022 15:37:37'!
shouldRaiseInvalidCard: closure

	^ self should: closure
		raise: Error - MessageNotUnderstood
		withMessageText: SalesInterface invalidCartIdErrorDescription!
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:38:12' prior: 50484295!
test08CannotAddToCartWithInvalidCartId
	| salesInterface |
	
	salesInterface := self defaultSalesInterface .
		
	self shouldRaiseInvalidCartId: [salesInterface addToCartWithCartId: nil bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 1].! !

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'DW 6/12/2022 15:38:13'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'DW 6/12/2022 15:38:13'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'DW 6/12/2022 15:38:13'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'DW 6/12/2022 15:38:13'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'DW 6/12/2022 15:38:13'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'DW 6/12/2022 15:38:13'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'DW 6/12/2022 15:38:13'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'DW 6/12/2022 15:38:13'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'DW 6/12/2022 15:38:13'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'DW 6/12/2022 15:38:13'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'DW 6/12/2022 15:38:13'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'DW 6/12/2022 15:38:13'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'DW 6/12/2022 15:38:13'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'DW 6/12/2022 15:38:13'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'DW 6/12/2022 15:38:13'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'DW 6/12/2022 15:38:13'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'DW 6/12/2022 15:38:13'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'DW 6/12/2022 15:38:13'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'DW 6/12/2022 15:38:13'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'DW 6/12/2022 15:38:13'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'DW 6/12/2022 15:38:13'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'DW 6/12/2022 15:38:13'!
PASSED!

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'DW 6/12/2022 15:38:13'!
PASSED!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'DW 6/12/2022 15:38:13'!
PASSED!

!testRun: #SalesInterfaceTest #test10AddToCartQuantityMustBeAPositiveNumber stamp: 'DW 6/12/2022 15:38:13'!
PASSED!

!testRun: #SalesInterfaceTest #test11AddToCartQuantityMustBeAnInteger stamp: 'DW 6/12/2022 15:38:14'!
PASSED!

!testRun: #SalesInterfaceTest #test12ListPurchasesOfIvalidUserFails stamp: 'DW 6/12/2022 15:38:14'!
PASSED!

!testRun: #SalesInterfaceTest #test13ListPurchasesOfFreshClientIsEmpty stamp: 'DW 6/12/2022 15:38:14'!
PASSED!

!testRun: #SalesInterfaceTest #test14ListPurchasesAffectedByCheckout stamp: 'DW 6/12/2022 15:38:14'!
PASSED!

!testRun: #SalesInterfaceTest #test15ListPurchasesIsemptyBeforeCheckout stamp: 'DW 6/12/2022 15:38:14'!
PASSED!

!testRun: #SalesInterfaceTest #test16ListPurchasesAfterTwoCheckoutsShowsContentsOfBothCarts stamp: 'DW 6/12/2022 15:38:14'!
PASSED!

!testRun: #SalesInterfaceTest #test17ListPurchasesFailesForInvalidCredentials stamp: 'DW 6/12/2022 15:38:14'!
PASSED!

!testRun: #SalesInterfaceTest #test18CantCheckoutCartWithInvalidId stamp: 'DW 6/12/2022 15:38:14'!
PASSED!

!testRun: #SalesInterfaceTest #test19CantCheckoutTwice stamp: 'DW 6/12/2022 15:38:14'!
PASSED!

!testRun: #SalesInterfaceTest #test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails stamp: 'DW 6/12/2022 15:38:14'!
PASSED!
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:38:26' prior: 50484327!
test07CannotListCartWithInvalidCartId
	| salesInterface |
	
	salesInterface := self defaultSalesInterface .
		
	self shouldRaiseInvalidCartId: [salesInterface listCartWithCartId: nil]
	! !

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'DW 6/12/2022 15:38:27'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'DW 6/12/2022 15:38:27'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'DW 6/12/2022 15:38:27'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'DW 6/12/2022 15:38:27'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'DW 6/12/2022 15:38:27'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'DW 6/12/2022 15:38:27'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'DW 6/12/2022 15:38:27'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'DW 6/12/2022 15:38:27'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'DW 6/12/2022 15:38:27'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'DW 6/12/2022 15:38:27'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'DW 6/12/2022 15:38:27'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'DW 6/12/2022 15:38:27'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'DW 6/12/2022 15:38:27'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'DW 6/12/2022 15:38:27'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'DW 6/12/2022 15:38:27'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'DW 6/12/2022 15:38:27'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'DW 6/12/2022 15:38:27'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'DW 6/12/2022 15:38:27'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'DW 6/12/2022 15:38:27'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'DW 6/12/2022 15:38:27'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'DW 6/12/2022 15:38:27'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'DW 6/12/2022 15:38:27'!
PASSED!

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'DW 6/12/2022 15:38:27'!
PASSED!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'DW 6/12/2022 15:38:27'!
PASSED!

!testRun: #SalesInterfaceTest #test10AddToCartQuantityMustBeAPositiveNumber stamp: 'DW 6/12/2022 15:38:28'!
PASSED!

!testRun: #SalesInterfaceTest #test11AddToCartQuantityMustBeAnInteger stamp: 'DW 6/12/2022 15:38:28'!
PASSED!

!testRun: #SalesInterfaceTest #test12ListPurchasesOfIvalidUserFails stamp: 'DW 6/12/2022 15:38:28'!
PASSED!

!testRun: #SalesInterfaceTest #test13ListPurchasesOfFreshClientIsEmpty stamp: 'DW 6/12/2022 15:38:28'!
PASSED!

!testRun: #SalesInterfaceTest #test14ListPurchasesAffectedByCheckout stamp: 'DW 6/12/2022 15:38:28'!
PASSED!

!testRun: #SalesInterfaceTest #test15ListPurchasesIsemptyBeforeCheckout stamp: 'DW 6/12/2022 15:38:28'!
PASSED!

!testRun: #SalesInterfaceTest #test16ListPurchasesAfterTwoCheckoutsShowsContentsOfBothCarts stamp: 'DW 6/12/2022 15:38:28'!
PASSED!

!testRun: #SalesInterfaceTest #test17ListPurchasesFailesForInvalidCredentials stamp: 'DW 6/12/2022 15:38:28'!
PASSED!

!testRun: #SalesInterfaceTest #test18CantCheckoutCartWithInvalidId stamp: 'DW 6/12/2022 15:38:28'!
PASSED!

!testRun: #SalesInterfaceTest #test19CantCheckoutTwice stamp: 'DW 6/12/2022 15:38:28'!
PASSED!

!testRun: #SalesInterfaceTest #test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails stamp: 'DW 6/12/2022 15:38:28'!
PASSED!
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:40:34'!
addDefaultItemTo: salesInterface withCartId: id

	^ salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 	1! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:40:35' prior: 50485066!
test05ListCartReflectsAddToCart
	| salesInterface id |
	salesInterface := self defaultSalesInterface .
		
	
	id := self createCartOfDefaultUser: salesInterface.
	self addDefaultItemTo: salesInterface withCartId: id.
	self assert: (Bag with: testObjectsFactory itemSellByTheStore) equals: (salesInterface listCartWithCartId: id).
	! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:41:58' prior: 50485010!
test06AddToCartDoesntAffectOtherCarts
	| salesInterface id1 id2 |
	salesInterface := self defaultSalesInterface .
		
	
	id1 := self createCartOfDefaultUser: salesInterface.
	id2 := self createCartOfDefaultUser: salesInterface.
	
	self addDefaultItemTo: salesInterface withCartId: id1.
	
	self assert: (Bag new) equals: (salesInterface listCartWithCartId: id2).
	! !

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'DW 6/12/2022 15:41:59'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'DW 6/12/2022 15:41:59'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'DW 6/12/2022 15:41:59'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'DW 6/12/2022 15:41:59'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'DW 6/12/2022 15:41:59'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'DW 6/12/2022 15:41:59'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'DW 6/12/2022 15:41:59'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'DW 6/12/2022 15:41:59'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'DW 6/12/2022 15:41:59'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'DW 6/12/2022 15:41:59'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'DW 6/12/2022 15:41:59'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'DW 6/12/2022 15:41:59'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'DW 6/12/2022 15:41:59'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'DW 6/12/2022 15:41:59'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'DW 6/12/2022 15:41:59'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'DW 6/12/2022 15:41:59'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'DW 6/12/2022 15:41:59'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'DW 6/12/2022 15:41:59'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'DW 6/12/2022 15:41:59'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'DW 6/12/2022 15:41:59'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'DW 6/12/2022 15:41:59'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'DW 6/12/2022 15:41:59'!
PASSED!

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'DW 6/12/2022 15:41:59'!
PASSED!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'DW 6/12/2022 15:41:59'!
PASSED!

!testRun: #SalesInterfaceTest #test10AddToCartQuantityMustBeAPositiveNumber stamp: 'DW 6/12/2022 15:41:59'!
PASSED!

!testRun: #SalesInterfaceTest #test11AddToCartQuantityMustBeAnInteger stamp: 'DW 6/12/2022 15:41:59'!
PASSED!

!testRun: #SalesInterfaceTest #test12ListPurchasesOfIvalidUserFails stamp: 'DW 6/12/2022 15:41:59'!
PASSED!

!testRun: #SalesInterfaceTest #test13ListPurchasesOfFreshClientIsEmpty stamp: 'DW 6/12/2022 15:41:59'!
PASSED!

!testRun: #SalesInterfaceTest #test14ListPurchasesAffectedByCheckout stamp: 'DW 6/12/2022 15:41:59'!
PASSED!

!testRun: #SalesInterfaceTest #test15ListPurchasesIsemptyBeforeCheckout stamp: 'DW 6/12/2022 15:41:59'!
PASSED!

!testRun: #SalesInterfaceTest #test16ListPurchasesAfterTwoCheckoutsShowsContentsOfBothCarts stamp: 'DW 6/12/2022 15:41:59'!
PASSED!

!testRun: #SalesInterfaceTest #test17ListPurchasesFailesForInvalidCredentials stamp: 'DW 6/12/2022 15:41:59'!
PASSED!

!testRun: #SalesInterfaceTest #test18CantCheckoutCartWithInvalidId stamp: 'DW 6/12/2022 15:41:59'!
PASSED!

!testRun: #SalesInterfaceTest #test19CantCheckoutTwice stamp: 'DW 6/12/2022 15:41:59'!
PASSED!

!testRun: #SalesInterfaceTest #test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails stamp: 'DW 6/12/2022 15:41:59'!
PASSED!
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:43:03' prior: 50484203!
test13ListPurchasesOfFreshClientIsEmpty
	| salesInterface temp |
	
	salesInterface := self defaultSalesInterface .
		
	temp _ Bag new.
	self assert: temp equals: (salesInterface listPurchasesWithClientId: self validUser password: self passwordOfValidUser).! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:43:41'!
assertListPurchasesOfDefaultUserOn: temp isEqualTo: salesInterface

	^ self assert: temp equals: (salesInterface listPurchasesWithClientId: self validUser password: self passwordOfValidUser)! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:43:41' prior: 50486737!
test13ListPurchasesOfFreshClientIsEmpty
	| salesInterface temp |
	
	salesInterface := self defaultSalesInterface .
		
	temp _ Bag new.
	self assertListPurchasesOfDefaultUserOn: temp isEqualTo: salesInterface.! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:43:56' prior: 50486757!
test13ListPurchasesOfFreshClientIsEmpty
	| salesInterface |
	
	salesInterface := self defaultSalesInterface .
		
	self assertListPurchasesOfDefaultUserOn: Bag new isEqualTo: salesInterface.! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:44:25'!
assert: temp isEqualToListPurchasesOfDefaultUserOn: salesInterface

	^ self assert: temp equals: (salesInterface listPurchasesWithClientId: self validUser password: self passwordOfValidUser)! !
!SalesInterfaceTest methodsFor: 'as yet unclassified' stamp: 'DW 6/12/2022 15:44:26' prior: 50486767!
test13ListPurchasesOfFreshClientIsEmpty
	| salesInterface |
	
	salesInterface := self defaultSalesInterface .
		
	self assert: Bag new isEqualToListPurchasesOfDefaultUserOn: salesInterface.! !

!methodRemoval: SalesInterfaceTest #assertListPurchasesOfDefaultUserOn:isEqualTo: stamp: 'DW 6/12/2022 15:44:26'!
assertListPurchasesOfDefaultUserOn: temp isEqualTo: salesInterface

	^ self assert: temp equals: (salesInterface listPurchasesWithClientId: self validUser password: self passwordOfValidUser)!
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:45:23' prior: 50485695!
test14ListPurchasesAffectedByCheckout
	| salesInterface id |
	
	salesInterface := self defaultSalesInterface .
		
	id := self createCartOfDefaultUser: salesInterface.

	salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 1.
	
	self checkoutWithDefaultCardOn: salesInterface withCartId: id.
	
	self assert: (Bag with: testObjectsFactory itemSellByTheStore)  isEqualToListPurchasesOfDefaultUserOn: salesInterface.! !

!testRun: #SalesInterfaceTest #test14ListPurchasesAffectedByCheckout stamp: 'DW 6/12/2022 15:45:27'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'DW 6/12/2022 15:45:27'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'DW 6/12/2022 15:45:27'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'DW 6/12/2022 15:45:27'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'DW 6/12/2022 15:45:27'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'DW 6/12/2022 15:45:27'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'DW 6/12/2022 15:45:27'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'DW 6/12/2022 15:45:27'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'DW 6/12/2022 15:45:27'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'DW 6/12/2022 15:45:27'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'DW 6/12/2022 15:45:27'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'DW 6/12/2022 15:45:27'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'DW 6/12/2022 15:45:27'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'DW 6/12/2022 15:45:27'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'DW 6/12/2022 15:45:27'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'DW 6/12/2022 15:45:27'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'DW 6/12/2022 15:45:27'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'DW 6/12/2022 15:45:27'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'DW 6/12/2022 15:45:27'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'DW 6/12/2022 15:45:27'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'DW 6/12/2022 15:45:27'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'DW 6/12/2022 15:45:27'!
PASSED!

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'DW 6/12/2022 15:45:27'!
PASSED!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'DW 6/12/2022 15:45:27'!
PASSED!

!testRun: #SalesInterfaceTest #test10AddToCartQuantityMustBeAPositiveNumber stamp: 'DW 6/12/2022 15:45:27'!
PASSED!

!testRun: #SalesInterfaceTest #test11AddToCartQuantityMustBeAnInteger stamp: 'DW 6/12/2022 15:45:27'!
PASSED!

!testRun: #SalesInterfaceTest #test12ListPurchasesOfIvalidUserFails stamp: 'DW 6/12/2022 15:45:27'!
PASSED!

!testRun: #SalesInterfaceTest #test13ListPurchasesOfFreshClientIsEmpty stamp: 'DW 6/12/2022 15:45:27'!
PASSED!

!testRun: #SalesInterfaceTest #test14ListPurchasesAffectedByCheckout stamp: 'DW 6/12/2022 15:45:27'!
PASSED!

!testRun: #SalesInterfaceTest #test15ListPurchasesIsemptyBeforeCheckout stamp: 'DW 6/12/2022 15:45:27'!
PASSED!

!testRun: #SalesInterfaceTest #test16ListPurchasesAfterTwoCheckoutsShowsContentsOfBothCarts stamp: 'DW 6/12/2022 15:45:27'!
PASSED!

!testRun: #SalesInterfaceTest #test17ListPurchasesFailesForInvalidCredentials stamp: 'DW 6/12/2022 15:45:27'!
PASSED!

!testRun: #SalesInterfaceTest #test18CantCheckoutCartWithInvalidId stamp: 'DW 6/12/2022 15:45:27'!
PASSED!

!testRun: #SalesInterfaceTest #test19CantCheckoutTwice stamp: 'DW 6/12/2022 15:45:27'!
PASSED!

!testRun: #SalesInterfaceTest #test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails stamp: 'DW 6/12/2022 15:45:28'!
PASSED!
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:45:54' prior: 50485027!
test15ListPurchasesIsemptyBeforeCheckout
	| salesInterface id |
	
	salesInterface := self defaultSalesInterface .
		
	id := self createCartOfDefaultUser: salesInterface.

	salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 1.
		
	self assert: Bag new isEqualToListPurchasesOfDefaultUserOn: salesInterface.! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:46:59' prior: 50485626!
test16ListPurchasesAfterTwoCheckoutsShowsContentsOfBothCarts
	| salesInterface id |
	
	salesInterface := self defaultSalesInterface .
	
	id := self createCartOfDefaultUser: salesInterface.

	salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 1.
	
	self checkoutWithDefaultCardOn: salesInterface withCartId: id.
	
	id := self createCartOfDefaultUser: salesInterface.

	salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 1.
	
	self checkoutWithDefaultCardOn: salesInterface withCartId: id.
		
	self assert:  (Bag with: testObjectsFactory itemSellByTheStore with: testObjectsFactory itemSellByTheStore) isEqualToListPurchasesOfDefaultUserOn: salesInterface.! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:47:21' prior: 50486956!
test16ListPurchasesAfterTwoCheckoutsShowsContentsOfBothCarts
	| salesInterface id |
	
	salesInterface := self defaultSalesInterface .
	
	id := self createCartOfDefaultUser: salesInterface.

	self addDefaultItemTo: salesInterface withCartId: id.
	
	self checkoutWithDefaultCardOn: salesInterface withCartId: id.
	
	id := self createCartOfDefaultUser: salesInterface.

	salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 1.
	
	self checkoutWithDefaultCardOn: salesInterface withCartId: id.
		
	self assert:  (Bag with: testObjectsFactory itemSellByTheStore with: testObjectsFactory itemSellByTheStore) isEqualToListPurchasesOfDefaultUserOn: salesInterface.! !

!testRun: #SalesInterfaceTest #test16ListPurchasesAfterTwoCheckoutsShowsContentsOfBothCarts stamp: 'DW 6/12/2022 15:47:22'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'DW 6/12/2022 15:47:22'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'DW 6/12/2022 15:47:22'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'DW 6/12/2022 15:47:22'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'DW 6/12/2022 15:47:22'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'DW 6/12/2022 15:47:22'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'DW 6/12/2022 15:47:22'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'DW 6/12/2022 15:47:22'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'DW 6/12/2022 15:47:22'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'DW 6/12/2022 15:47:22'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'DW 6/12/2022 15:47:22'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'DW 6/12/2022 15:47:22'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'DW 6/12/2022 15:47:22'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'DW 6/12/2022 15:47:22'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'DW 6/12/2022 15:47:22'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'DW 6/12/2022 15:47:22'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'DW 6/12/2022 15:47:22'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'DW 6/12/2022 15:47:22'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'DW 6/12/2022 15:47:22'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'DW 6/12/2022 15:47:22'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'DW 6/12/2022 15:47:22'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'DW 6/12/2022 15:47:22'!
PASSED!

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'DW 6/12/2022 15:47:22'!
PASSED!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'DW 6/12/2022 15:47:22'!
PASSED!

!testRun: #SalesInterfaceTest #test10AddToCartQuantityMustBeAPositiveNumber stamp: 'DW 6/12/2022 15:47:22'!
PASSED!

!testRun: #SalesInterfaceTest #test11AddToCartQuantityMustBeAnInteger stamp: 'DW 6/12/2022 15:47:22'!
PASSED!

!testRun: #SalesInterfaceTest #test12ListPurchasesOfIvalidUserFails stamp: 'DW 6/12/2022 15:47:22'!
PASSED!

!testRun: #SalesInterfaceTest #test13ListPurchasesOfFreshClientIsEmpty stamp: 'DW 6/12/2022 15:47:22'!
PASSED!

!testRun: #SalesInterfaceTest #test14ListPurchasesAffectedByCheckout stamp: 'DW 6/12/2022 15:47:22'!
PASSED!

!testRun: #SalesInterfaceTest #test15ListPurchasesIsemptyBeforeCheckout stamp: 'DW 6/12/2022 15:47:22'!
PASSED!

!testRun: #SalesInterfaceTest #test16ListPurchasesAfterTwoCheckoutsShowsContentsOfBothCarts stamp: 'DW 6/12/2022 15:47:22'!
PASSED!

!testRun: #SalesInterfaceTest #test17ListPurchasesFailesForInvalidCredentials stamp: 'DW 6/12/2022 15:47:22'!
PASSED!

!testRun: #SalesInterfaceTest #test18CantCheckoutCartWithInvalidId stamp: 'DW 6/12/2022 15:47:22'!
PASSED!

!testRun: #SalesInterfaceTest #test19CantCheckoutTwice stamp: 'DW 6/12/2022 15:47:22'!
PASSED!

!testRun: #SalesInterfaceTest #test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails stamp: 'DW 6/12/2022 15:47:22'!
PASSED!
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:47:34' prior: 50486983!
test16ListPurchasesAfterTwoCheckoutsShowsContentsOfBothCarts
	| salesInterface id |
	
	salesInterface := self defaultSalesInterface .
	
	id := self createCartOfDefaultUser: salesInterface.

	self addDefaultItemTo: salesInterface withCartId: id.
	
	self checkoutWithDefaultCardOn: salesInterface withCartId: id.
	
	id := self createCartOfDefaultUser: salesInterface.

	self addDefaultItemTo: salesInterface withCartId: id.
		
	self checkoutWithDefaultCardOn: salesInterface withCartId: id.
		
	self assert:  (Bag with: testObjectsFactory itemSellByTheStore with: testObjectsFactory itemSellByTheStore) isEqualToListPurchasesOfDefaultUserOn: salesInterface.! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:48:03' prior: 50487128!
test16ListPurchasesAfterTwoCheckoutsShowsContentsOfBothCarts
	| salesInterface id id2 |
	
	salesInterface := self defaultSalesInterface .
	
	id := self createCartOfDefaultUser: salesInterface.

	self addDefaultItemTo: salesInterface withCartId: id.
	
	self checkoutWithDefaultCardOn: salesInterface withCartId: id.
	
	id2 := self createCartOfDefaultUser: salesInterface.

	self addDefaultItemTo: salesInterface withCartId: id2.
		
	self checkoutWithDefaultCardOn: salesInterface withCartId: id2.
		
	self assert:  (Bag with: testObjectsFactory itemSellByTheStore with: testObjectsFactory itemSellByTheStore) isEqualToListPurchasesOfDefaultUserOn: salesInterface.! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:48:21' prior: 50487152!
test16ListPurchasesAfterTwoCheckoutsShowsContentsOfBothCarts
	| salesInterface id id2 |
	
	salesInterface := self defaultSalesInterface .
	
	id := self createCartOfDefaultUser: salesInterface.
	self addDefaultItemTo: salesInterface withCartId: id.
	self checkoutWithDefaultCardOn: salesInterface withCartId: id.
	
	id2 := self createCartOfDefaultUser: salesInterface.
	self addDefaultItemTo: salesInterface withCartId: id2.	
	self checkoutWithDefaultCardOn: salesInterface withCartId: id2.
		
	self assert: (Bag with: testObjectsFactory itemSellByTheStore with: testObjectsFactory itemSellByTheStore) isEqualToListPurchasesOfDefaultUserOn: salesInterface.! !

!testRun: #SalesInterfaceTest #test16ListPurchasesAfterTwoCheckoutsShowsContentsOfBothCarts stamp: 'DW 6/12/2022 15:48:23'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'DW 6/12/2022 15:48:24'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'DW 6/12/2022 15:48:24'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'DW 6/12/2022 15:48:24'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'DW 6/12/2022 15:48:24'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'DW 6/12/2022 15:48:24'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'DW 6/12/2022 15:48:24'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'DW 6/12/2022 15:48:24'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'DW 6/12/2022 15:48:24'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'DW 6/12/2022 15:48:24'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'DW 6/12/2022 15:48:24'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'DW 6/12/2022 15:48:24'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'DW 6/12/2022 15:48:24'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'DW 6/12/2022 15:48:24'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'DW 6/12/2022 15:48:24'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'DW 6/12/2022 15:48:24'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'DW 6/12/2022 15:48:24'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'DW 6/12/2022 15:48:24'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'DW 6/12/2022 15:48:24'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'DW 6/12/2022 15:48:24'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'DW 6/12/2022 15:48:24'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'DW 6/12/2022 15:48:24'!
PASSED!

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'DW 6/12/2022 15:48:24'!
PASSED!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'DW 6/12/2022 15:48:24'!
PASSED!

!testRun: #SalesInterfaceTest #test10AddToCartQuantityMustBeAPositiveNumber stamp: 'DW 6/12/2022 15:48:24'!
PASSED!

!testRun: #SalesInterfaceTest #test11AddToCartQuantityMustBeAnInteger stamp: 'DW 6/12/2022 15:48:24'!
PASSED!

!testRun: #SalesInterfaceTest #test12ListPurchasesOfIvalidUserFails stamp: 'DW 6/12/2022 15:48:24'!
PASSED!

!testRun: #SalesInterfaceTest #test13ListPurchasesOfFreshClientIsEmpty stamp: 'DW 6/12/2022 15:48:24'!
PASSED!

!testRun: #SalesInterfaceTest #test14ListPurchasesAffectedByCheckout stamp: 'DW 6/12/2022 15:48:24'!
PASSED!

!testRun: #SalesInterfaceTest #test15ListPurchasesIsemptyBeforeCheckout stamp: 'DW 6/12/2022 15:48:24'!
PASSED!

!testRun: #SalesInterfaceTest #test16ListPurchasesAfterTwoCheckoutsShowsContentsOfBothCarts stamp: 'DW 6/12/2022 15:48:24'!
PASSED!

!testRun: #SalesInterfaceTest #test17ListPurchasesFailesForInvalidCredentials stamp: 'DW 6/12/2022 15:48:24'!
PASSED!

!testRun: #SalesInterfaceTest #test18CantCheckoutCartWithInvalidId stamp: 'DW 6/12/2022 15:48:24'!
PASSED!

!testRun: #SalesInterfaceTest #test19CantCheckoutTwice stamp: 'DW 6/12/2022 15:48:24'!
PASSED!

!testRun: #SalesInterfaceTest #test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails stamp: 'DW 6/12/2022 15:48:24'!
PASSED!
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:49:29' prior: 50484966!
test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails
	| salesInterface id |
	
	salesInterface := self defaultSalesInterfaceWithMerchantProcessor: self merchantProcessorThatFails.
	
	id := self createCartOfDefaultUser: salesInterface.

	salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 1.
		
	self should: [	
	salesInterface checkOutCartWithCartId: id ccn: '0123456789012345' cced: testObjectsFactory monthOfExpiredCreditCard cco: 'Carlos Miguel Soto'.
	] raise: Error - MessageNotUnderstood
	withMessageText: SalesInterface debitErrorDescription.
	
	self assert: Bag new  isEqualToListPurchasesOfDefaultUserOn: salesInterface.! !

!testRun: #SalesInterfaceTest #test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails stamp: 'DW 6/12/2022 15:49:31'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'DW 6/12/2022 15:49:31'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'DW 6/12/2022 15:49:31'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'DW 6/12/2022 15:49:31'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'DW 6/12/2022 15:49:31'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'DW 6/12/2022 15:49:31'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'DW 6/12/2022 15:49:31'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'DW 6/12/2022 15:49:31'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'DW 6/12/2022 15:49:31'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'DW 6/12/2022 15:49:31'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'DW 6/12/2022 15:49:31'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'DW 6/12/2022 15:49:31'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'DW 6/12/2022 15:49:31'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'DW 6/12/2022 15:49:31'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'DW 6/12/2022 15:49:31'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'DW 6/12/2022 15:49:31'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'DW 6/12/2022 15:49:31'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'DW 6/12/2022 15:49:31'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'DW 6/12/2022 15:49:31'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'DW 6/12/2022 15:49:31'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'DW 6/12/2022 15:49:31'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'DW 6/12/2022 15:49:31'!
PASSED!

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'DW 6/12/2022 15:49:31'!
PASSED!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'DW 6/12/2022 15:49:31'!
PASSED!

!testRun: #SalesInterfaceTest #test10AddToCartQuantityMustBeAPositiveNumber stamp: 'DW 6/12/2022 15:49:31'!
PASSED!

!testRun: #SalesInterfaceTest #test11AddToCartQuantityMustBeAnInteger stamp: 'DW 6/12/2022 15:49:31'!
PASSED!

!testRun: #SalesInterfaceTest #test12ListPurchasesOfIvalidUserFails stamp: 'DW 6/12/2022 15:49:31'!
PASSED!

!testRun: #SalesInterfaceTest #test13ListPurchasesOfFreshClientIsEmpty stamp: 'DW 6/12/2022 15:49:31'!
PASSED!

!testRun: #SalesInterfaceTest #test14ListPurchasesAffectedByCheckout stamp: 'DW 6/12/2022 15:49:31'!
PASSED!

!testRun: #SalesInterfaceTest #test15ListPurchasesIsemptyBeforeCheckout stamp: 'DW 6/12/2022 15:49:31'!
PASSED!

!testRun: #SalesInterfaceTest #test16ListPurchasesAfterTwoCheckoutsShowsContentsOfBothCarts stamp: 'DW 6/12/2022 15:49:31'!
PASSED!

!testRun: #SalesInterfaceTest #test17ListPurchasesFailesForInvalidCredentials stamp: 'DW 6/12/2022 15:49:31'!
PASSED!

!testRun: #SalesInterfaceTest #test18CantCheckoutCartWithInvalidId stamp: 'DW 6/12/2022 15:49:31'!
PASSED!

!testRun: #SalesInterfaceTest #test19CantCheckoutTwice stamp: 'DW 6/12/2022 15:49:31'!
PASSED!

!testRun: #SalesInterfaceTest #test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails stamp: 'DW 6/12/2022 15:49:31'!
PASSED!
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:49:38' prior: 50487320!
test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails
	| salesInterface id |
	
	salesInterface := self defaultSalesInterfaceWithMerchantProcessor: self merchantProcessorThatFails.
	
	id := self createCartOfDefaultUser: salesInterface.

	salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 1.
		
	self should: [	
	salesInterface checkOutCartWithCartId: id ccn: '0123456789012345' cced: testObjectsFactory monthOfExpiredCreditCard cco: 'Carlos Miguel Soto'.
	] raise: Error - MessageNotUnderstood
	withMessageText: SalesInterface debitErrorDescription.
	
	self assert: Bag new isEqualToListPurchasesOfDefaultUserOn: salesInterface.! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:50:20' prior: 50487464!
test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails
	| salesInterface id |
	
	salesInterface := self defaultSalesInterfaceWithMerchantProcessor: self merchantProcessorThatFails.
	
	id := self createCartOfDefaultUser: salesInterface.

	salesInterface addToCartWithCartId: id bookIsbn: testObjectsFactory itemSellByTheStore bookQuantity: 1.
		
	self should: [	
	salesInterface checkOutCartWithCartId: id ccn: '0123456789012345' cced: testObjectsFactory monthOfExpiredCreditCard cco: 'Carlos Miguel Soto'.
	] raise: Error - MessageNotUnderstood
	withMessageText: SalesInterface debitErrorDescription.
	
	self assert: (Bag new) isEqualToListPurchasesOfDefaultUserOn: salesInterface.! !
!SalesInterfaceTest methodsFor: 'tests' stamp: 'DW 6/12/2022 15:51:52' prior: 50486603!
test06AddToCartDoesntAffectOtherCarts
	| salesInterface id1 id2 |
	
	salesInterface := self defaultSalesInterface .
		
	id1 := self createCartOfDefaultUser: salesInterface.
	
	id2 := self createCartOfDefaultUser: salesInterface.
	
	self addDefaultItemTo: salesInterface withCartId: id1.
	
	self assert: (Bag new) equals: (salesInterface listCartWithCartId: id2).
	! !

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'DW 6/12/2022 15:52:00'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'DW 6/12/2022 15:52:00'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'DW 6/12/2022 15:52:00'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'DW 6/12/2022 15:52:00'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'DW 6/12/2022 15:52:00'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'DW 6/12/2022 15:52:00'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'DW 6/12/2022 15:52:00'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'DW 6/12/2022 15:52:00'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'DW 6/12/2022 15:52:00'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'DW 6/12/2022 15:52:00'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'DW 6/12/2022 15:52:00'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'DW 6/12/2022 15:52:00'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'DW 6/12/2022 15:52:00'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'DW 6/12/2022 15:52:01'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'DW 6/12/2022 15:52:01'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'DW 6/12/2022 15:52:01'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'DW 6/12/2022 15:52:01'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'DW 6/12/2022 15:52:01'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'DW 6/12/2022 15:52:01'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'DW 6/12/2022 15:52:01'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'DW 6/12/2022 15:52:01'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'DW 6/12/2022 15:52:01'!
PASSED!

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'DW 6/12/2022 15:52:01'!
PASSED!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'DW 6/12/2022 15:52:01'!
PASSED!

!testRun: #SalesInterfaceTest #test10AddToCartQuantityMustBeAPositiveNumber stamp: 'DW 6/12/2022 15:52:01'!
PASSED!

!testRun: #SalesInterfaceTest #test11AddToCartQuantityMustBeAnInteger stamp: 'DW 6/12/2022 15:52:01'!
PASSED!

!testRun: #SalesInterfaceTest #test12ListPurchasesOfIvalidUserFails stamp: 'DW 6/12/2022 15:52:01'!
PASSED!

!testRun: #SalesInterfaceTest #test13ListPurchasesOfFreshClientIsEmpty stamp: 'DW 6/12/2022 15:52:01'!
PASSED!

!testRun: #SalesInterfaceTest #test14ListPurchasesAffectedByCheckout stamp: 'DW 6/12/2022 15:52:01'!
PASSED!

!testRun: #SalesInterfaceTest #test15ListPurchasesIsemptyBeforeCheckout stamp: 'DW 6/12/2022 15:52:01'!
PASSED!

!testRun: #SalesInterfaceTest #test16ListPurchasesAfterTwoCheckoutsShowsContentsOfBothCarts stamp: 'DW 6/12/2022 15:52:01'!
PASSED!

!testRun: #SalesInterfaceTest #test17ListPurchasesFailesForInvalidCredentials stamp: 'DW 6/12/2022 15:52:01'!
PASSED!

!testRun: #SalesInterfaceTest #test18CantCheckoutCartWithInvalidId stamp: 'DW 6/12/2022 15:52:01'!
PASSED!

!testRun: #SalesInterfaceTest #test19CantCheckoutTwice stamp: 'DW 6/12/2022 15:52:01'!
PASSED!

!testRun: #SalesInterfaceTest #test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails stamp: 'DW 6/12/2022 15:52:01'!
PASSED!

!methodRemoval: SalesInterface class #withAuthenticator:withCatalog: stamp: 'DW 6/12/2022 15:52:28'!
withAuthenticator: aCredentialAuthenticator withCatalog: aCatalog 
	^self new initializeWithAuthenticator: aCredentialAuthenticator withCatalog: aCatalog !

!methodRemoval: SalesInterface #initializeWithAuthenticator:withCatalog: stamp: 'DW 6/12/2022 15:52:36'!
initializeWithAuthenticator: aCredentialAuthenticator withCatalog: aCatalog 
	credentialAuthenticator := aCredentialAuthenticator.
	catalog := aCatalog.
	lastId := 0.
	carts := Dictionary new.
	clientCart := Dictionary new.
	cartClient := Dictionary new.
	purchases := Dictionary new.!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'DW 6/12/2022 15:52:39'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'DW 6/12/2022 15:52:39'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'DW 6/12/2022 15:52:39'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'DW 6/12/2022 15:52:39'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'DW 6/12/2022 15:52:40'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'DW 6/12/2022 15:52:40'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'DW 6/12/2022 15:52:40'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'DW 6/12/2022 15:52:40'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'DW 6/12/2022 15:52:40'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'DW 6/12/2022 15:52:40'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'DW 6/12/2022 15:52:40'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'DW 6/12/2022 15:52:40'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'DW 6/12/2022 15:52:40'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'DW 6/12/2022 15:52:40'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'DW 6/12/2022 15:52:40'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'DW 6/12/2022 15:52:40'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'DW 6/12/2022 15:52:40'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'DW 6/12/2022 15:52:40'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'DW 6/12/2022 15:52:40'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'DW 6/12/2022 15:52:40'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'DW 6/12/2022 15:52:40'!
PASSED!

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'DW 6/12/2022 15:52:40'!
PASSED!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'DW 6/12/2022 15:52:40'!
PASSED!

!testRun: #SalesInterfaceTest #test10AddToCartQuantityMustBeAPositiveNumber stamp: 'DW 6/12/2022 15:52:40'!
PASSED!

!testRun: #SalesInterfaceTest #test11AddToCartQuantityMustBeAnInteger stamp: 'DW 6/12/2022 15:52:40'!
PASSED!

!testRun: #SalesInterfaceTest #test12ListPurchasesOfIvalidUserFails stamp: 'DW 6/12/2022 15:52:40'!
PASSED!

!testRun: #SalesInterfaceTest #test13ListPurchasesOfFreshClientIsEmpty stamp: 'DW 6/12/2022 15:52:40'!
PASSED!

!testRun: #SalesInterfaceTest #test14ListPurchasesAffectedByCheckout stamp: 'DW 6/12/2022 15:52:40'!
PASSED!

!testRun: #SalesInterfaceTest #test15ListPurchasesIsemptyBeforeCheckout stamp: 'DW 6/12/2022 15:52:40'!
PASSED!

!testRun: #SalesInterfaceTest #test16ListPurchasesAfterTwoCheckoutsShowsContentsOfBothCarts stamp: 'DW 6/12/2022 15:52:40'!
PASSED!

!testRun: #SalesInterfaceTest #test17ListPurchasesFailesForInvalidCredentials stamp: 'DW 6/12/2022 15:52:40'!
PASSED!

!testRun: #SalesInterfaceTest #test18CantCheckoutCartWithInvalidId stamp: 'DW 6/12/2022 15:52:40'!
PASSED!

!testRun: #SalesInterfaceTest #test19CantCheckoutTwice stamp: 'DW 6/12/2022 15:52:40'!
PASSED!

!testRun: #SalesInterfaceTest #test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails stamp: 'DW 6/12/2022 15:52:40'!
PASSED!
!SalesInterface methodsFor: 'initialize' stamp: 'DW 6/12/2022 15:53:04' prior: 50480959!
initializeWithAuthenticator: aCredentialAutheticator withCatalog: aCatalog withMerchantProcessor: aMerchantProcessor 
	
	credentialAuthenticator := aCredentialAutheticator.
	merchantProcessor := aMerchantProcessor.
	catalog := aCatalog.
	
	lastId := 0.
	carts := Dictionary new.
	cartClient := Dictionary new.
	purchases := Dictionary new.! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'DW 6/12/2022 15:53:08'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'DW 6/12/2022 15:53:08'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'DW 6/12/2022 15:53:08'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'DW 6/12/2022 15:53:08'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'DW 6/12/2022 15:53:08'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'DW 6/12/2022 15:53:08'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'DW 6/12/2022 15:53:08'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'DW 6/12/2022 15:53:08'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'DW 6/12/2022 15:53:08'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'DW 6/12/2022 15:53:08'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'DW 6/12/2022 15:53:08'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'DW 6/12/2022 15:53:08'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'DW 6/12/2022 15:53:08'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'DW 6/12/2022 15:53:08'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'DW 6/12/2022 15:53:08'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'DW 6/12/2022 15:53:08'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'DW 6/12/2022 15:53:08'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'DW 6/12/2022 15:53:09'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'DW 6/12/2022 15:53:09'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'DW 6/12/2022 15:53:09'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'DW 6/12/2022 15:53:09'!
PASSED!

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'DW 6/12/2022 15:53:09'!
PASSED!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'DW 6/12/2022 15:53:09'!
PASSED!

!testRun: #SalesInterfaceTest #test10AddToCartQuantityMustBeAPositiveNumber stamp: 'DW 6/12/2022 15:53:09'!
PASSED!

!testRun: #SalesInterfaceTest #test11AddToCartQuantityMustBeAnInteger stamp: 'DW 6/12/2022 15:53:09'!
PASSED!

!testRun: #SalesInterfaceTest #test12ListPurchasesOfIvalidUserFails stamp: 'DW 6/12/2022 15:53:09'!
PASSED!

!testRun: #SalesInterfaceTest #test13ListPurchasesOfFreshClientIsEmpty stamp: 'DW 6/12/2022 15:53:09'!
PASSED!

!testRun: #SalesInterfaceTest #test14ListPurchasesAffectedByCheckout stamp: 'DW 6/12/2022 15:53:09'!
PASSED!

!testRun: #SalesInterfaceTest #test15ListPurchasesIsemptyBeforeCheckout stamp: 'DW 6/12/2022 15:53:09'!
PASSED!

!testRun: #SalesInterfaceTest #test16ListPurchasesAfterTwoCheckoutsShowsContentsOfBothCarts stamp: 'DW 6/12/2022 15:53:09'!
PASSED!

!testRun: #SalesInterfaceTest #test17ListPurchasesFailesForInvalidCredentials stamp: 'DW 6/12/2022 15:53:09'!
PASSED!

!testRun: #SalesInterfaceTest #test18CantCheckoutCartWithInvalidId stamp: 'DW 6/12/2022 15:53:09'!
PASSED!

!testRun: #SalesInterfaceTest #test19CantCheckoutTwice stamp: 'DW 6/12/2022 15:53:09'!
PASSED!

!testRun: #SalesInterfaceTest #test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails stamp: 'DW 6/12/2022 15:53:09'!
PASSED!

Object subclass: #SalesInterface
	instanceVariableNames: 'lastId credentialAuthenticator carts catalog cartClient purchases saleBooks merchantProcessor'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #SalesInterface category: 'TusLibros' stamp: 'DW 6/12/2022 15:53:31'!
Object subclass: #SalesInterface
	instanceVariableNames: 'lastId credentialAuthenticator carts catalog cartClient purchases saleBooks merchantProcessor'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!methodRemoval: SalesInterface #getSaleBookByClientId: stamp: 'DW 6/12/2022 15:54:27'!
getSaleBookByClientId: clientId
	saleBooks at: clientId ifAbsent: [ saleBooks at: clientId put: OrderedCollection new.].
	^saleBooks at: clientId.!

Object subclass: #SalesInterface
	instanceVariableNames: 'lastId credentialAuthenticator carts catalog cartClient purchases merchantProcessor'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #SalesInterface category: 'TusLibros' stamp: 'DW 6/12/2022 15:54:33'!
Object subclass: #SalesInterface
	instanceVariableNames: 'lastId credentialAuthenticator carts catalog cartClient purchases merchantProcessor'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #SalesInterface category: 'TusLibros' stamp: 'DW 6/12/2022 15:55:46'!
Object subclass: #SalesInterface
	instanceVariableNames: 'lastId credentialAuthenticator carts catalog clientByCar purchases merchantProcessor'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!SalesInterface methodsFor: 'as yet unclassified' stamp: 'DW 6/12/2022 15:55:46' prior: 50478527!
createCartWithClientId: clientId password: password 
	self authenticateClientWithId: password andPassword: clientId.
	lastId := lastId + 1.
	carts at: lastId put: (Cart acceptingItemsOf: catalog).
	clientByCar at: lastId put: clientId.
	^ lastId! !
!SalesInterface methodsFor: 'as yet unclassified' stamp: 'DW 6/12/2022 15:55:46' prior: 50487784!
initializeWithAuthenticator: aCredentialAutheticator withCatalog: aCatalog withMerchantProcessor: aMerchantProcessor 
	
	credentialAuthenticator := aCredentialAutheticator.
	merchantProcessor := aMerchantProcessor.
	catalog := aCatalog.
	
	lastId := 0.
	carts := Dictionary new.
	clientByCar := Dictionary new.
	purchases := Dictionary new.! !
!SalesInterface methodsFor: 'as yet unclassified' stamp: 'DW 6/12/2022 15:55:46' prior: 50481777!
checkOutCartWithCartId: cartId ccn: creditCardNumber cced: expirationDate cco: ownerName
	| creditCard |
	self assertCartWithIdExists: cartId.
	creditCard := CreditCard expiringOn: expirationDate.
	merchantProcessor ifNotNil: [
	[Cashier toCheckout: (carts at: cartId)  charging: creditCard throught: merchantProcessor on: (DateAndTime now) registeringOn: OrderedCollection new]
	on: Error
	do:  [self error: self class debitErrorDescription] 
	].
	purchases at: (clientByCar at: cartId) ifAbsent: [purchases at: (clientByCar at: cartId) put: Bag new].
	(purchases at: (clientByCar at: cartId)) addAll: (self getCartWithId: cartId) books.
	carts removeKey: cartId.! !

!classDefinition: #SalesInterface category: 'TusLibros' stamp: 'DW 6/12/2022 15:55:52'!
Object subclass: #SalesInterface
	instanceVariableNames: 'lastId credentialAuthenticator carts catalog clientODCar purchases merchantProcessor'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!SalesInterface methodsFor: 'as yet unclassified' stamp: 'DW 6/12/2022 15:55:52' prior: 50487964!
createCartWithClientId: clientId password: password 
	self authenticateClientWithId: password andPassword: clientId.
	lastId := lastId + 1.
	carts at: lastId put: (Cart acceptingItemsOf: catalog).
	clientODCar at: lastId put: clientId.
	^ lastId! !
!SalesInterface methodsFor: 'as yet unclassified' stamp: 'DW 6/12/2022 15:55:52' prior: 50487975!
initializeWithAuthenticator: aCredentialAutheticator withCatalog: aCatalog withMerchantProcessor: aMerchantProcessor 
	
	credentialAuthenticator := aCredentialAutheticator.
	merchantProcessor := aMerchantProcessor.
	catalog := aCatalog.
	
	lastId := 0.
	carts := Dictionary new.
	clientODCar := Dictionary new.
	purchases := Dictionary new.! !
!SalesInterface methodsFor: 'as yet unclassified' stamp: 'DW 6/12/2022 15:55:52' prior: 50487989!
checkOutCartWithCartId: cartId ccn: creditCardNumber cced: expirationDate cco: ownerName
	| creditCard |
	self assertCartWithIdExists: cartId.
	creditCard := CreditCard expiringOn: expirationDate.
	merchantProcessor ifNotNil: [
	[Cashier toCheckout: (carts at: cartId)  charging: creditCard throught: merchantProcessor on: (DateAndTime now) registeringOn: OrderedCollection new]
	on: Error
	do:  [self error: self class debitErrorDescription] 
	].
	purchases at: (clientODCar at: cartId) ifAbsent: [purchases at: (clientODCar at: cartId) put: Bag new].
	(purchases at: (clientODCar at: cartId)) addAll: (self getCartWithId: cartId) books.
	carts removeKey: cartId.! !

!classDefinition: #SalesInterface category: 'TusLibros' stamp: 'DW 6/12/2022 15:55:56'!
Object subclass: #SalesInterface
	instanceVariableNames: 'lastId credentialAuthenticator carts catalog clientOfCar purchases merchantProcessor'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!SalesInterface methodsFor: 'as yet unclassified' stamp: 'DW 6/12/2022 15:55:56' prior: 50488023!
createCartWithClientId: clientId password: password 
	self authenticateClientWithId: password andPassword: clientId.
	lastId := lastId + 1.
	carts at: lastId put: (Cart acceptingItemsOf: catalog).
	clientOfCar at: lastId put: clientId.
	^ lastId! !
!SalesInterface methodsFor: 'as yet unclassified' stamp: 'DW 6/12/2022 15:55:56' prior: 50488034!
initializeWithAuthenticator: aCredentialAutheticator withCatalog: aCatalog withMerchantProcessor: aMerchantProcessor 
	
	credentialAuthenticator := aCredentialAutheticator.
	merchantProcessor := aMerchantProcessor.
	catalog := aCatalog.
	
	lastId := 0.
	carts := Dictionary new.
	clientOfCar := Dictionary new.
	purchases := Dictionary new.! !
!SalesInterface methodsFor: 'as yet unclassified' stamp: 'DW 6/12/2022 15:55:56' prior: 50488048!
checkOutCartWithCartId: cartId ccn: creditCardNumber cced: expirationDate cco: ownerName
	| creditCard |
	self assertCartWithIdExists: cartId.
	creditCard := CreditCard expiringOn: expirationDate.
	merchantProcessor ifNotNil: [
	[Cashier toCheckout: (carts at: cartId)  charging: creditCard throught: merchantProcessor on: (DateAndTime now) registeringOn: OrderedCollection new]
	on: Error
	do:  [self error: self class debitErrorDescription] 
	].
	purchases at: (clientOfCar at: cartId) ifAbsent: [purchases at: (clientOfCar at: cartId) put: Bag new].
	(purchases at: (clientOfCar at: cartId)) addAll: (self getCartWithId: cartId) books.
	carts removeKey: cartId.! !
!SalesInterface methodsFor: 'interface' stamp: 'DW 6/12/2022 15:58:19' prior: 50488107!
checkOutCartWithCartId: cartId ccn: creditCardNumber cced: expirationDate cco: ownerName
	| creditCard |
	self assertCartWithIdExists: cartId.
	creditCard := CreditCard expiringOn: expirationDate.
	
	[Cashier toCheckout: (carts at: cartId)  charging: creditCard throught: merchantProcessor on: (DateAndTime now) registeringOn: OrderedCollection new]
	on: Error
	do:  [self error: self class debitErrorDescription].
	
	purchases at: (clientOfCar at: cartId) ifAbsent: [purchases at: (clientOfCar at: cartId) put: Bag new].
	(purchases at: (clientOfCar at: cartId)) addAll: (self getCartWithId: cartId) books.
	carts removeKey: cartId.! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'DW 6/12/2022 15:58:20'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'DW 6/12/2022 15:58:20'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'DW 6/12/2022 15:58:20'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'DW 6/12/2022 15:58:20'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'DW 6/12/2022 15:58:20'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'DW 6/12/2022 15:58:20'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'DW 6/12/2022 15:58:20'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'DW 6/12/2022 15:58:20'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'DW 6/12/2022 15:58:20'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'DW 6/12/2022 15:58:20'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'DW 6/12/2022 15:58:20'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'DW 6/12/2022 15:58:20'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'DW 6/12/2022 15:58:20'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'DW 6/12/2022 15:58:20'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'DW 6/12/2022 15:58:20'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'DW 6/12/2022 15:58:20'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'DW 6/12/2022 15:58:20'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'DW 6/12/2022 15:58:20'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'DW 6/12/2022 15:58:20'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'DW 6/12/2022 15:58:20'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'DW 6/12/2022 15:58:20'!
PASSED!

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'DW 6/12/2022 15:58:20'!
PASSED!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'DW 6/12/2022 15:58:21'!
PASSED!

!testRun: #SalesInterfaceTest #test10AddToCartQuantityMustBeAPositiveNumber stamp: 'DW 6/12/2022 15:58:21'!
PASSED!

!testRun: #SalesInterfaceTest #test11AddToCartQuantityMustBeAnInteger stamp: 'DW 6/12/2022 15:58:21'!
PASSED!

!testRun: #SalesInterfaceTest #test12ListPurchasesOfIvalidUserFails stamp: 'DW 6/12/2022 15:58:21'!
PASSED!

!testRun: #SalesInterfaceTest #test13ListPurchasesOfFreshClientIsEmpty stamp: 'DW 6/12/2022 15:58:21'!
PASSED!

!testRun: #SalesInterfaceTest #test14ListPurchasesAffectedByCheckout stamp: 'DW 6/12/2022 15:58:21'!
PASSED!

!testRun: #SalesInterfaceTest #test15ListPurchasesIsemptyBeforeCheckout stamp: 'DW 6/12/2022 15:58:21'!
PASSED!

!testRun: #SalesInterfaceTest #test16ListPurchasesAfterTwoCheckoutsShowsContentsOfBothCarts stamp: 'DW 6/12/2022 15:58:21'!
PASSED!

!testRun: #SalesInterfaceTest #test17ListPurchasesFailesForInvalidCredentials stamp: 'DW 6/12/2022 15:58:21'!
PASSED!

!testRun: #SalesInterfaceTest #test18CantCheckoutCartWithInvalidId stamp: 'DW 6/12/2022 15:58:21'!
PASSED!

!testRun: #SalesInterfaceTest #test19CantCheckoutTwice stamp: 'DW 6/12/2022 15:58:21'!
PASSED!

!testRun: #SalesInterfaceTest #test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails stamp: 'DW 6/12/2022 15:58:21'!
PASSED!
!SalesInterface methodsFor: 'interface' stamp: 'DW 6/12/2022 15:58:29' prior: 50488131!
checkOutCartWithCartId: cartId ccn: creditCardNumber cced: expirationDate cco: ownerName
	| creditCard |
	self assertCartWithIdExists: cartId.
	
	creditCard := CreditCard expiringOn: expirationDate.
	
	[Cashier toCheckout: (carts at: cartId)  charging: creditCard throught: merchantProcessor on: (DateAndTime now) registeringOn: OrderedCollection new]
	on: Error
	do:  [self error: self class debitErrorDescription].
	
	purchases at: (clientOfCar at: cartId) ifAbsent: [purchases at: (clientOfCar at: cartId) put: Bag new].
	(purchases at: (clientOfCar at: cartId)) addAll: (self getCartWithId: cartId) books.
	carts removeKey: cartId.! !
!SalesInterface methodsFor: 'interface' stamp: 'DW 6/12/2022 15:58:50' prior: 50488270!
checkOutCartWithCartId: cartId ccn: creditCardNumber cced: expirationDate cco: ownerName
	| creditCard |
	self assertCartWithIdExists: cartId.
	
	creditCard := CreditCard expiringOn: expirationDate.
	
	[Cashier toCheckout: (carts at: cartId) charging: creditCard throught: merchantProcessor on: (DateAndTime now) registeringOn: OrderedCollection new]
	on: Error
	do:  [self error: self class debitErrorDescription].
	
	purchases at: (clientOfCar at: cartId) ifAbsent: [purchases at: (clientOfCar at: cartId) put: Bag new].
	(purchases at: (clientOfCar at: cartId)) addAll: (self getCartWithId: cartId) books.
	carts removeKey: cartId.! !
!Cashier class methodsFor: 'instance creation' stamp: 'DW 6/12/2022 15:59:01'!
toCheckout: aCart charging: aCreditCard through: aMerchantProcessor on: aDate registeringOn: aSalesBook
	
	self assertIsNotEmpty: aCart.
	self assertIsNotExpired: aCreditCard on: aDate.
	
	^self new initializeToCheckout: aCart charging: aCreditCard throught: aMerchantProcessor registeringOn: aSalesBook! !
!CashierTest methodsFor: 'as yet unclassified' stamp: 'DW 6/12/2022 15:59:01' prior: 50474242!
test03CanNotCheckoutWithAnExpiredCreditCart

	| cart salesBook |

	cart := testObjectsFactory createCart.
	cart add: testObjectsFactory itemSellByTheStore.
	salesBook := OrderedCollection new.
	
	self
		should: [ Cashier 
				toCheckout: cart 
				charging: testObjectsFactory expiredCreditCard 
				through: self
				on: testObjectsFactory today
				registeringOn: salesBook ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError | 
			self assert: anError messageText = Cashier canNotChargeAnExpiredCreditCardErrorMessage.
			self assert: salesBook isEmpty ]! !
!CashierTest methodsFor: 'as yet unclassified' stamp: 'DW 6/12/2022 15:59:01' prior: 50474208!
test01CanNotCheckoutAnEmptyCart

	| salesBook |
	
	salesBook := OrderedCollection new.
	self 
		should: [ Cashier 
			toCheckout: testObjectsFactory createCart 
			charging: testObjectsFactory notExpiredCreditCard 
			through: self
			on: testObjectsFactory today
			registeringOn:  salesBook ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = Cashier cartCanNotBeEmptyErrorMessage.
			self assert: salesBook isEmpty ]! !
!CashierTest methodsFor: 'as yet unclassified' stamp: 'DW 6/12/2022 15:59:01' prior: 50474226!
test02CalculatedTotalIsCorrect

	| cart cashier |
	
	cart := testObjectsFactory createCart.
	cart add: 2 of: testObjectsFactory itemSellByTheStore.
	
	cashier :=  Cashier
		toCheckout: cart 
		charging: testObjectsFactory notExpiredCreditCard 
		through: self
		on: testObjectsFactory today 
		registeringOn: OrderedCollection new.
		
	self assert: cashier checkOut = (testObjectsFactory itemSellByTheStorePrice * 2)! !
!CashierTest methodsFor: 'as yet unclassified' stamp: 'DW 6/12/2022 15:59:01' prior: 50474307!
test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit

	| cart cashier salesBook creditCard |

	cart := testObjectsFactory createCart.
	cart add: testObjectsFactory itemSellByTheStore.
	creditCard := testObjectsFactory notExpiredCreditCard.
	salesBook := OrderedCollection new.
 	debitBehavior := [ :anAmount :aCreditCard | self error: Cashier creditCardHasNoCreditErrorMessage].
	
	cashier:= Cashier 
		toCheckout: cart 
		charging: creditCard
		through: self
		on: testObjectsFactory today
		registeringOn: salesBook.
		
	self 
		should: [cashier checkOut ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = Cashier creditCardHasNoCreditErrorMessage.
			self assert: salesBook isEmpty ]! !
!CashierTest methodsFor: 'as yet unclassified' stamp: 'DW 6/12/2022 15:59:01' prior: 50474282!
test05CashierChargesCreditCardUsingMerchantProcessor

	| cart cashier salesBook total creditCard debitedAmout debitedCreditCard  |

	cart := testObjectsFactory createCart.
	cart add: testObjectsFactory itemSellByTheStore.
	creditCard := testObjectsFactory notExpiredCreditCard.
	salesBook := OrderedCollection new.
 
	cashier:= Cashier 
		toCheckout: cart 
		charging: creditCard
		through: self
		on: testObjectsFactory today
		registeringOn: salesBook.
		
	debitBehavior := [ :anAmount :aCreditCard | 
		debitedAmout := anAmount.
		debitedCreditCard := aCreditCard ].
	total := cashier checkOut.
					
	self assert: debitedCreditCard = creditCard.
	self assert: debitedAmout = total.! !
!SalesInterface methodsFor: 'as yet unclassified' stamp: 'DW 6/12/2022 15:59:01' prior: 50488293!
checkOutCartWithCartId: cartId ccn: creditCardNumber cced: expirationDate cco: ownerName
	| creditCard |
	self assertCartWithIdExists: cartId.
	
	creditCard := CreditCard expiringOn: expirationDate.
	
	[Cashier toCheckout: (carts at: cartId) charging: creditCard through: merchantProcessor on: (DateAndTime now) registeringOn: OrderedCollection new]
	on: Error
	do:  [self error: self class debitErrorDescription].
	
	purchases at: (clientOfCar at: cartId) ifAbsent: [purchases at: (clientOfCar at: cartId) put: Bag new].
	(purchases at: (clientOfCar at: cartId)) addAll: (self getCartWithId: cartId) books.
	carts removeKey: cartId.! !
!CashierTest methodsFor: 'as yet unclassified' stamp: 'DW 6/12/2022 15:59:01' prior: 50474264!
test04CheckoutRegistersASale

	| cart cashier salesBook total |

	cart := testObjectsFactory createCart.
	cart add: testObjectsFactory itemSellByTheStore.
	salesBook := OrderedCollection new.
 
	cashier:= Cashier 
		toCheckout: cart 
		charging: testObjectsFactory notExpiredCreditCard
		through: self
		on: testObjectsFactory today
		registeringOn: salesBook.
		
	total := cashier checkOut.
					
	self assert: salesBook size = 1.
	self assert: salesBook first total = total.! !

!methodRemoval: Cashier class #toCheckout:charging:throught:on:registeringOn: stamp: 'DW 6/12/2022 15:59:01'!
toCheckout: aCart charging: aCreditCard throught: aMerchantProcessor on: aDate registeringOn: aSalesBook
	
	self assertIsNotEmpty: aCart.
	self assertIsNotExpired: aCreditCard on: aDate.
	
	^self new initializeToCheckout: aCart charging: aCreditCard throught: aMerchantProcessor registeringOn: aSalesBook!
!SalesInterface methodsFor: 'interface' stamp: 'DW 6/12/2022 15:59:32' prior: 50488441!
checkOutCartWithCartId: cartId ccn: creditCardNumber cced: expirationDate cco: ownerName
	| creditCard |
	self assertCartWithIdExists: cartId.
	
	creditCard := CreditCard expiringOn: expirationDate.
	
	[Cashier toCheckout: (carts at: cartId) 
			charging: creditCard 
			through: merchantProcessor 
			on: (DateAndTime now) 
			registeringOn: OrderedCollection new]
	on: Error
	do:  [self error: self class debitErrorDescription].
	
	purchases at: (clientOfCar at: cartId) ifAbsent: [purchases at: (clientOfCar at: cartId) put: Bag new].
	(purchases at: (clientOfCar at: cartId)) addAll: (self getCartWithId: cartId) books.
	carts removeKey: cartId.! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'DW 6/12/2022 15:59:34'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'DW 6/12/2022 15:59:34'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'DW 6/12/2022 15:59:34'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'DW 6/12/2022 15:59:34'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'DW 6/12/2022 15:59:34'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'DW 6/12/2022 15:59:34'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'DW 6/12/2022 15:59:34'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'DW 6/12/2022 15:59:34'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'DW 6/12/2022 15:59:34'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'DW 6/12/2022 15:59:34'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'DW 6/12/2022 15:59:34'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'DW 6/12/2022 15:59:34'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'DW 6/12/2022 15:59:34'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'DW 6/12/2022 15:59:34'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'DW 6/12/2022 15:59:34'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'DW 6/12/2022 15:59:34'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'DW 6/12/2022 15:59:34'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'DW 6/12/2022 15:59:34'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'DW 6/12/2022 15:59:34'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'DW 6/12/2022 15:59:34'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'DW 6/12/2022 15:59:34'!
PASSED!

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'DW 6/12/2022 15:59:34'!
PASSED!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'DW 6/12/2022 15:59:34'!
PASSED!

!testRun: #SalesInterfaceTest #test10AddToCartQuantityMustBeAPositiveNumber stamp: 'DW 6/12/2022 15:59:34'!
PASSED!

!testRun: #SalesInterfaceTest #test11AddToCartQuantityMustBeAnInteger stamp: 'DW 6/12/2022 15:59:34'!
PASSED!

!testRun: #SalesInterfaceTest #test12ListPurchasesOfIvalidUserFails stamp: 'DW 6/12/2022 15:59:34'!
PASSED!

!testRun: #SalesInterfaceTest #test13ListPurchasesOfFreshClientIsEmpty stamp: 'DW 6/12/2022 15:59:34'!
PASSED!

!testRun: #SalesInterfaceTest #test14ListPurchasesAffectedByCheckout stamp: 'DW 6/12/2022 15:59:34'!
PASSED!

!testRun: #SalesInterfaceTest #test15ListPurchasesIsemptyBeforeCheckout stamp: 'DW 6/12/2022 15:59:34'!
PASSED!

!testRun: #SalesInterfaceTest #test16ListPurchasesAfterTwoCheckoutsShowsContentsOfBothCarts stamp: 'DW 6/12/2022 15:59:34'!
PASSED!

!testRun: #SalesInterfaceTest #test17ListPurchasesFailesForInvalidCredentials stamp: 'DW 6/12/2022 15:59:34'!
PASSED!

!testRun: #SalesInterfaceTest #test18CantCheckoutCartWithInvalidId stamp: 'DW 6/12/2022 15:59:34'!
PASSED!

!testRun: #SalesInterfaceTest #test19CantCheckoutTwice stamp: 'DW 6/12/2022 15:59:34'!
PASSED!

!testRun: #SalesInterfaceTest #test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails stamp: 'DW 6/12/2022 15:59:34'!
PASSED!
!SalesInterface methodsFor: 'interface' stamp: 'DW 6/12/2022 16:01:46'!
removeCartID: cartId

	^ carts removeKey: cartId! !
!SalesInterface methodsFor: 'interface' stamp: 'DW 6/12/2022 16:01:46' prior: 50488496!
checkOutCartWithCartId: cartId ccn: creditCardNumber cced: expirationDate cco: ownerName
	| creditCard |
	self assertCartWithIdExists: cartId.
	
	creditCard := CreditCard expiringOn: expirationDate.
	
	[Cashier toCheckout: (carts at: cartId) 
			charging: creditCard 
			through: merchantProcessor 
			on: (DateAndTime now) 
			registeringOn: OrderedCollection new]
	on: Error
	do:  [self error: self class debitErrorDescription].
	
	purchases at: (clientOfCar at: cartId) ifAbsent: [purchases at: (clientOfCar at: cartId) put: Bag new].
	(purchases at: (clientOfCar at: cartId)) addAll: (self getCartWithId: cartId) books.
	self removeCartID: cartId.! !
!SalesInterface methodsFor: 'interface' stamp: 'DW 6/12/2022 16:01:58'!
removeCartId: cartId

	^ carts removeKey: cartId! !
!SalesInterface methodsFor: 'as yet unclassified' stamp: 'DW 6/12/2022 16:01:58' prior: 50488640!
checkOutCartWithCartId: cartId ccn: creditCardNumber cced: expirationDate cco: ownerName
	| creditCard |
	self assertCartWithIdExists: cartId.
	
	creditCard := CreditCard expiringOn: expirationDate.
	
	[Cashier toCheckout: (carts at: cartId) 
			charging: creditCard 
			through: merchantProcessor 
			on: (DateAndTime now) 
			registeringOn: OrderedCollection new]
	on: Error
	do:  [self error: self class debitErrorDescription].
	
	purchases at: (clientOfCar at: cartId) ifAbsent: [purchases at: (clientOfCar at: cartId) put: Bag new].
	(purchases at: (clientOfCar at: cartId)) addAll: (self getCartWithId: cartId) books.
	self removeCartId: cartId.! !

!methodRemoval: SalesInterface #removeCartID: stamp: 'DW 6/12/2022 16:01:58'!
removeCartID: cartId

	^ carts removeKey: cartId!
!SalesInterface methodsFor: 'interface' stamp: 'DW 6/12/2022 16:02:34' prior: 50488663!
removeCartId: cartId

	carts removeKey: cartId.
	clientOfCar removeKey: cartId.! !

!classDefinition: #SalesInterface category: 'TusLibros' stamp: 'DW 6/12/2022 16:02:37'!
Object subclass: #SalesInterface
	instanceVariableNames: 'lastId credentialAuthenticator carts catalog clientOfCart purchases merchantProcessor'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!SalesInterface methodsFor: 'as yet unclassified' stamp: 'DW 6/12/2022 16:02:37' prior: 50488696!
removeCartId: cartId

	carts removeKey: cartId.
	clientOfCart removeKey: cartId.! !
!SalesInterface methodsFor: 'as yet unclassified' stamp: 'DW 6/12/2022 16:02:37' prior: 50488082!
createCartWithClientId: clientId password: password 
	self authenticateClientWithId: password andPassword: clientId.
	lastId := lastId + 1.
	carts at: lastId put: (Cart acceptingItemsOf: catalog).
	clientOfCart at: lastId put: clientId.
	^ lastId! !
!SalesInterface methodsFor: 'as yet unclassified' stamp: 'DW 6/12/2022 16:02:37' prior: 50488668!
checkOutCartWithCartId: cartId ccn: creditCardNumber cced: expirationDate cco: ownerName
	| creditCard |
	self assertCartWithIdExists: cartId.
	
	creditCard := CreditCard expiringOn: expirationDate.
	
	[Cashier toCheckout: (carts at: cartId) 
			charging: creditCard 
			through: merchantProcessor 
			on: (DateAndTime now) 
			registeringOn: OrderedCollection new]
	on: Error
	do:  [self error: self class debitErrorDescription].
	
	purchases at: (clientOfCart at: cartId) ifAbsent: [purchases at: (clientOfCart at: cartId) put: Bag new].
	(purchases at: (clientOfCart at: cartId)) addAll: (self getCartWithId: cartId) books.
	self removeCartId: cartId.! !
!SalesInterface methodsFor: 'as yet unclassified' stamp: 'DW 6/12/2022 16:02:37' prior: 50488093!
initializeWithAuthenticator: aCredentialAutheticator withCatalog: aCatalog withMerchantProcessor: aMerchantProcessor 
	
	credentialAuthenticator := aCredentialAutheticator.
	merchantProcessor := aMerchantProcessor.
	catalog := aCatalog.
	
	lastId := 0.
	carts := Dictionary new.
	clientOfCart := Dictionary new.
	purchases := Dictionary new.! !
!SalesInterface methodsFor: 'interface' stamp: 'DW 6/12/2022 16:04:48' prior: 50488729!
checkOutCartWithCartId: cartId ccn: creditCardNumber cced: expirationDate cco: ownerName
	| creditCard |
	self assertCartWithIdExists: cartId.
	
	creditCard := CreditCard expiringOn: expirationDate.
	
	[Cashier toCheckout: (carts at: cartId) 
			charging: creditCard 
			through: merchantProcessor 
			on: (DateAndTime now) 
			registeringOn: OrderedCollection new]
	on: Error
	do:  [self error: self class debitErrorDescription].
	
	purchases at: (clientOfCart at: cartId) ifAbsent: [purchases at: (clientOfCart at: cartId) put: Bag new].
	(purchases at: (clientOfCart at: cartId)) addAll: (self getCartWithId: cartId) books.
	
	self removeCartId: cartId.! !
!SalesInterface methodsFor: 'interface' stamp: 'DW 6/12/2022 16:05:33'!
registerCheckoutOf: cartId

	purchases at: (clientOfCart at: cartId) ifAbsent: [purchases at: (clientOfCart at: cartId) put: Bag new].
	(purchases at: (clientOfCart at: cartId)) addAll: (self getCartWithId: cartId) books! !
!SalesInterface methodsFor: 'interface' stamp: 'DW 6/12/2022 16:05:33' prior: 50488767!
checkOutCartWithCartId: cartId ccn: creditCardNumber cced: expirationDate cco: ownerName
	| creditCard |
	self assertCartWithIdExists: cartId.
	
	creditCard := CreditCard expiringOn: expirationDate.
	
	[Cashier toCheckout: (carts at: cartId) 
			charging: creditCard 
			through: merchantProcessor 
			on: (DateAndTime now) 
			registeringOn: OrderedCollection new]
	on: Error
	do:  [self error: self class debitErrorDescription].
	
	self registerCheckoutOf: cartId.
	
	self removeCartId: cartId.! !
!SalesInterface methodsFor: 'interface' stamp: 'DW 6/12/2022 16:06:11' prior: 50488790!
registerCheckoutOf: cartId

	purchases at: (clientOfCart at: cartId) ifAbsent: [purchases at: (clientOfCart at: cartId) put: Bag new].
	
	(purchases at: (clientOfCart at: cartId)) addAll: (self getCartWithId: cartId) books! !
!SalesInterface methodsFor: 'interface' stamp: 'DW 6/12/2022 16:06:28' prior: 50488819!
registerCheckoutOf: cartId

	| client |
	client _ clientOfCart at: cartId.
	purchases at: (client) ifAbsent: [purchases at: (clientOfCart at: cartId) put: Bag new].
	
	(purchases at: (clientOfCart at: cartId)) addAll: (self getCartWithId: cartId) books! !
!SalesInterface methodsFor: 'interface' stamp: 'DW 6/12/2022 16:07:32' prior: 50488829!
registerCheckoutOf: cartId

	| client |
	client _ clientOfCart at: cartId.
	purchases at: client ifAbsent: [purchases at: client put: Bag new].
	
	(purchases at: client) addAll: (self getCartWithId: cartId) books! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'DW 6/12/2022 16:07:33'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'DW 6/12/2022 16:07:33'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'DW 6/12/2022 16:07:33'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'DW 6/12/2022 16:07:33'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'DW 6/12/2022 16:07:33'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'DW 6/12/2022 16:07:33'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'DW 6/12/2022 16:07:33'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'DW 6/12/2022 16:07:33'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'DW 6/12/2022 16:07:33'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'DW 6/12/2022 16:07:33'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'DW 6/12/2022 16:07:33'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'DW 6/12/2022 16:07:33'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'DW 6/12/2022 16:07:33'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'DW 6/12/2022 16:07:33'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'DW 6/12/2022 16:07:34'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'DW 6/12/2022 16:07:34'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'DW 6/12/2022 16:07:34'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'DW 6/12/2022 16:07:34'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'DW 6/12/2022 16:07:34'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'DW 6/12/2022 16:07:34'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'DW 6/12/2022 16:07:34'!
PASSED!

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'DW 6/12/2022 16:07:34'!
PASSED!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'DW 6/12/2022 16:07:34'!
PASSED!

!testRun: #SalesInterfaceTest #test10AddToCartQuantityMustBeAPositiveNumber stamp: 'DW 6/12/2022 16:07:34'!
PASSED!

!testRun: #SalesInterfaceTest #test11AddToCartQuantityMustBeAnInteger stamp: 'DW 6/12/2022 16:07:34'!
PASSED!

!testRun: #SalesInterfaceTest #test12ListPurchasesOfIvalidUserFails stamp: 'DW 6/12/2022 16:07:34'!
PASSED!

!testRun: #SalesInterfaceTest #test13ListPurchasesOfFreshClientIsEmpty stamp: 'DW 6/12/2022 16:07:34'!
PASSED!

!testRun: #SalesInterfaceTest #test14ListPurchasesAffectedByCheckout stamp: 'DW 6/12/2022 16:07:34'!
PASSED!

!testRun: #SalesInterfaceTest #test15ListPurchasesIsemptyBeforeCheckout stamp: 'DW 6/12/2022 16:07:34'!
PASSED!

!testRun: #SalesInterfaceTest #test16ListPurchasesAfterTwoCheckoutsShowsContentsOfBothCarts stamp: 'DW 6/12/2022 16:07:34'!
PASSED!

!testRun: #SalesInterfaceTest #test17ListPurchasesFailesForInvalidCredentials stamp: 'DW 6/12/2022 16:07:34'!
PASSED!

!testRun: #SalesInterfaceTest #test18CantCheckoutCartWithInvalidId stamp: 'DW 6/12/2022 16:07:34'!
PASSED!

!testRun: #SalesInterfaceTest #test19CantCheckoutTwice stamp: 'DW 6/12/2022 16:07:34'!
PASSED!

!testRun: #SalesInterfaceTest #test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails stamp: 'DW 6/12/2022 16:07:34'!
PASSED!
!SalesInterface methodsFor: 'interface' stamp: 'DW 6/12/2022 16:08:45'!
getClientPurchases: client

	^ purchases at: client ifAbsent: [purchases at: client put: Bag new]! !
!SalesInterface methodsFor: 'interface' stamp: 'DW 6/12/2022 16:08:45' prior: 50488840!
registerCheckoutOf: cartId

	| client |
	client _ clientOfCart at: cartId.
	self getClientPurchases: client.
	
	(purchases at: client) addAll: (self getCartWithId: cartId) books! !
!SalesInterface methodsFor: 'interface' stamp: 'DW 6/12/2022 16:09:01' prior: 50488971!
registerCheckoutOf: cartId

	| client |
	client _ clientOfCart at: cartId.
	(self getClientPurchases: client) addAll: (self getCartWithId: cartId) books.! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'DW 6/12/2022 16:09:03'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'DW 6/12/2022 16:09:03'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'DW 6/12/2022 16:09:03'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'DW 6/12/2022 16:09:03'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'DW 6/12/2022 16:09:03'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'DW 6/12/2022 16:09:03'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'DW 6/12/2022 16:09:03'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'DW 6/12/2022 16:09:03'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'DW 6/12/2022 16:09:03'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'DW 6/12/2022 16:09:03'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'DW 6/12/2022 16:09:03'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'DW 6/12/2022 16:09:03'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'DW 6/12/2022 16:09:03'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'DW 6/12/2022 16:09:03'!
PASSED!

!testRun: #SalesInterfaceTest #test01ListCartOfNewlyCreatedCartIsEmpty stamp: 'DW 6/12/2022 16:09:03'!
PASSED!

!testRun: #SalesInterfaceTest #test02NewCartGenreatesUniqueIds stamp: 'DW 6/12/2022 16:09:03'!
PASSED!

!testRun: #SalesInterfaceTest #test03CannotCreateCartWithInvalidClientId stamp: 'DW 6/12/2022 16:09:03'!
PASSED!

!testRun: #SalesInterfaceTest #test04CannotCreateCartWithInvalidPassword stamp: 'DW 6/12/2022 16:09:03'!
PASSED!

!testRun: #SalesInterfaceTest #test05ListCartReflectsAddToCart stamp: 'DW 6/12/2022 16:09:03'!
PASSED!

!testRun: #SalesInterfaceTest #test06AddToCartDoesntAffectOtherCarts stamp: 'DW 6/12/2022 16:09:03'!
PASSED!

!testRun: #SalesInterfaceTest #test07CannotListCartWithInvalidCartId stamp: 'DW 6/12/2022 16:09:03'!
PASSED!

!testRun: #SalesInterfaceTest #test08CannotAddToCartWithInvalidCartId stamp: 'DW 6/12/2022 16:09:03'!
PASSED!

!testRun: #SalesInterfaceTest #test09CannotAddToCartAnItemNotSoldByTheStore stamp: 'DW 6/12/2022 16:09:03'!
PASSED!

!testRun: #SalesInterfaceTest #test10AddToCartQuantityMustBeAPositiveNumber stamp: 'DW 6/12/2022 16:09:03'!
PASSED!

!testRun: #SalesInterfaceTest #test11AddToCartQuantityMustBeAnInteger stamp: 'DW 6/12/2022 16:09:03'!
PASSED!

!testRun: #SalesInterfaceTest #test12ListPurchasesOfIvalidUserFails stamp: 'DW 6/12/2022 16:09:03'!
PASSED!

!testRun: #SalesInterfaceTest #test13ListPurchasesOfFreshClientIsEmpty stamp: 'DW 6/12/2022 16:09:03'!
PASSED!

!testRun: #SalesInterfaceTest #test14ListPurchasesAffectedByCheckout stamp: 'DW 6/12/2022 16:09:03'!
PASSED!

!testRun: #SalesInterfaceTest #test15ListPurchasesIsemptyBeforeCheckout stamp: 'DW 6/12/2022 16:09:03'!
PASSED!

!testRun: #SalesInterfaceTest #test16ListPurchasesAfterTwoCheckoutsShowsContentsOfBothCarts stamp: 'DW 6/12/2022 16:09:03'!
PASSED!

!testRun: #SalesInterfaceTest #test17ListPurchasesFailesForInvalidCredentials stamp: 'DW 6/12/2022 16:09:03'!
PASSED!

!testRun: #SalesInterfaceTest #test18CantCheckoutCartWithInvalidId stamp: 'DW 6/12/2022 16:09:03'!
PASSED!

!testRun: #SalesInterfaceTest #test19CantCheckoutTwice stamp: 'DW 6/12/2022 16:09:03'!
PASSED!

!testRun: #SalesInterfaceTest #test20CheckoutCartDoesNotCheckoutWhenMerchantProcessorFails stamp: 'DW 6/12/2022 16:09:03'!
PASSED!
!SalesInterface methodsFor: 'interface' stamp: 'DW 6/12/2022 16:09:40' prior: 50488965!
getClientPurchases: client

	^ purchases at: client ifAbsent: [purchases at: client put: Bag new] ! !

----QUIT----(12 June 2022 16:11:42) CuisUniversity-5096.image priorSource: 4792308!